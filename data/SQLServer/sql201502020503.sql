alter procedure [Prj_Plan_SaveFromProcess] (@prjid 	[int], @version	[int],@creater	[int],@createdate	varchar(4000),@createtime	varchar(4000), @flag integer output, @msg varchar(4000) output  ) AS declare @taskid 	[int], @wbscoding 	varchar(4000), @subject 	varchar(4000), @begindate 	varchar(4000), @enddate 	varchar(4000), @workday        [decimal] (10,1), @content 	varchar(4000), @fixedcost	[decimal](10,2), @parentid	[int], @parentids	varchar(4000), @parenthrmids	varchar(4000), @level_n		[tinyint], @hrmid		[int],@taskindex int, @realManDays decimal(6,1),@actualBeginDate varchar(10),@actualEndDate varchar(10),@finish int, @all_cursor	cursor SET @all_cursor = CURSOR FORWARD_ONLY STATIC FOR select  id , wbscoding, subject , begindate, enddate, workday, content, fixedcost, parentid, parentids, parenthrmids, level_n, hrmid,taskindex,realManDays,actualBeginDate,actualEndDate,finish from [Prj_TaskProcess] where prjid = @prjid OPEN @all_cursor FETCH NEXT FROM @all_cursor INTO @taskid,@wbscoding,@subject,@begindate,@enddate, @workday,@content,@fixedcost,@parentid,@parentids,@parenthrmids,@level_n,@hrmid,@taskindex,@realManDays,@actualBeginDate,@actualEndDate,@finish WHILE @@FETCH_STATUS = 0 begin INSERT INTO [Prj_TaskInfo] ( prjid, taskid , wbscoding, subject ,begindate, enddate, workday, content, fixedcost, parentid, parentids, parenthrmids, level_n, hrmid,taskindex,realManDays,actualBeginDate,actualEndDate,finish, isactived, version,creater,createdate,createtime)  VALUES (  @prjid, @taskid , @wbscoding, @subject , @begindate, @enddate, @workday, @content, @fixedcost, @parentid, @parentids, @parenthrmids, @level_n, @hrmid,@taskindex,@realManDays,@actualBeginDate,@actualEndDate,@finish,'1',@version,@creater,@createdate,@createtime) FETCH NEXT FROM @all_cursor INTO @taskid,@wbscoding,@subject,@begindate,@enddate, @workday,@content,@fixedcost,@parentid,@parentids,@parenthrmids,@level_n,@hrmid,@taskindex,@realManDays,@actualBeginDate,@actualEndDate,@finish end CLOSE @all_cursor DEALLOCATE @all_cursor
GO