UPDATE cptDefineField SET fieldlabel = '16914' WHERE id = -27
GO
CREATE PROCEDURE CptUseLogMend_Insert2 (@capitalid_1 	[int], @usedate_2 	[char](10),    @usedeptid_3 	[int], @useresourceid_4 	[int], @usecount_5 	[int], @useaddress_6 	[varchar](200), @userequest_7 	[int],    @maintaincompany_8 	[varchar](100), @fee_9 	[decimal](18,3), @usestatus_10 	[varchar](2), @remark_11 	[text],    @resourceid_12 [varchar](60),@mendperioddate_13 [varchar](60), @olddeptid_14 	[int],@flag integer output, @msg varchar(80) output)  AS   INSERT INTO [CptUseLog] ( [capitalid], [usedate], [usedeptid], [useresourceid], [usecount], [useaddress], [userequest],   [maintaincompany], [fee], [usestatus], [remark],[resourceid],[mendperioddate],[olddeptid])    VALUES ( @capitalid_1, @usedate_2, @usedeptid_3, @useresourceid_4, @usecount_5, @useaddress_6, @userequest_7,  @maintaincompany_8, @fee_9, '4', @remark_11,@resourceid_12,@mendperioddate_13,@olddeptid_14)  Update CptCapital Set stateid =  @usestatus_10 where id = @capitalid_1 
GO
CREATE PROCEDURE CptUseLogBack_Insert2 ( @capitalid_1 	[int], @usedate_2 	[char](10), @usedeptid_3 	[int],  @useresourceid_4 	[int], @usecount_5 	[int], @useaddress_6 	[varchar](200), @userequest_7 	[int],  @maintaincompany_8 	[varchar](100), @fee_9 	[decimal](18,3), @usestatus_10 	[varchar](2), @remark_11 	[text],  @costcenterid   [int], @sptcount	[char](1), @olddeptid_14 	[int], @flag integer output, @msg varchar(80) output) AS declare @num  int  if @sptcount<>'1' begin select @num=capitalnum  from CptCapital where id = @capitalid_1 end  INSERT INTO [CptUseLog] ( [capitalid], [usedate], [usedeptid], [useresourceid], [usecount], [useaddress],  [userequest], [maintaincompany], [fee], [usestatus], [remark],[olddeptid]) VALUES ( @capitalid_1, @usedate_2, @usedeptid_3,  @useresourceid_4, @usecount_5, @useaddress_6, @userequest_7, @maintaincompany_8, @fee_9, '0', @remark_11,@olddeptid_14) if @sptcount='1' begin Update CptCapital Set departmentid=null where id = @capitalid_1  Update CptCapital Set  costcenterid=null, resourceid=null, stateid = @usestatus_10, deprestartdate = null  where id = @capitalid_1 end  else begin  Update CptCapital Set capitalnum = @num+@usecount_5 where id = @capitalid_1 end select 1 
GO
CREATE PROCEDURE CptUseLogDiscard_Insert2 (@capitalid_1 	[int], @usedate_2 	[char](10), @usedeptid_3 	[int],  @useresourceid_4 	[int], @usecount_5 	[decimal](18,3), @useaddress_6 	[varchar](200), @userequest_7 	[int], @maintaincompany_8 	[varchar](100), @fee_9 	[decimal](18,3), @usestatus_10 	varchar(2),  @remark_11 	[text], @sptcount_12	[char](1),@olddeptid_13 	[int], @flag integer output, @msg varchar(80) output)  AS declare @num [decimal](18,3)  if @sptcount_12<>'1' begin select @num=capitalnum  from CptCapital where id = @capitalid_1  if @num<@usecount_5 begin select -1 return end else begin select @num = @num-@usecount_5 end end  INSERT INTO [CptUseLog] ( [capitalid], [usedate], [usedeptid], [useresourceid], [usecount], [useaddress],  [userequest], [maintaincompany], [fee], [usestatus], [remark],[olddeptid])  VALUES ( @capitalid_1, @usedate_2, @usedeptid_3, @useresourceid_4,  @usecount_5, @useaddress_6, @userequest_7, @maintaincompany_8, @fee_9, '5', @remark_11,@olddeptid_13)  if @sptcount_12 ='1' begin Update CptCapital Set departmentid = null,  costcenterid = null, resourceid   = null, location	     =  null, stateid = @usestatus_10 where id = @capitalid_1 end   else begin Update CptCapital Set capitalnum = @num where id = @capitalid_1 end  select 1 
GO
CREATE PROCEDURE CptUseLogLoss_Insert2 (@capitalid_1 	[int],    @usedate_2 	[char](10), @usedeptid_3 	[int], @useresourceid_4 	[int], @usecount_5 	[decimal](18,2),    @useaddress_6 	[varchar](200), @userequest_7 	[int], @maintaincompany_8 	[varchar](100), @fee_9 	[decimal](18,3),    @usestatus_10 	[varchar](2), @remark_11 	[text], @costcenterid   [int], @sptcount	[char](1), @olddeptid_14 	[int], @flag integer output,    @msg varchar(80) output)  AS declare @num [decimal](18,2)  if @sptcount<>'1'    begin select @num=capitalnum  from CptCapital where id = @capitalid_1 if @num<@usecount_5 begin select -1 return end else BEGIN     select @num = @num-@usecount_5 end end  INSERT INTO [CptUseLog] ( [capitalid], [usedate], [usedeptid], [useresourceid], [usecount],  [useaddress], [userequest], [maintaincompany], [fee], [usestatus], [remark],[olddeptid])   VALUES ( @capitalid_1, @usedate_2, @usedeptid_3, @useresourceid_4, @usecount_5, @useaddress_6, @userequest_7, @maintaincompany_8,  @fee_9, '-7', @remark_11,@olddeptid_14)   if @sptcount='1' begin Update CptCapital Set departmentid=null, costcenterid=null, resourceid=null, stateid = @usestatus_10  where id = @capitalid_1 end  else begin Update CptCapital Set capitalnum = @num where id = @capitalid_1 end  select 1 
GO
UPDATE workflow_billfield SET fielddbtype = 'decimal(15,2)' WHERE  billid = 221 and fieldname = 'losscount'
GO
ALTER TABLE cptcapital  alter COLUMN frozennum DECIMAL(18,2)
GO
ALTER TABLE bill_cptloss  alter COLUMN losscount DECIMAL(15,2)
GO