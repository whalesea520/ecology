/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._mobile._plugin._plus._cowork._data;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import java.util.*;
import weaver.hrm.*;
import weaver.systeminfo.*;
import weaver.general.StaticObj;
import weaver.general.Util;
import weaver.hrm.settings.RemindSettings;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import java.net.*;
import org.json.JSONObject;
import org.json.JSONArray;
import weaver.general.*;
import weaver.file.FileUpload;
import weaver.conn.*;
import weaver.hrm.resource.ResourceComInfo;
import weaver.wxinterface.WxInterfaceInit;
import weaver.cowork.CoworkLabelVO;
import weaver.systeminfo.SystemEnv;

public class _coworkoperation__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      
	
	response.setHeader("cache-control", "no-cache");
	response.setHeader("pragma", "no-cache");
	response.setHeader("expires", "Mon 1 Jan 1990 00:00:00 GMT");
	

	User user = HrmUserVarify.getUser (request , response) ;
	if(user == null)  return ;
	Log logger= LogFactory.getLog(this.getClass());
	String isIE = (String)session.getAttribute("browser_isie");

      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.cowork.CoTypeComInfo CoTypeComInfo;
      CoTypeComInfo = (weaver.cowork.CoTypeComInfo) pageContext.getAttribute("CoTypeComInfo");
      if (CoTypeComInfo == null) {
        CoTypeComInfo = new weaver.cowork.CoTypeComInfo();
        pageContext.setAttribute("CoTypeComInfo", CoTypeComInfo);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.cowork.CoTypeRight CoTypeRight;
      CoTypeRight = (weaver.cowork.CoTypeRight) pageContext.getAttribute("CoTypeRight");
      if (CoTypeRight == null) {
        CoTypeRight = new weaver.cowork.CoTypeRight();
        pageContext.setAttribute("CoTypeRight", CoTypeRight);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.cowork.CoworkShareManager csm;
      csm = (weaver.cowork.CoworkShareManager) pageContext.getAttribute("csm");
      if (csm == null) {
        csm = new weaver.cowork.CoworkShareManager();
        pageContext.setAttribute("csm", csm);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.conn.RecordSet rs;
      rs = (weaver.conn.RecordSet) pageContext.getAttribute("rs");
      if (rs == null) {
        rs = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs", rs);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.cowork.CoworkItemMarkOperation coworkItemMarkOperation;
      coworkItemMarkOperation = (weaver.cowork.CoworkItemMarkOperation) pageContext.getAttribute("coworkItemMarkOperation");
      if (coworkItemMarkOperation == null) {
        coworkItemMarkOperation = new weaver.cowork.CoworkItemMarkOperation();
        pageContext.setAttribute("coworkItemMarkOperation", coworkItemMarkOperation);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.cowork.CoTypeComInfo coTypeComInfo;
      coTypeComInfo = (weaver.cowork.CoTypeComInfo) pageContext.getAttribute("coTypeComInfo");
      if (coTypeComInfo == null) {
        coTypeComInfo = new weaver.cowork.CoTypeComInfo();
        pageContext.setAttribute("coTypeComInfo", coTypeComInfo);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.mobile.plugin.ecology.service.CoworkService coworkService;
      coworkService = (weaver.mobile.plugin.ecology.service.CoworkService) pageContext.getAttribute("coworkService");
      if (coworkService == null) {
        coworkService = new weaver.mobile.plugin.ecology.service.CoworkService();
        pageContext.setAttribute("coworkService", coworkService);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      
	int status = 1;String msg = ""; 
	Map result = new HashMap();
	String userId=user.getUID()+"";
	JSONObject json = new JSONObject();
	request.setCharacterEncoding("UTF-8");
	FileUpload fu = new FileUpload(request);
	//response.setContentType("application/json;charset=UTF-8");
	String operate = Util.null2String(fu.getParameter("operate"));
	String currentDate = TimeUtil.getCurrentDateString();
	String currentTime = TimeUtil.getOnlyCurrentTimeString();
	char flag = 2;
	String Proc="";
	try{
		if(operate.equals("getCoworkType")){//\u83b7\u53d6\u534f\u4f5c\u7c7b\u578b \u589e\u52a0\u8fd4\u56de\u5f53\u524d\u7528\u6237ID\u548c\u59d3\u540d\uff0c\u7528\u4e8e\u56fa\u5b9a\u8d1f\u8d23\u4eba
			JSONArray ja = new JSONArray();
			while(CoTypeComInfo.next()){
            	String tmptypeid=CoTypeComInfo.getCoTypeid();
                String typename=CoTypeComInfo.getCoTypename();  
                String isAnonymouss = CoTypeComInfo.getIsAnonymouss();
                int sharelevel = CoTypeRight.getRightLevelForCowork(""+userId,tmptypeid);
                if(sharelevel==0) continue;
                JSONObject jo = new JSONObject();
                jo.put("id", tmptypeid);
                jo.put("name", typename);
                jo.put("isAnonymouss", isAnonymouss);
                ja.put(jo);
	    	}
			json.put("typeList", ja);
			json.put("userid", userId);
			ResourceComInfo rc = new ResourceComInfo();
			json.put("userName", rc.getLastname(userId));
			status = 0;
		}else if(operate.equals("addCowork")){//\u65b0\u589e\u534f\u4f5c
			String creater = userId;//\u521b\u5efa\u4eba \u4e0d\u9700\u8981\u4f20
			String name = Util.null2String(fu.getParameter2("name"));//\u534f\u4f5c\u540d\u79f0 \u5fc5\u4f20
			//System.out.println("name1111==="+name);
			//System.out.println("nam222222==="+fu.getParameter("name"));
			name = Util.null2String(new String(name.getBytes("ISO-8859-1"), "utf-8"));
			//System.out.println("name333==="+name);
			String typeid = Util.fromScreen(fu.getParameter("typeid"),user.getLanguage());//\u534f\u4f5c\u7c7b\u578bID \u5fc5\u4f20
			String principal = Util.null2String(fu.getParameter("txtPrincipal"));//\u534f\u4f5c\u8d1f\u8d23\u4eba \u5fc5\u4f20
			String begindate = Util.null2String(fu.getParameter("begindate"));//\u5f00\u59cb\u65e5\u671f \u5fc5\u4f20
			String enddate = Util.null2String(fu.getParameter("enddate"));//\u7ed3\u675f\u65e5\u671f \u5fc5\u4f20
			if(begindate.equals("")){
				begindate = currentDate;
			}
			if(enddate.equals("")){
				enddate = currentDate;
			}
			String levelvalue = Util.fromScreen(fu.getParameter("levelvalue"),user.getLanguage());//\u534f\u4f5c\u7d27\u6025\u7a0b\u5ea6 \u975e\u5fc5\u4f20
			String beingtime = Util.null2String(fu.getParameter("beingtime"));//\u5f00\u59cb\u65f6\u95f4 \u975e\u5fc5\u4f20
			String endtime = Util.null2String(fu.getParameter("endtime"));//\u7ed3\u675f\u65f6\u95f4 \u975e\u5fc5\u4f20
			if(beingtime.equals("")){
				beingtime = currentTime.substring(0,5);
			}
			if(endtime.equals("")){
				endtime = currentTime.substring(0,5);
			}
			String relatedprj = Util.fromScreen(fu.getParameter("relatedprj"),user.getLanguage()); //\u76f8\u5173\u9879\u76ee\u4efb\u52a1 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relatedcus = Util.fromScreen(fu.getParameter("relatedcus"),user.getLanguage()); //\u76f8\u5173\u5ba2\u6237 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relatedwf = Util.fromScreen(fu.getParameter("relatedwf"),user.getLanguage());   //\u76f8\u5173\u6d41\u7a0b \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relateddoc = Util.fromScreen(fu.getParameter("relateddoc"),user.getLanguage()); //\u76f8\u5173\u6587\u6863 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relatedacc =Util.fromScreen(fu.getParameter("relatedacc"),user.getLanguage());  //\u76f8\u5173\u9644\u4ef6 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String remark = Util.null2String(fu.getParameter2("remark"));//\u63cf\u8ff0 \u975e\u5fc5\u4f20
			String isAnonymouss = Util.null2String(fu.getParameter("isAnonymouss"));//\u662f\u5426\u5141\u8bb8\u533f\u540d 0\u5426 1\u662f
			String accessorys = Util.null2String(fu.getParameter("accessorys"));//\u9644\u4ef6ID
			//System.out.println("accessorys========="+accessorys);
			remark = Util.null2String(new String(remark.getBytes("ISO-8859-1"), "utf-8"));
			String projectIDs = Util.null2String(fu.getParameter("projectIDs"));//\u76f8\u5173\u9879\u76ee \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			if(!name.equals("")&&!begindate.equals("")&&!principal.equals("")){
				String tempdocids = "";
				ArrayList docids = new ArrayList();
				docids = Util.TokenizerString(relateddoc,",");
				for(int i=0;i<docids.size();i++){
					tempdocids =tempdocids+docids.get(i).toString()+"|"+userId+",";
				}
				String id = "";
				//\u6dfb\u52a0\u4e8b\u52a1\u63a7\u5236\uff0c\u521b\u5efa\u5f02\u5e38\u56de\u6eda\u6570\u636e
			    RecordSetTrans rst=new RecordSetTrans();
				rst.setAutoCommit(false);
				try{
					String[] fileids = accessorys.split(",");
					if(fileids.length>0){
						StringBuffer sb = new StringBuffer();
						for(String fileid:fileids){
							if(!"".equals(fileid)){
								sb.append("<img src=\"/weaver/weaver.file.FileDownload?fileid="+fileid+"\" alt=\"\"/><br/>");
							}
						}
						remark = sb.toString()+remark;
					}
					Proc=name+flag+typeid+flag+levelvalue+flag+creater+flag+principal+flag+
						  currentDate+flag+currentTime+flag+begindate+flag+beingtime+flag+enddate+flag+
				          endtime+flag+relatedprj+flag+relatedcus+flag+relatedwf+flag+tempdocids+flag+
				          remark+flag+status+flag+relatedacc+flag+projectIDs+flag+creater;
					rst.executeProc("cowork_items_insert",Proc);
					//\u83b7\u53d6\u5f53\u524d\u534f\u4f5cid
					while(rst.next()){
						id = rst.getString(1);
					}
					rst.commit();
				}catch(Exception e){
					rst.rollback();
					e.printStackTrace();
					msg = e.getMessage();
				}
				//\u5224\u65ad\u534f\u4f5c\u662f\u5426\u521b\u5efa\u6210\u529f\u4e0d\u4e3a\u7a7a\u8868\u793a\u521b\u5efa\u6210\u529f
				if(!id.equals("")){
					//\u6dfb\u52a0\u534f\u4f5c\u53c2\u4e0e\u4eba\u5171\u4eab\u8868  
					//\u9875\u9762\u9700\u8981\u6709\u53c2\u6570shareOperation\u503c\u4e3aadd
					//sharetype\uff1a\u9009\u62e9\u67d0\u4e9b\u4eba\u503c\u4e3a1,\u9009\u62e9\u6240\u6709\u4eba \u503c\u4e3a5
					//shareid\uff1a\u56fa\u5b9a\u4f200
					//relatedshareid:\u9009\u62e9\u67d0\u4e9b\u4eba \u503c\u4e3a\u7528\u6237ID,\u524d\u540e\u5fc5\u987b\u52a0\u4e0a\u9017\u53f7,\u6bd4\u5982: ,6,7,8,  \u9009\u62e9\u6240\u6709\u4eba\u6b64\u53c2\u6570\u4e3a\u7a7a
					//secLevel \u5b89\u5168\u7ea7\u522b \u56fa\u5b9a\u4f200
				    csm.addShare(id,creater,principal,fu);
				  	//\u9644\u4ef6\u5171\u4eab
				    if(!"".equals(relatedacc)){
				       csm.addCoworkDocShare(userId,relatedacc,typeid,id,principal);
				    }
				  	//\u5c06\u521b\u5efa\u8005\u6dfb\u52a0\u5230\u5df2\u8bfb
					rs.execute("insert into cowork_read(coworkid,userid) values("+id+","+userId+")");
					//log here 1-new;2-view;3-edit  \u534f\u4f5c\u521b\u5efa\u65e5\u5fd7
					String ProcPara = id+flag+"1"+flag+currentDate+flag+currentTime+flag+userId+flag+fu.getRemoteAddr();
					rs.executeProc("cowork_log_insert",ProcPara);
					//
					rs.execute("update cowork_items set lastupdatedate='"+currentDate+"',lastupdatetime='"+currentTime+"',isApproval=0,isAnonymous="+isAnonymouss+",accessory='',approvalAtatus=0 where id="+id);
					rs.executeSql("update cowork_items set istop=0,readNum=0,replyNum=0 where id = "+id);
					json.put("id", id);
					status = 0;
				}else{
					msg = "\u521b\u5efa\u534f\u4f5c\u5931\u8d25:"+msg;
				}
			}else{
				msg = "\u76f8\u5173\u4fe1\u606f\u4e0d\u5b8c\u6574";
			}
		}else if(operate.equals("editCowork")){//\u7f16\u8f91\u534f\u4f5c
			String creater = userId;//\u521b\u5efa\u4eba \u4e0d\u9700\u8981\u4f20
			String id = Util.null2String(fu.getParameter("id"));//\u534f\u4f5cID
			String name = Util.fromScreen(fu.getParameter("name"),user.getLanguage());//\u534f\u4f5c\u540d\u79f0 \u5fc5\u4f20
			String typeid = Util.fromScreen(fu.getParameter("typeid"),user.getLanguage());//\u534f\u4f5c\u7c7b\u578bID \u5fc5\u4f20
			String principal = Util.null2String(fu.getParameter("txtPrincipal"));//\u534f\u4f5c\u8d1f\u8d23\u4eba \u5fc5\u4f20
			String begindate = Util.fromScreen(fu.getParameter("begindate"),user.getLanguage());//\u5f00\u59cb\u65e5\u671f \u5fc5\u4f20
			String enddate = Util.fromScreen(fu.getParameter("enddate"),user.getLanguage());//\u7ed3\u675f\u65e5\u671f \u5fc5\u4f20
			String levelvalue = Util.fromScreen(fu.getParameter("levelvalue"),user.getLanguage());//\u534f\u4f5c\u7d27\u6025\u7a0b\u5ea6 \u975e\u5fc5\u4f20
			String beingtime = Util.fromScreen(fu.getParameter("beingtime"),user.getLanguage());//\u5f00\u59cb\u65f6\u95f4 \u975e\u5fc5\u4f20
			String endtime = Util.fromScreen(fu.getParameter("endtime"),user.getLanguage());//\u7ed3\u675f\u65f6\u95f4 \u975e\u5fc5\u4f20
			String relatedprj = Util.fromScreen(fu.getParameter("relatedprj"),user.getLanguage()); //\u76f8\u5173\u9879\u76ee\u4efb\u52a1 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relatedcus = Util.fromScreen(fu.getParameter("relatedcus"),user.getLanguage()); //\u76f8\u5173\u5ba2\u6237 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relatedwf = Util.fromScreen(fu.getParameter("relatedwf"),user.getLanguage());   //\u76f8\u5173\u6d41\u7a0b \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relateddoc = Util.fromScreen(fu.getParameter("relateddoc"),user.getLanguage()); //\u76f8\u5173\u6587\u6863 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String relatedacc =Util.fromScreen(fu.getParameter("relatedacc"),user.getLanguage());  //\u76f8\u5173\u9644\u4ef6 \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			String remark = Util.null2String(fu.getParameter("remark"));//\u63cf\u8ff0 \u975e\u5fc5\u4f20
			String projectIDs = Util.null2String(fu.getParameter("projectIDs"));//\u76f8\u5173\u9879\u76ee \u624b\u673a\u7248\u9ed8\u8ba4\u4e3a\u7a7a
			if(!name.equals("")&&!begindate.equals("")&&!enddate.equals("")&&!principal.equals("")){
				csm.deleteShare(id); //\u5220\u9664\u539f\u6709\u53c2\u4e0e\u6761\u4ef6
				csm.addShare(id,creater,principal,fu);//\u6dfb\u52a0\u7684\u65b0\u7684\u53c2\u4e0e\u6761\u4ef6 \u53c2\u4e0e\u6761\u4ef6\u683c\u5f0f\u53c2\u8003\u65b0\u5efa\u534f\u4f5c
				Proc=id+flag+name+flag+typeid+flag+levelvalue+flag+principal+flag+
				        projectIDs+flag+begindate+flag+beingtime+flag+enddate+flag+endtime+flag+
				        relatedprj+flag+relatedcus+flag+relatedwf+flag+""+flag+remark+flag+
				        relatedacc;
				rs.executeProc("cowork_items_update",Proc);
				//\u5c06\u5f53\u524d\u64cd\u4f5c\u8005\u8005\u6dfb\u52a0\u5230\u5df2\u8bfb\u8005\u4e2d
				rs.executeSql("insert into cowork_read(coworkid,userid) values("+id+","+userId+")");
				//log here 1-new;2-view;3-edit
				String ProcPara = ""+id+flag+"3"+flag+currentDate+flag+currentTime+flag+userId+flag+fu.getRemoteAddr();
				rs.executeProc("cowork_log_insert",ProcPara);
				status = 0;
			}else{
				msg = "\u76f8\u5173\u4fe1\u606f\u4e0d\u5b8c\u6574";
			}
		}else if(operate.equals("getCoworkById")){
			
		}
		//\u83b7\u53d6\u534f\u4f5c\u6807\u7b7e
		else if(operate.equals("getCoopLabels")){
			//\u5224\u65ad\u7f16\u7801
			if(WxInterfaceInit.isIsutf8()){
				response.setContentType("application/json;charset=UTF-8");
			}
			
			User vuser = HrmUserVarify.getUser (request , response) ;
			if(vuser==null) {
				status = 0;
				msg = "\u7528\u6237\u767b\u5f55\u5931\u8d25";
			} else {
				int userid = user.getUID();
				List<CoworkLabelVO> labels = coworkItemMarkOperation.getLabelList("" + userid, "all");
				JSONArray jArray = new JSONArray();
				JSONObject jObject = null;
				for (CoworkLabelVO label : labels) {
					if (!"1".equals(label.getIsUsed())) {
						continue;
					}
					
					jObject = new JSONObject();
					String labelId = "";
					String labelName = "";
					String labelType = label.getLabelType();
					
					if ("unread".equals(labelType)) {
						labelId = "-1";
					} else if ("important".equals(labelType)) {
						labelId = "-2";
					} else if ("hidden".equals(labelType)) {
						labelId = "-3";
					} else {
						labelId = label.getId();
					}
					
					if ("label".equals(labelType)) {
						labelName = label.getName();
					} else if ("typePlate".equals(labelType)) {
						labelName = coTypeComInfo.getCoTypename(label.getName());
					} else {
						labelName = SystemEnv.getHtmlLabelName(Util.getIntValue(label.getName()), user.getLanguage());
					}
					
					jObject.put("id", labelId);
					jObject.put("name", labelName);
					jObject.put("labelType", labelType);
					jObject.put("labelColor", label.getLabelColor());
					jObject.put("textColor", label.getTextColor());
					jArray.put(jObject);
				}
				result.put("labels", jArray);
				status = 1;
			}
			
			result.put("status", status);
			result.put("msg", msg);
			out.println(new JSONObject(result));
			return;
		}
		//\u83b7\u53d6\u534f\u4f5c\u5217\u8868
		else if(operate.equals("getCoworkList")){
			//\u5224\u65ad\u7f16\u7801
			if(WxInterfaceInit.isIsutf8()){
				response.setContentType("application/json;charset=UTF-8");
			}
			
			User vuser = HrmUserVarify.getUser (request , response) ;
			if(vuser==null) {
				status = 0;
				msg = "\u7528\u6237\u767b\u5f55\u5931\u8d25";
			} else {
				int userid = user.getUID();
				int labelid = Util.getIntValue(fu.getParameter("labelid"), 0);
				String labeltype = Util.null2String(fu.getParameter("labeltype"));
				int pageIndex = Util.getIntValue(fu.getParameter("pageindex"), 1);
				int pageSize = Util.getIntValue(fu.getParameter("pagesize"), 10);
				String keyword = Util.null2String(fu.getParameter("keyword"));
				keyword = URLDecoder.decode(keyword, "utf-8");
				
				List conditions = new ArrayList();
				if ("typePlate".equals(labeltype)) {
					conditions.add("0");
					conditions.add(" typeid = (select name from cowork_label where id = "+labelid+")");
				} else {
					conditions.add(""+labelid);
				}
				
				if(keyword!=null && !"".equals(keyword)) {
					conditions.add(" (name like '%"+keyword+"%') ");
				}
				
				result = coworkService.getCoworkList(conditions, pageIndex, pageSize, user);
				out.println(new JSONObject(result));
				return;
			}
		}
	}catch(Exception e){
		e.printStackTrace();
		msg = e.getMessage();
	}
	json.put("status",status);
	json.put("msg",msg);
	//System.out.println(json.toString());
	out.println(json.toString());

    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("mobile/plugin/plus/cowork/data/coworkOperation.jsp"), 974091520784843631L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("page/maint/common/initNoCache.jsp"), 3270256153856711871L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string1;
  private final static char []_jsp_string0;
  private final static char []_jsp_string2;
  static {
    _jsp_string1 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string2 = "\r\n".toCharArray();
  }
}
