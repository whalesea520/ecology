/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._mobile._plugin._plus._meeting._data;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import java.util.*;
import weaver.hrm.*;
import weaver.systeminfo.*;
import weaver.general.StaticObj;
import weaver.general.Util;
import weaver.hrm.settings.RemindSettings;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import weaver.general.*;
import net.sf.json.*;
import java.util.List;
import java.util.Date;
import java.util.Calendar;
import java.text.SimpleDateFormat;
import weaver.wxinterface.MeetingUtils;
import weaver.file.FileUpload;
import weaver.conn.RecordSet;
import weaver.Constants;
import weaver.domain.workplan.WorkPlan;
import weaver.WorkPlan.WorkPlanLogMan;
import weaver.WorkPlan.WorkPlanService;
import weaver.hrm.resource.ResourceComInfo;
import java.lang.reflect.Method;
import weaver.docs.docs.DocImageManager;
import weaver.wxinterface.WxModuleInit;
import weaver.wxinterface.WxInterfaceInit;
import weaver.wxinterface.FormatMultiLang;
import weaver.wxinterface.Meeting;
import weaver.file.Prop;

public class _meetingoperation__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;

  
  public void addPlan(String subject,
                      String meetingID,
                      String beginDate,
                      String beginTime,
                      String endDate,
                      String endTime,
                      String caller,
                      String currentDate,
                      String currentTime,
                      String remindType,
                      String remindBeforeStart,
                      String remindBeforeEnd,
                      int remindTimesBeforeStart,
                      int remindTimesBeforeEnd,
                      String description,
  					String ip)
  {
      if(!meetingID.equals(""))
      {        
          String sqlstr="SELECT DISTINCT memberManager FROM Meeting_Member2 WHERE meetingId = " + meetingID;
          String resourceids ="";
          String para ="";
  	    String[] logParams;
  	    WorkPlanLogMan logMan = new WorkPlanLogMan();
          char flag1 = Util.getSeparator() ;
          RecordSet rs = new RecordSet();
          rs.executeSql(sqlstr);	
          while(rs.next())
          {
              resourceids += ","+ rs.getString(1);
          }
                          
  		if(!"".equals(resourceids))
  		{
  	        WorkPlan workPlan = new WorkPlan();
  	        WorkPlanService workPlanService = new WorkPlanService();
  		    
  		    workPlan.setCreaterId(Integer.parseInt(caller));
  		    //workPlan.setCreateType(Integer.parseInt(user.getLogintype()));
  
  		    workPlan.setWorkPlanType(Integer.parseInt(Constants.WorkPlan_Type_ConferenceCalendar));        
  		    workPlan.setWorkPlanName(subject);    
  		    workPlan.setUrgentLevel(Constants.WorkPlan_Urgent_Normal);
  		    workPlan.setResourceId(resourceids.substring(1));
  		    workPlan.setBeginDate(beginDate);
  		    if(null != beginTime && !"".equals(beginTime.trim()))
  		    {
  		        workPlan.setBeginTime(beginTime);  //\u5f00\u59cb\u65f6\u95f4
  		    }
  		    else
  		    {
  		        workPlan.setBeginTime(Constants.WorkPlan_StartTime);  //\u5f00\u59cb\u65f6\u95f4
  		    }	    
  		    workPlan.setEndDate(endDate);
  		    if(null != endDate && !"".equals(endDate.trim()) && (null == endTime || "".equals(endTime.trim())))
  		    {
  		        workPlan.setEndTime(Constants.WorkPlan_EndTime);  //\u7ed3\u675f\u65f6\u95f4
  		    }
  		    else
  		    {
  		        workPlan.setEndTime(endTime);  //\u7ed3\u675f\u65f6\u95f4
  		    }
  		    workPlan.setMeeting(meetingID);
  		    //\u589e\u52a0\u63d0\u9192
  		    workPlan.setRemindType(remindType);  //\u63d0\u9192\u65b9\u5f0f
  		    if(!"".equals(remindBeforeStart) && null != remindBeforeStart)
  		    {
  		        workPlan.setRemindBeforeStart(remindBeforeStart);  //\u662f\u5426\u5f00\u59cb\u524d\u63d0\u9192
  		    }
  		    if(!"".equals(remindBeforeEnd) && null != remindBeforeEnd)
  		    {
  		        workPlan.setRemindBeforeEnd(remindBeforeEnd);  //\u662f\u5426\u7ed3\u675f\u524d\u63d0\u9192
  		    }
  		    workPlan.setRemindTimesBeforeStart(remindTimesBeforeStart);  //\u5f00\u59cb\u524d\u63d0\u9192\u65f6\u95f4
  		    workPlan.setRemindTimesBeforeEnd(remindTimesBeforeEnd);  //\u7ed3\u675f\u524d\u63d0\u9192\u65f6\u95f4
  		    
  		    if(!"".equals(workPlan.getBeginDate()) && null != workPlan.getBeginDate())
  		    {	    	
  		    	List beginDateTimeRemindList = Util.processTimeBySecond(workPlan.getBeginDate(), workPlan.getBeginTime(), workPlan.getRemindTimesBeforeStart() * -1 * 60);
  		    	workPlan.setRemindDateBeforeStart((String)beginDateTimeRemindList.get(0));  //\u5f00\u59cb\u524d\u63d0\u9192\u65e5\u671f
  		    	workPlan.setRemindTimeBeforeStart((String)beginDateTimeRemindList.get(1));  //\u5f00\u59cb\u524d\u63d0\u9192\u65f6\u95f4
  		    }
  		    if(!"".equals(workPlan.getEndDate()) && null != workPlan.getEndDate())
  		    {
  		    	List endDateTimeRemindList = Util.processTimeBySecond(workPlan.getEndDate(), workPlan.getEndTime(), workPlan.getRemindTimesBeforeEnd() * -1 * 60);
  		    	workPlan.setRemindDateBeforeEnd((String)endDateTimeRemindList.get(0));  //\u7ed3\u675f\u524d\u63d0\u9192\u65e5\u671f
  		    	workPlan.setRemindTimeBeforeEnd((String)endDateTimeRemindList.get(1));  //\u7ed3\u675f\u524d\u63d0\u9192\u65f6\u95f4
  		    }
  		    workPlan.setDescription(description);
  		    workPlanService.insertWorkPlan(workPlan);  //\u63d2\u5165\u65e5\u7a0b
  		    
  		    //\u63d2\u5165\u65e5\u5fd7
              logParams = new String[] {String.valueOf(workPlan.getWorkPlanID()), WorkPlanLogMan.TP_CREATE, caller, ip};
              logMan.writeViewLog(logParams);
  		}     
      }
  }
  public String getHrmNames(String ids){
  	String hrmnames = "";
  	if(ids!=null && !"".equals(ids)){
  		try {
  			ResourceComInfo rc = new ResourceComInfo();
  			StringBuffer names = new StringBuffer();
  			List idList = Util.TokenizerString(ids, ",");
  			for (int i = 0; i < idList.size(); i++) {
  				names.append("," + rc.getLastname((String)idList.get(i)));
  			}
  			hrmnames = names.toString();
  		} catch (Exception ex) {
  			//ex.printStackTrace();
  		}
  	}
  	if(!"".equals(hrmnames)) hrmnames = hrmnames.substring(1);
  	return hrmnames;
  }
  public JSONArray getFJJsonArray(String docids,DocImageManager DocImageManager){
  	JSONArray js = new JSONArray();
  	if(!docids.equals("")){
  		String[] docs = docids.split(",");
  		if(null!=docs&&docs.length>0){
  			for(String docid:docs){
  				if(!docid.equals("")){
  					try{
  						DocImageManager.resetParameter();
  					    DocImageManager.setDocid(Integer.parseInt(docid));
  					    DocImageManager.selectDocImageInfo();
  					    if(DocImageManager.next()){
  					    	String curimgid = DocImageManager.getImagefileid();
  					        String curimgname = DocImageManager.getImagefilename();
  					        String docFileType = DocImageManager.getDocfiletype();
  					        long docImagefileSize = DocImageManager.getImageFileSize(Util.getIntValue(curimgid));
  					        String docImagefilename = Util.null2String(DocImageManager.getImagefilename());
  					        String docImagefileSizeStr = "";
  					        if(docImagefileSize / (1024 * 1024) > 0) {
  					        	docImagefileSizeStr = (docImagefileSize / 1024 / 1024) + "M";
  					        } else if(docImagefileSize / 1024 > 0) {
  					        	docImagefileSizeStr = (docImagefileSize / 1024) + "K";
  					        } else {
  					        	docImagefileSizeStr = docImagefileSize + "B";
  					        }
  					        int idx = docImagefilename.length() - 200;
  					        String urlfilename = (idx > 0) ? docImagefilename.substring(idx, docImagefilename.length()) : docImagefilename;
  					        urlfilename = java.net.URLEncoder.encode(urlfilename,"UTF-8");
  					        JSONObject fj = new JSONObject();
  					        fj.put("name", docImagefilename);
  					        fj.put("urlfilename", urlfilename);
  					        fj.put("size", docImagefileSizeStr);
  					        fj.put("fileid", curimgid);
  					        js.add(fj);
  					    }
  					}catch(Exception e){
  						
  					}
  				}
  			}
  		}
  	}
  	return js;
  }

  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=utf-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      
	
	response.setHeader("cache-control", "no-cache");
	response.setHeader("pragma", "no-cache");
	response.setHeader("expires", "Mon 1 Jan 1990 00:00:00 GMT");
	

	User user = HrmUserVarify.getUser (request , response) ;
	if(user == null)  return ;
	Log logger= LogFactory.getLog(this.getClass());
	String isIE = (String)session.getAttribute("browser_isie");

      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet rs;
      rs = (weaver.conn.RecordSet) pageContext.getAttribute("rs");
      if (rs == null) {
        rs = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs", rs);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.docs.docs.DocImageManager DocImageManager;
      DocImageManager = (weaver.docs.docs.DocImageManager) pageContext.getAttribute("DocImageManager");
      if (DocImageManager == null) {
        DocImageManager = new weaver.docs.docs.DocImageManager();
        pageContext.setAttribute("DocImageManager", DocImageManager);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.hrm.company.SubCompanyComInfo SubCompanyComInfo;
      SubCompanyComInfo = (weaver.hrm.company.SubCompanyComInfo) pageContext.getAttribute("SubCompanyComInfo");
      if (SubCompanyComInfo == null) {
        SubCompanyComInfo = new weaver.hrm.company.SubCompanyComInfo();
        pageContext.setAttribute("SubCompanyComInfo", SubCompanyComInfo);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.meeting.Maint.MeetingRoomComInfo MeetingRoomComInfo;
      MeetingRoomComInfo = (weaver.meeting.Maint.MeetingRoomComInfo) pageContext.getAttribute("MeetingRoomComInfo");
      if (MeetingRoomComInfo == null) {
        MeetingRoomComInfo = new weaver.meeting.Maint.MeetingRoomComInfo();
        pageContext.setAttribute("MeetingRoomComInfo", MeetingRoomComInfo);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.meeting.MeetingViewer MeetingViewer;
      MeetingViewer = (weaver.meeting.MeetingViewer) pageContext.getAttribute("MeetingViewer");
      if (MeetingViewer == null) {
        MeetingViewer = new weaver.meeting.MeetingViewer();
        pageContext.setAttribute("MeetingViewer", MeetingViewer);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.meeting.Maint.MeetingComInfo MeetingComInfo;
      MeetingComInfo = (weaver.meeting.Maint.MeetingComInfo) pageContext.getAttribute("MeetingComInfo");
      if (MeetingComInfo == null) {
        MeetingComInfo = new weaver.meeting.Maint.MeetingComInfo();
        pageContext.setAttribute("MeetingComInfo", MeetingComInfo);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.hrm.resource.ResourceComInfo ResourceComInfo;
      ResourceComInfo = (weaver.hrm.resource.ResourceComInfo) pageContext.getAttribute("ResourceComInfo");
      if (ResourceComInfo == null) {
        ResourceComInfo = new weaver.hrm.resource.ResourceComInfo();
        pageContext.setAttribute("ResourceComInfo", ResourceComInfo);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.system.SysRemindWorkflow SysRemindWorkflow;
      SysRemindWorkflow = (weaver.system.SysRemindWorkflow) pageContext.getAttribute("SysRemindWorkflow");
      if (SysRemindWorkflow == null) {
        SysRemindWorkflow = new weaver.system.SysRemindWorkflow();
        pageContext.setAttribute("SysRemindWorkflow", SysRemindWorkflow);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.mobile.plugin.ecology.service.MeetingService meetingService;
      meetingService = (weaver.mobile.plugin.ecology.service.MeetingService) pageContext.getAttribute("meetingService");
      if (meetingService == null) {
        meetingService = new weaver.mobile.plugin.ecology.service.MeetingService();
        pageContext.setAttribute("meetingService", meetingService);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.meeting.Maint.MeetingTransMethod MeetingTransMethod;
      MeetingTransMethod = (weaver.meeting.Maint.MeetingTransMethod) pageContext.getAttribute("MeetingTransMethod");
      if (MeetingTransMethod == null) {
        MeetingTransMethod = new weaver.meeting.Maint.MeetingTransMethod();
        pageContext.setAttribute("MeetingTransMethod", MeetingTransMethod);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      
	int status = 1;String msg = ""; 
	JSONObject json = new JSONObject();
	request.setCharacterEncoding("UTF-8");
	String operate = Util.null2String(request.getParameter("operate"));
	String currentDate = TimeUtil.getCurrentDateString();
	String currentTime = TimeUtil.getOnlyCurrentTimeString();
	String creater = user.getUID()+"";
	try{
		if(operate.equals("getMeetings")){//\u83b7\u53d6\u53ef\u7528\u4f1a\u8bae\u5ba4\u5217\u8868
			String beginDate = Util.null2String(request.getParameter("beginDate"));
			String endDate = Util.null2String(request.getParameter("endDate"));
			if(!beginDate.equals("")&&!endDate.equals("")
					&&beginDate.length()==16&&endDate.length()==16){
				String sDate = beginDate.substring(0,10);
				String sTime = beginDate.substring(11);
				String eDate = endDate.substring(0,10);
				String eTime = endDate.substring(11);
				JSONArray js = MeetingUtils.getMeetings(sDate, sTime, eDate, eTime, user);
				json.put("js",js);
				json.put("userid", creater);
				json.put("userName", ResourceComInfo.getLastname(creater));
				int roomConflictChk	= 0;//0\u8868\u793a\u4e0d\u63a7\u5236 1\u8868\u793a\u63a7\u5236
				int roomConflict	= 0;//1\u63d0\u793a\u4e0d\u9650\u5236 2\u7981\u6b62\u63d0\u4ea4
				rs.executeSql("select roomConflictChk,roomConflict from MeetingSet") ;
				if(rs.next()){
				 	roomConflictChk	= Util.getIntValue(rs.getString("roomConflictChk"),1);
					roomConflict	= Util.getIntValue(rs.getString("roomConflict"), 1);
				}
				json.put("roomConflictChk",roomConflictChk);
				json.put("roomConflict",roomConflict);
				json.put("ifMeetingAddressMulti", WxModuleInit.ifMeetingAddressMulti?1:0);
				json.put("utf8", WxInterfaceInit.isIsutf8()?1:0);
				status = 0;
			}else{
				msg = "\u65e5\u671f\u683c\u5f0f\u9519\u8bef";
			}
		}else if(operate.equals("getMeetingType")){//\u83b7\u53d6\u4f1a\u8bae\u7c7b\u578b
			if(WxModuleInit.ifMeetingTypeShare){
				 //\u6267\u884c\u4f1a\u8bae\u7c7b\u578b\u5171\u4eab\u521d\u59cb\u5316\u4fe1\u606f\u5f00\u59cb
			    //String sqll = "select id from meeting_type where id not in(select distinct mtid from MeetingType_share)";
			    //ArrayList<String> noshareids = new ArrayList<String>();
			    //rs.executeSql(sqll);
			    //while(rs.next()){
			    //    noshareids.add(rs.getString("id"));
			    //}
			    //if(noshareids.size()>0){
			    //    for(String idd : noshareids){
			    //    	rs.executeSql("insert into MeetingType_share (mtid,permissiontype,seclevel,seclevelMax) values ("+idd+",3,0,100)"   );
			    //    }
			    //}
			    //\u6267\u884c\u4f1a\u8bae\u7c7b\u578b\u5171\u4eab\u521d\u59cb\u5316\u4fe1\u606f\u7ed3\u675f
				//\u662f\u5426\u5206\u6743\u7cfb\u7edf\uff0c\u5982\u4e0d\u662f\uff0c\u5219\u4e0d\u663e\u793a\u6846\u67b6\uff0c\u76f4\u63a5\u8f6c\u5411\u5230\u5217\u8868\u9875\u9762
				int detachable=Util.getIntValue(String.valueOf(session.getAttribute("detachable")),0);
				int subid=user.getUserSubCompany1();
				if(detachable==1){
				    String subcompanys=SubCompanyComInfo.getSubCompanyTreeStr(""+subid);
				    while(subcompanys.endsWith(",")){
				        subcompanys = subcompanys.substring(0,subcompanys.length()-1);
				    }
				    if(subcompanys.length()>0){
				        String unionSql = "select distinct a.id,a.name,a.subcompanyid,a.desc_n,a.approver from Meeting_Type a,MeetingType_share b where a.subcompanyid in("+subcompanys+","+subid+",0) and   a.id = b.mtid and (((b.departmentid="+
				                user.getUserDepartment()+" and b.deptlevel<="+user.getSeclevel()+" and b.deptlevelMax>="+user.getSeclevel()+") or(b.subcompanyid in ("+
				                user.getUserSubCompany1()+","+user.getUserSubCompany2()+","+user.getUserSubCompany3()+","+user.getUserSubCompany4()+") and b.sublevel<="+user.getSeclevel()+" and b.sublevelMax>="+
				                user.getSeclevel()+")or(b.seclevel<="+ user.getSeclevel()+" and b.seclevelMax>="+user.getSeclevel()+")or(b.userid ="+user.getUID()+"))" +
				                " or ( a.subcompanyid not in("+subcompanys+") and   a.id = b.mtid and ((b.departmentid="+
				                user.getUserDepartment()+ "and b.deptlevel<="+user.getSeclevel()+" and b.deptlevelMax>="+user.getSeclevel()+") or(b.subcompanyid in ("+
				                user.getUserSubCompany1()+","+user.getUserSubCompany2()+","+user.getUserSubCompany3()+","+user.getUserSubCompany4()+") and b.sublevel<="+user.getSeclevel()+
				                " and b.sublevelMax>="+  user.getSeclevel()+")or(b.seclevel<="+ user.getSeclevel()+ "and b.seclevelMax>="+user.getSeclevel()+")or(b.userid ="+user.getUID()+"))) )"+
				                " order by a.id";
				        rs.executeSql(unionSql);
				    }else{
				        String unionSql = "select distinct a.id,a.name,a.subcompanyid,a.desc_n,a.approver from Meeting_Type a,MeetingType_share b where a.subcompanyid in("+subid+",0) and   a.id = b.mtid and (((b.departmentid="+
				                user.getUserDepartment()+" and b.deptlevel<="+user.getSeclevel()+" and b.deptlevelMax>="+user.getSeclevel()+") or(b.subcompanyid in ("+
				                user.getUserSubCompany1()+","+user.getUserSubCompany2()+","+user.getUserSubCompany3()+","+user.getUserSubCompany4()+") and b.sublevel<="+user.getSeclevel()+" and b.sublevelMax>="+
				                user.getSeclevel()+")or(b.seclevel<="+ user.getSeclevel()+" and b.seclevelMax>="+user.getSeclevel()+")or(b.userid ="+user.getUID()+"))" +
				                " or ( a.subcompanyid <>"+user.getUserSubCompany1()+" and   a.id = b.mtid and ((b.departmentid="+
				                user.getUserDepartment()+ "and b.deptlevel<="+user.getSeclevel()+" and b.deptlevelMax>="+user.getSeclevel()+") or(b.subcompanyid in ("+
				                user.getUserSubCompany1()+","+user.getUserSubCompany2()+","+user.getUserSubCompany3()+","+user.getUserSubCompany4()+") and b.sublevel<="+user.getSeclevel()+
				                " and b.sublevelMax>="+  user.getSeclevel()+")or(b.seclevel<="+ user.getSeclevel()+ "and b.seclevelMax>="+user.getSeclevel()+")or(b.userid ="+user.getUID()+"))) )"+
				                " order by a.id";
				        rs.executeSql(unionSql);
				    }
				}else{
				    String sql =  "select distinct a.id,a.name,a.subcompanyid,a.desc_n,a.approver from Meeting_Type a,MeetingType_share b where  a.id = b.mtid and ((b.departmentid="+
				            user.getUserDepartment()+" and b.deptlevel<="+user.getSeclevel()+" and b.deptlevelMax>="+user.getSeclevel()+") or(b.subcompanyid in ("+
				            user.getUserSubCompany1()+","+user.getUserSubCompany2()+","+user.getUserSubCompany3()+","+user.getUserSubCompany4()+") and b.sublevel<="+user.getSeclevel()+" and b.sublevelMax>="+
				            user.getSeclevel()+")or(b.seclevel<="+user.getSeclevel()+"  and b.seclevelMax>="+user.getSeclevel()+")or(b.userid ="+user.getUID()+")) order by a.id";
				    rs.executeSql(sql);
				}
			}else{
				rs.executeSql("select distinct a.id,a.name from Meeting_Type a order by a.id");
			}
			JSONArray js = new JSONArray();
			while(rs.next()){
				String id = Util.null2String(rs.getString("id"));
			    String name = Util.null2String(rs.getString("name"));
			    JSONObject j = new JSONObject();
			    j.put("id",id);
			    j.put("name",name);
			    js.add(j);
			}
			json.put("js",js);
			//zhw20170803 \u589e\u52a0\u83b7\u53d6\u4f1a\u8bae\u670d\u52a1\u6570\u636e
			String serviceid = Util.null2String(Prop.getPropValue("QC277738","serviceid"));//\u5ba2\u6237\u5b9a\u5236\u4e8c\u6b21\u5f00\u53d1\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u4f1a\u8bae\u670d\u52a1\u9879\u76ee
			JSONArray sItems = new JSONArray();//\u4f1a\u8bae\u670d\u52a1\u5217\u8868
			JSONObject item = new JSONObject();//\u9ed8\u8ba4\u9700\u8981\u663e\u793a\u7684\u4f1a\u8bae\u670d\u52a1
			rs.executeSql("select * from Meeting_Service_Item a order by a.id");
			int i = 0;
			while(rs.next()){
				String id = Util.null2String(rs.getString("id"));
			    String itemname = Util.null2String(rs.getString("itemname"));
			    String hrmids = Util.null2String(rs.getString("hrmids"));
			    if(hrmids.equals("")){
			    	hrmids = user.getUID()+"";
			    }
			    JSONObject j = new JSONObject();
			    j.put("id",id);
			    j.put("itemname",itemname);
			    j.put("hrmids",hrmids);
			    j.put("hrmNames",getHrmNames(hrmids));
			    sItems.add(j);
			    if((serviceid.equals("")&&i==0)||id.equals(serviceid)){//\u6ca1\u6709\u8bbe\u7f6e\u9ed8\u8ba4\u5c55\u793a\u7684\u4f1a\u8bae\u670d\u52a1\u7684\u8bdd,\u53d6\u7b2c\u4e00\u4e2a
			    	item = j;
			    }
			    i++;
			}
			json.put("sItems",sItems);
			json.put("item",item);
			//zhw 20170810\u589e\u52a0\u83b7\u53d6\u662f\u5426\u9650\u5236\u4f1a\u8bae\u521b\u5efa\u65f6\u95f4
			int maxDay = Util.getIntValue(Prop.getPropValue("QC303688_meeting","maxday"),0);//\u5ba2\u6237\u5b9a\u5236\u4e8c\u6b21\u5f00\u53d1\u9650\u5236\u4f1a\u8bae\u521b\u5efa\u65f6\u95f4
			json.put("maxDay",maxDay);
			status = 0;
		}else if(operate.equals("saveMeeting")){//\u4fdd\u5b58\u4f1a\u8bae
			String address = Util.null2String(request.getParameter("address"));//\u4f1a\u8bae\u5730\u70b9
			String meetingtype = Util.null2String(request.getParameter("meetingtype"));//\u4f1a\u8bae\u7c7b\u578b
			String name = Util.null2String(request.getParameter("name"));//\u4f1a\u8bae\u540d\u79f0
			String hrmids02 = Util.null2String(request.getParameter("hrmids02"));//\u53c2\u4e0e\u4eba
			String contacter = Util.null2String(request.getParameter("contacter"));//\u8054\u7cfb\u4eba
			String sDate = Util.null2String(request.getParameter("beginDate"));//\u4f1a\u8bae\u5f00\u59cb\u65f6\u95f4
			String eDate = Util.null2String(request.getParameter("endDate"));//\u4f1a\u8bae\u7ed3\u675f\u65f6\u95f4
			String desc = Util.null2String(request.getParameter("desc"));//\u4f1a\u8bae\u5185\u5bb9
			if(!"".equals(address)&&!"".equals(meetingtype)&&!"".equals(name)
					&&!"".equals(hrmids02)&&!"".equals(sDate)&&!"".equals(eDate)){
				if(sDate.length()==16&&eDate.length()==16){
					String beginDate = sDate.substring(0,10);//\u4f1a\u8bae\u5f00\u59cb\u65e5\u671f
					String beginTime = sDate.substring(11);//\u4f1a\u8bae\u5f00\u59cb\u65f6\u95f4
					String endDate = eDate.substring(0,10);//\u4f1a\u8bae\u7ed3\u675f\u65e5\u671f
					String endTime = eDate.substring(11);//\u4f1a\u8bae\u7ed3\u675f\u65f6\u95f4
					String caller = user.getUID()+"";//\u53ec\u96c6\u4eba
					//\u9879\u76eeID,\u5907\u6ce8,\u5176\u4ed6\u53c2\u4f1a\u4eba\u5458,\u81ea\u5b9a\u4e49\u4f1a\u8bae\u5730\u70b9
					String projectid="",othermembers="",customizeAddress="";
					String addressdesc = "",description = "";
					String totalmember = "0";
					int remindType = 1;//\u63d0\u9192\u65b9\u5f0f
					int remindBeforeStart =0;  //\u662f\u5426\u5f00\u59cb\u524d\u63d0\u9192
					int remindBeforeEnd = 0;  //\u662f\u5426\u7ed3\u675f\u524d\u63d0\u9192
				    int remindTimesBeforeStart = 0;//\u5f00\u59cb\u524d\u63d0\u9192\u65f6\u95f4
				    int remindTimesBeforeEnd = 0;//\u7ed3\u675f\u524d\u63d0\u9192\u65f6\u95f4
				    
				    boolean canSave = false;
				    int roomConflictChk	= 0;//0\u8868\u793a\u4e0d\u63a7\u5236 1\u8868\u793a\u63a7\u5236
					int roomConflict	= 0;//1\u63d0\u793a\u4e0d\u9650\u5236 2\u7981\u6b62\u63d0\u4ea4
					rs.executeSql("select roomConflictChk,roomConflict from MeetingSet") ;
					if(rs.next()){
					 	roomConflictChk	= Util.getIntValue(rs.getString("roomConflictChk"),1);
						roomConflict	= Util.getIntValue(rs.getString("roomConflict"), 1);
					}
					if(roomConflictChk==1&&roomConflict==2){//\u4f1a\u8bae\u5ba4\u51b2\u7a81\u7981\u6b62\u63d0\u4ea4
						if(WxModuleInit.ifMeetingAddressMulti){
							String[] addresses = address.split(",");
							for(String a:addresses){
								if(!"".equals(a)){
									canSave = false;
									Meeting m = MeetingUtils.getMeetingsById(Util.getIntValue(a,0), name, 
											beginDate, beginTime, endDate, endTime);
									if(null!=m&&m.getIfConflict()==1){//\u5b58\u5728\u51b2\u7a81\u7684\u4f1a\u8bae\u5ba4
										break;
									}
									canSave = true;
								}
							}
						}else{
							Meeting m = MeetingUtils.getMeetingsById(Util.getIntValue(address,0), name, 
									beginDate, beginTime, endDate, endTime);
							if(null==m||m.getIfConflict()==0){
								canSave = true;
							}
						}
					}else{
						canSave = true;
					}
					if(canSave){
						char flag = 2;
					    String ProcPara = "";
					    String Sql="";
					    String CurrentUser = ""+user.getUID();
					    if(contacter.equals("")){
					    	contacter = creater;
					    }
					    description = "\u60a8\u6709\u4f1a\u8bae: "+name+"   \u4f1a\u8bae\u65f6\u95f4:"+sDate+" \u4f1a\u8bae\u5730\u70b9:"
					    	+MeetingRoomComInfo.getMeetingRoomInfoname(""+address)+customizeAddress;
					    ProcPara =  meetingtype;
						ProcPara += flag + name;
						ProcPara += flag + caller;
						ProcPara += flag + contacter;
						ProcPara += flag + projectid; //\u52a0\u5165\u9879\u76eeid
						ProcPara += flag + address;
						ProcPara += flag + beginDate;
						ProcPara += flag + beginTime;
						ProcPara += flag + endDate;
						ProcPara += flag + endTime;
						ProcPara += flag + desc;
						ProcPara += flag + CurrentUser;
						ProcPara += flag + currentDate;
						ProcPara += flag + currentTime;
					    ProcPara += flag + totalmember;
					    ProcPara += flag + othermembers;
					    ProcPara += flag + addressdesc;
					    ProcPara += flag + description;
					    ProcPara += flag + ""+remindType;
					    ProcPara += flag + ""+remindBeforeStart;
					    ProcPara += flag + ""+remindBeforeEnd;
					    ProcPara += flag + ""+remindTimesBeforeStart;
					    ProcPara += flag + ""+remindTimesBeforeEnd;
					    ProcPara += flag + customizeAddress;
					    if (rs.getDBType().equals("oracle")){
							rs.executeProc("Meeting_Insert",ProcPara);
							rs.executeProc("Meeting_SelectMaxID","");
						}else{
							rs.executeProc("Meeting_Insert",ProcPara);
						}
						rs.next();
						String MaxID = rs.getString(1);
						
						int roomType = 1;
						int repeatType = Util.getIntValue(request.getParameter("repeatType"),0);//\u662f\u5426\u662f\u91cd\u590d\u4f1a\u8bae,0 \u6b63\u5e38\u4f1a\u8bae.
						//\u91cd\u590d\u7b56\u7565\u5b57\u6bb5
						int repeatdays = Util.getIntValue(request.getParameter("repeatdays"),0);
						int repeatweeks = Util.getIntValue(request.getParameter("repeatweeks"),0);
						String rptWeekDays=Util.null2String(request.getParameter("rptWeekDays"));
						int repeatmonths = Util.getIntValue(request.getParameter("repeatmonths"),0);
						int repeatmonthdays = Util.getIntValue(request.getParameter("repeatmonthdays"),0);
						int repeatStrategy = Util.getIntValue(request.getParameter("repeatStrategy"),0);
						String remindTypeNew=Util.null2String(request.getParameter("remindTypeNew"));//\u65b0\u7684\u63d0\u793a\u65b9\u5f0f
						int remindImmediately = Util.getIntValue(request.getParameter("remindImmediately"),0);  //\u662f\u5426\u7acb\u5373\u63d0\u9192 
						int remindHoursBeforeStart = Util.getIntValue(request.getParameter("remindHoursBeforeStart"),0);//\u5f00\u59cb\u524d\u63d0\u9192\u5c0f\u65f6
						int remindHoursBeforeEnd = Util.getIntValue(request.getParameter("remindHoursBeforeEnd"),0);//\u7ed3\u675f\u524d\u63d0\u9192\u5c0f\u65f6
						String hrmmembers=Util.null2String(request.getParameter("hrmids02"));//\u53c2\u4f1a\u4eba\u5458
						String crmmembers=Util.null2String(request.getParameter("crmmembers"));//\u53c2\u4f1a\u5ba2\u6237
						int crmtotalmember=Util.getIntValue(request.getParameter("crmtotalmember"),0);//\u53c2\u4f1a\u4eba\u6570
						String accessorys=Util.null2String(request.getParameter("accessorys"));//\u7cfb\u7edf\u9644\u4ef6
						
						
						if(WxModuleInit.ifMeetingRepeat){
							String updateSql = "update Meeting set repeatType = " + repeatType 
									+" , repeatdays = "+ repeatdays 
									+" , repeatweeks = "+ repeatweeks 
									+" , rptWeekDays = '"+ rptWeekDays +"' "
									+" , repeatbegindate = '"+ beginDate +"' "
									+" , repeatenddate = '"+ endDate +"' "
									+" , repeatmonths = "+ repeatmonths 
									+" , repeatmonthdays = "+ repeatmonthdays
									+" , repeatStrategy = "+ repeatStrategy
									+" , roomType = "+ roomType
									+" , remindTypeNew = '"+ remindTypeNew+"' "
									+" , remindImmediately = "+ remindImmediately
									+" , remindHoursBeforeStart = "+ remindHoursBeforeStart
									+" , remindHoursBeforeEnd = "+ remindHoursBeforeEnd
									+" , hrmmembers = '"+ hrmmembers+"' "
									+" , crmmembers = '"+ crmmembers+"' "
									+" , crmtotalmember = "+ crmtotalmember
									+" , accessorys = '"+ accessorys+"' "
									+" where id = " + MaxID;
							rs.executeSql(updateSql);
						}
						String[] hrmids01=request.getParameterValues("hrmids01");
						ArrayList arrayhrmids02 = Util.TokenizerString(hrmids02,",");
						if(hrmids01!=null){
							for(int i=0;i<hrmids01.length;i++){
								if(arrayhrmids02.indexOf(hrmids01[i]) == -1) arrayhrmids02.add(hrmids01[i]);
							}
						}
						for(int i=0;i<arrayhrmids02.size();i++){
							ProcPara =  MaxID;
							ProcPara += flag + "1";
							ProcPara += flag + "" + arrayhrmids02.get(i);
							ProcPara += flag + "" + arrayhrmids02.get(i);
							rs.executeProc("Meeting_Member2_Insert",ProcPara);
							//\u6807\u8bc6\u4f1a\u8bae\u662f\u5426\u67e5\u770b\u8fc7
							StringBuffer stringBuffer = new StringBuffer();
							stringBuffer.append("INSERT INTO Meeting_View_Status(meetingId, userId, userType, status) VALUES(");
							stringBuffer.append(MaxID);
							stringBuffer.append(", ");
							stringBuffer.append(arrayhrmids02.get(i));
							stringBuffer.append(", '");
							stringBuffer.append("1");
							stringBuffer.append("', '");
							if(CurrentUser.equals(arrayhrmids02.get(i))){
							//\u5f53\u524d\u64cd\u4f5c\u7528\u6237\u8868\u793a\u5df2\u770b
							    stringBuffer.append("1");
							}else{
							    stringBuffer.append("0");
							}
							stringBuffer.append("')");
							rs.executeSql(stringBuffer.toString());
						}
						MeetingViewer.setMeetingShareById(""+MaxID);
						MeetingComInfo.removeMeetingInfoCache();
						
						//\u89e6\u53d1\u6d41\u7a0b\u63d0\u9192
						String approvewfid = "",formid="";
						int ifForward = 0;
				       
				        if(!meetingtype.equals("")){
				        	if(repeatType>0){//\u5468\u671f\u4f1a\u8bae,\u67e5\u770b\u5468\u671f\u4f1a\u8bae\u5ba1\u6279\u6d41\u7a0b
				        		rs.executeSql("Select approver1,formid From Meeting_Type t1 join workflow_base t2 on t1.approver1=t2.id  where t1.approver1>0 and t1.ID ="+meetingtype);
				        	}else{
				        		rs.executeSql("Select approver,formid From Meeting_Type t1 join workflow_base t2 on t1.approver=t2.id  where t1.approver>0 and t1.ID ="+meetingtype);
				        	}
				            rs.next();
				            approvewfid = rs.getString(1);
				            formid=rs.getString(2);
				        }
				        if(!approvewfid.equals("0")&&!approvewfid.equals("")){
				        	String oldapprovewfid = approvewfid;
				        	try{//\u589e\u52a0\u6d41\u7a0b\u7248\u672c\u63a7\u5236
				        		Class WorkflowVersion = Class.forName("weaver.workflow.workflow.WorkflowVersion");
				        		Method m = WorkflowVersion.getDeclaredMethod("getActiveVersionWFID",String.class);
				        		approvewfid = (String)m.invoke(WorkflowVersion, approvewfid);
				        		//System.out.println("approvewfid========="+approvewfid);
				        	}catch(Exception e){
				        		//e.printStackTrace();
				        		approvewfid = oldapprovewfid;
				        	}
				        	if("85".equals(formid)){//\u539f\u7cfb\u7edf\u8868\u5355
				        		ifForward = 1;
			            	}else{//\u65b0\u8868\u5355,\u901a\u8fc7Action\u7edf\u4e00\u5904\u7406
			            		String ClientIP = request.getRemoteAddr();
			            		try{
				            		Class MeetingCreateWFUtil = Class.forName("weaver.meeting.defined.MeetingCreateWFUtil");
				        			Method m = MeetingCreateWFUtil.getDeclaredMethod("createWF",String.class,User.class,String.class,String.class);
				        			m.invoke(MeetingCreateWFUtil, MaxID,user,approvewfid,ClientIP);
			            		}catch(Exception e){
			            			
			            		}
			            	}
				        }else{
				            rs.executeSql("Update Meeting Set meetingstatus = 2 WHERE id="+MaxID);//\u66f4\u65b0\u4f1a\u8bae\u72b6\u6001\u4e3a\u6b63\u5e38
				            description = "\u60a8\u6709\u4f1a\u8bae: "+name+"   \u4f1a\u8bae\u65f6\u95f4:"+beginDate
				            	+" \u4f1a\u8bae\u5730\u70b9:"+MeetingRoomComInfo.getMeetingRoomInfoname(""+address)
				            	+customizeAddress;
				            addPlan(name,
				                    MaxID,
				                    beginDate,
				                    beginTime,
				                    endDate,
				                    endTime,
				                    caller,
				                    currentDate,
				                    currentTime,
				                    ""+remindType,
				                    ""+remindBeforeStart,
				                    ""+remindBeforeEnd,
				                    remindTimesBeforeStart,
				                    remindTimesBeforeEnd,
				                    description,
				                    request.getRemoteAddr()
							 );
				            //zhw 20161227 \u589e\u52a0\u5224\u65ad\u662f\u5426\u9700\u8981\u53d1\u9001\u63d0\u9192\u5de5\u4f5c\u6d41
				            int createMeetingRemindChk = 1;
				            if(WxModuleInit.ifMeetingRemind){//\u5f53\u524d\u7cfb\u7edf\u652f\u6301\u8bbe\u7f6e
				            	rs.executeSql("select createMeetingRemindChk from MeetingSet");
				            	if(rs.next()){
				            		createMeetingRemindChk = Util.getIntValue(rs.getString("createMeetingRemindChk"),1);
				            	}
				            }
				            if(createMeetingRemindChk==1){
				            	//\u89e6\u53d1\u63d0\u9192\u5de5\u4f5c\u6d41  Added by Charoes Huang\uff0cJuly 23,2004
								String SWFTitle="";
								String SWFRemark="";
								String SWFSubmiter="";
								String SWFAccepter="";
								String sql="";
								//\u4f1a\u8bae\u901a\u77e5
								rs.executeProc("Meeting_Member2_SelectByType",MaxID+flag+"1");
								while(rs.next()){
									SWFAccepter+=","+rs.getString("memberid");
								}
								if(!SWFAccepter.equals("")){
									SWFAccepter=SWFAccepter.substring(1);
									SWFTitle=Util.toScreen("\u4f1a\u8bae\u901a\u77e5:",user.getLanguage(),"0"); //\u6587\u5b57
									SWFTitle += name;
									SWFTitle += "-"+ResourceComInfo.getResourcename(contacter);
									SWFTitle += "-"+currentDate;
									SWFRemark="";
									SWFSubmiter=contacter;
									SysRemindWorkflow.setMeetingSysRemind(SWFTitle,Util.getIntValue(MaxID),Util.getIntValue(SWFSubmiter),SWFAccepter,SWFRemark);
								}
								//\u4f1a\u8bae\u670d\u52a1
								SWFAccepter="";
								sql="select distinct hrmid from Meeting_Service2 where meetingid="+MaxID;
								rs.executeSql(sql);
								while(rs.next()){
									SWFAccepter+=","+rs.getString(1);
								}
								if(!SWFAccepter.equals("")){
									SWFAccepter=SWFAccepter.substring(1);
									SWFTitle=Util.toScreen("\u4f1a\u8bae\u670d\u52a1:",user.getLanguage(),"0"); //\u6587\u5b57
									SWFTitle += name;
									SWFTitle += "-"+ResourceComInfo.getResourcename(contacter);
									SWFTitle += "-"+currentDate;
									SWFRemark="";
									SWFSubmiter=contacter;
									SysRemindWorkflow.setMeetingSysRemind(SWFTitle,Util.getIntValue(MaxID),Util.getIntValue(SWFSubmiter),SWFAccepter,SWFRemark);
								}
				            }
				        }
				        //zhw 20170804 \u589e\u52a0\u4fdd\u5b58\u4f1a\u8bae\u670d\u52a1\u6570\u636e
				        try{
					        String serviceItem = Util.null2String(request.getParameter("serviceItem"));//\u4f1a\u8bae\u670d\u52a1\u5217\u8868
					        String serviceUser = Util.null2String(request.getParameter("serviceUser"));//\u4f1a\u8bae\u670d\u52a1\u8d23\u4efb\u4eba\u5217\u8868
					        String[] serviceItems = serviceItem.split(",");
					        String[] serviceUsers = serviceUser.split("\\|");
					        for(int i=0;i<serviceItems.length;i++){
					        	String item = serviceItems[i];
					        	String itemusers = serviceUsers[i];
					        	rs.executeSql("insert into Meeting_Service_New(meetingid,items,hrmids) values ('"+MaxID+"','"+item+"','"+itemusers+"')");
					        }
				        }catch(Exception e){
				        	
				        }
				        json.put("meetingId", MaxID);
				        json.put("approvewfid", approvewfid);
				        json.put("ifForward", ifForward);
				        status = 0;
					}else{
						msg = "\u4f1a\u8bae\u5ba4\u5b58\u5728\u51b2\u7a81,\u8bf7\u91cd\u65b0\u9009\u62e9";
					}
				}else{
					msg = "\u5f00\u59cb\u65e5\u671f\u6216\u8005\u7ed3\u675f\u65e5\u671f\u683c\u5f0f\u9519\u8bef";
				}
			}else{
				msg = "\u53c2\u6570\u6821\u9a8c\u5931\u8d25";
			}
		}else if(operate.equals("saveMeetingFlow")){
			String meetingId = Util.null2String(request.getParameter("meetingId"));//\u4f1a\u8bae\u7c7b\u578b
			String approvewfid = Util.null2String(request.getParameter("approvewfid"));//\u4f1a\u8bae\u7c7b\u578b
			//response.sendRedirect("/workflow/request/BillMeetingOperation.jsp?src=submit&iscreate=1&MeetingID="+meetingId+"&approvewfid="+approvewfid+"&viewmeeting=1");
			request.getRequestDispatcher("/workflow/request/BillMeetingOperation.jsp?src=submit&iscreate=1&MeetingID="+meetingId+"&approvewfid="+approvewfid+"&viewmeeting=1").forward(request, response);
			return;
		}else if(operate.equals("getMeetingSummary")){ //\u83b7\u53d6\u65f6\u95f4\u6bb5\u5185\u6bcf\u65e5\u4f1a\u8bae\u6570
			String userid = user.getUID()+"";
			String start = Util.null2String(request.getParameter("start"));
			String end = Util.null2String(request.getParameter("end"));
    		//String membercondition = " exists ( select 1 from Meeting_Member2 where meetingId = meeting.id and (memberId = '"+user.getUID()+"' or othermember = '"+user.getUID()+"' or caller = "+user.getUID() + " or contacter = '" + user.getUID() + "')) ";
			//String rightcondition = " exists (select 1 from Meeting_ShareDetail where meetingId = meeting.id and ((userId = "+user.getUID()+" AND shareLevel in (1,4)) OR (meetingStatus = 2 AND (userId="+user.getUID()+")))) ";
			/* String sql = " select *  from Meeting meeting where (meeting.meetingstatus = 2 or (meeting.meetingstatus in (0,1) and meeting.creater='"+user.getUID()+"')) and meeting.isdecision<>2 "
					+" AND ((beginDate>='"+start+"' AND beginDate <='"+end+"')"
					+" OR (endDate>='"+start+"' AND endDate <='"+end+"')"	
					+" OR (endDate>='"+end+"' AND beginDate <='"+start+"')"
					+" OR ((endDate IS null OR endDate = '') AND beginDate <='"+start+"')"
					+") AND "
					+ "(" + membercondition + " or " + rightcondition + ")" ; */
			
			
			String sql = " select t1.* from Meeting t1"
					+" where exists(select 1 from Meeting_ShareDetail t2"
					+" where ( (t1.id = t2.meetingId) AND "
					//\u5f85\u5ba1\u6279\uff0c\u5ba1\u6279\u9000\u56de\u7684\u4f1a\u8bae\uff0c\u53ec\u96c6\u4eba \u8054\u7cfb\u4eba \u521b\u5efa\u4eba  \u5ba1\u6279\u4eba\u90fd\u53ef\u4ee5\u770b
				 	+" ((t1.meetingStatus in (1, 3) AND t2.userId in (" + userid + ") AND t2.shareLevel in (1,4))"
					//\u8349\u7a3f\u4e2d\u7684\u521b\u5efa\u4eba\u53ef\u4ee5\u770b\u89c1
					+" OR (t1.meetingStatus = 0 AND (t1.creater in (" + userid + ")) AND (t2.userId in (" + userid + ")) )"
					//\u6b63\u5e38\u548c\u53d6\u6d88\u7684\u4f1a\u8bae\u6240\u6709\u53c2\u4f1a\u4eba\u5458\u90fd\u53ef\u89c1
					+" OR (t1.meetingStatus IN (2, 4) AND (t2.userId in (" + userid + "))))"
					+")"
					+")"
				
					+" AND ((t1.beginDate>='"+start+"' AND t1.beginDate <='"+end+"')"
					+" OR (t1.endDate>='"+start+"' AND t1.endDate <='"+end+"')"	
					+" OR (t1.endDate>='"+end+"' AND t1.beginDate <='"+start+"')"
					+" OR ((t1.endDate IS null OR t1.endDate = '') AND t1.beginDate <='"+start+"')"
					+")";
			if(WxModuleInit.ifMeetingRepeat){
				sql +=" AND t1.repeatType = 0";
			}
			rs.executeSql(sql);
			SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
			Map<String, Integer> summaryMap = new TreeMap<String, Integer>( );
			JSONArray selectedList = new JSONArray(); // \u8fd4\u56de\u7684\u7ed3\u679c
			while(rs.next()){
				String beginDate = Util.null2String(rs.getString("begindate"));
				String endDate = Util.null2String(rs.getString("enddate"));
				if(!("".equals(beginDate) && "".equals(endDate)) && endDate.compareTo(beginDate) > 0){
					String[] beginArr =  beginDate.split("-");
					String[] endArr =  endDate.split("-");
					Calendar cBegin = Calendar.getInstance();
					Calendar cEnd = Calendar.getInstance();
					cBegin.set(Integer.valueOf(beginArr[0]), Integer.valueOf(beginArr[1])-1, Integer.valueOf(beginArr[2]));
					cEnd.set(Integer.valueOf(endArr[0]), Integer.valueOf(endArr[1])-1, Integer.valueOf(endArr[2]));
					long cBeginMS = cBegin.getTimeInMillis();
					long cEndMS = cEnd.getTimeInMillis();
					long diffDays = (cEndMS - cBeginMS) / (24 * 60 * 60 * 1000);
					for(int i=0; i<diffDays;i++){ // \u6dfb\u52a0\u540e\u9762\u51e0\u5929
						cBegin.add(Calendar.DATE, 1);
						boolean hasKey = summaryMap.containsKey(sdf.format(cBegin.getTime()));
						String key = sdf.format(cBegin.getTime());
						if(hasKey){
							summaryMap.put(key, summaryMap.get(key) + 1);
						}else{
							summaryMap.put(key, 1);
						}
					}
				}
				boolean hasKey = summaryMap.containsKey(beginDate);
				if(hasKey){
					summaryMap.put(beginDate, summaryMap.get(beginDate) +1);
				}else{
					summaryMap.put(beginDate, 1);
				} 
			}
			JSONObject dayJSON = null;
			for (String key : summaryMap.keySet()) {
				dayJSON = new JSONObject();
				Integer num = summaryMap.get(key);
				dayJSON.put("time",key);
				dayJSON.put("num",num);
				selectedList.add(dayJSON);
			}
			json.put("selectedList",selectedList);
			status = 0;
		}else if("getMeetingWeek".equals(operate)){//\u83b7\u53d6\u4e00\u5468\u7684\u4f1a\u8bae\u6570\u636e
			try{
				String userid = user.getUID()+"";
				String start = Util.null2String(request.getParameter("start"));
				String end = Util.null2String(request.getParameter("end"));
				//String membercondition = " exists ( select 1 from Meeting_Member2 where meetingId = meeting.id and (memberId = '"+user.getUID()+"' or othermember = '"+user.getUID()+"' or caller = "+user.getUID() + " or contacter = '" + user.getUID() + "')) ";
				//String rightcondition = " exists (select 1 from Meeting_ShareDetail where meetingId = meeting.id and ((userId = "+user.getUID()+" AND shareLevel in (1,4)) OR (meetingStatus = 2 AND (userId="+user.getUID()+")))) ";
				//String sql = " select *  from Meeting meeting where (meeting.meetingstatus = 2 or (meeting.meetingstatus in (0,1) and meeting.creater='"+user.getUID()+"')) and meeting.isdecision<>2 ";
				
				String sql = " select t1.* from Meeting t1"
					+" where exists(select 1 from Meeting_ShareDetail t2"
					+" where ( (t1.id = t2.meetingId) AND "
					//\u5f85\u5ba1\u6279\uff0c\u5ba1\u6279\u9000\u56de\u7684\u4f1a\u8bae\uff0c\u53ec\u96c6\u4eba \u8054\u7cfb\u4eba \u521b\u5efa\u4eba  \u5ba1\u6279\u4eba\u90fd\u53ef\u4ee5\u770b
				 	+" ((t1.meetingStatus in (1, 3) AND t2.userId in (" + userid + ") AND t2.shareLevel in (1,4))"
					//\u8349\u7a3f\u4e2d\u7684\u521b\u5efa\u4eba\u53ef\u4ee5\u770b\u89c1
					+" OR (t1.meetingStatus = 0 AND (t1.creater in (" + userid + ")) AND (t2.userId in (" + userid + ")) )"
					//\u6b63\u5e38\u548c\u53d6\u6d88\u7684\u4f1a\u8bae\u6240\u6709\u53c2\u4f1a\u4eba\u5458\u90fd\u53ef\u89c1
					+" OR (t1.meetingStatus IN (2, 4) AND (t2.userId in (" + userid + "))))"
					+")"
					+")"
				
					+" AND ((t1.beginDate>='"+start+"' AND t1.beginDate <='"+end+"')"
					+" OR (t1.endDate>='"+start+"' AND t1.endDate <='"+end+"')"	
					+" OR (t1.endDate>='"+end+"' AND t1.beginDate <='"+start+"')"
					+" OR ((t1.endDate IS null OR t1.endDate = '') AND t1.beginDate <='"+start+"')"
					+")";
				if(WxModuleInit.ifMeetingRepeat){
					sql +=" AND t1.repeatType = 0";
				}
				sql += " order by begindate,begintime";
					//+ "(" + membercondition + " or " + rightcondition + ")" ;
				rs.executeSql(sql);
				SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
				Map<String, JSONArray> weekMap = new TreeMap<String, JSONArray>();
				JSONArray dataList = new JSONArray(); // \u8fd4\u56de\u7684\u7ed3\u679c
				JSONArray wpList = null; //\u88c5\u6bcf\u5929\u7684\u65e5\u7a0b
				Set<String> midList = null;
				try{
					Class mcu = Class.forName("weaver.meeting.MeetingCusUtil");
					Method m = mcu.getMethod("getMeetingFace", new Class[]{String.class,String.class,String.class}); 		
					midList = (Set<String>)m.invoke(mcu, new Object[]{start,end,userid});
				}catch(Exception e){
					//e.printStackTrace();
				}
				while(rs.next()){
					String beginDate = Util.null2String(rs.getString("begindate"));
					String endDate = Util.null2String(rs.getString("enddate"));
					String endTime = Util.null2String(rs.getString("endtime"));
					String id = Util.null2String(rs.getString("id"));
					String name = Util.null2String(rs.getString("name"));
					String meetingtype = Util.null2String(rs.getString("meetingtype"));	
					String meetingstatus = Util.null2String(rs.getString("meetingstatus"));
					String isdecision = Util.null2String(rs.getString("isdecision"));
					String meetingstatusname = MeetingTransMethod.getMeetingStatus(meetingstatus,user.getLanguage()+"+"+endDate+"+"+endTime+"+"+isdecision);
					if("2".equals(meetingstatus)){
						if("2".equals(isdecision)){
							meetingstatus = "5";
						}else{
							if(TimeUtil.timeInterval(endDate+" "+endTime+":00", TimeUtil.getCurrentTimeString())>0){
								meetingstatus = "5";
							}
						}
					}
					if(!"2".equals(meetingstatus)) name = "("+meetingstatusname+")" + name;
					if(!"".equals(beginDate) && !"".equals(endDate) && endDate.compareTo(beginDate) > 0){
						String[] beginArr = beginDate.split("-");
						String[] endArr = endDate.split("-");
						Calendar cBegin = Calendar.getInstance();
						Calendar cEnd = Calendar.getInstance();
						cBegin.set(Integer.valueOf(beginArr[0]), Integer.valueOf(beginArr[1])-1, Integer.valueOf(beginArr[2]));
						cEnd.set(Integer.valueOf(endArr[0]), Integer.valueOf(endArr[1])-1, Integer.valueOf(endArr[2]));
						long cBeginMS = cBegin.getTimeInMillis();
						long cEndMS = cEnd.getTimeInMillis();
						long diffDays = (cEndMS - cBeginMS) / (24 * 60 * 60 * 1000);
						for(int i=0; i<diffDays;i++){ // \u6dfb\u52a0\u540e\u9762\u51e0\u5929
							cBegin.add(Calendar.DATE, 1);
							String key = sdf.format(cBegin.getTime());
							boolean hasKey = weekMap.containsKey(key);
							if(!hasKey){
								wpList = new JSONArray();
								weekMap.put(key, wpList);
							}
							JSONArray oldWpList = weekMap.get(key);
							JSONObject dayJSON = new JSONObject();
							dayJSON.put("id",id);
							dayJSON.put("name",name);
							dayJSON.put("begindate",beginDate);
							dayJSON.put("enddate",endDate);
							dayJSON.put("meetingtype",meetingtype);
							dayJSON.put("meetingstatus",meetingstatus);
							dayJSON.put("meetingstatusname",meetingstatusname);
							if(midList!=null&&midList.contains(id)){
								dayJSON.put("isattend", "1");
							}
							oldWpList.add(dayJSON);
						}
					}
					boolean hasKey = weekMap.containsKey(beginDate);
					if(!hasKey){
						wpList = new JSONArray();
						weekMap.put(beginDate, wpList);
					}
					JSONArray oldWpList = weekMap.get(beginDate);
					JSONObject dayJSON = new JSONObject();
					dayJSON.put("id",id);
					dayJSON.put("name",name);
					dayJSON.put("begindate",beginDate);
					dayJSON.put("enddate",endDate);
					dayJSON.put("meetingtype",meetingtype);
					dayJSON.put("meetingstatus",meetingstatus);
					dayJSON.put("meetingstatusname",meetingstatusname);
					if(midList!=null&&midList.contains(id)){
						dayJSON.put("isattend", "1");
					}
					oldWpList.add(dayJSON);
				}

				Calendar cFirst = Calendar.getInstance();
				Calendar cLast = Calendar.getInstance();
				String[] firstArr =  start.split("-");
				String[] lastArr =  end.split("-");
				cFirst.set(Integer.valueOf(firstArr[0]), Integer.valueOf(firstArr[1])-1, Integer.valueOf(firstArr[2]));
				cLast.set(Integer.valueOf(lastArr[0]), Integer.valueOf(lastArr[1])-1, Integer.valueOf(lastArr[2]));
				long cFirstMS = cFirst.getTimeInMillis();
				long cLastMS = cLast.getTimeInMillis();
				long diffDays = (cLastMS - cFirstMS) / (24 * 60 * 60 * 1000);
				JSONObject dayJSON = null;
				for(int i=0; i<=diffDays;i++){ // \u6dfb\u52a0\u6bcf\u4e00\u5929\u7684\u6570\u636e
					if(i > 0){
						cFirst.add(Calendar.DATE, 1);
					}
					String key = sdf.format(cFirst.getTime());
					boolean hasKey = weekMap.containsKey(key);
					dayJSON = new JSONObject();
					dayJSON.put("day",key);
					if(hasKey){
						dayJSON.put("wpList", weekMap.get(key));
					}else{
						dayJSON.put("wpList", null);
					}
					dataList.add(dayJSON);
				}
				json.put("data",dataList); 
				status = 0;
			}catch(Exception e){
				msg = "\u83b7\u53d6\u5468\u65e5\u7a0b\u6570\u636e\u51fa\u9519:"+e.getMessage();
			}
		}else if(operate.equals("getDetailById")){ //\u83b7\u53d6\u65f6\u95f4\u6bb5\u5185\u6bcf\u65e5\u4f1a\u8bae\u6570
			String mid = Util.null2String(request.getParameter("mid")); // \u4f1a\u8baeID
			if("".equals(mid)){
				json.put("status",status);
				json.put("msg","\u65e0\u6548\u7684\u4f1a\u8bae");
				out.print(json.toString());
				return;
			}
			rs.executeSql("SELECT t1.*,t2.name as meetingtypename FROM Meeting t1 left join Meeting_Type t2 on t1.meetingtype=t2.id WHERE t1.id = " + mid);
			if(rs.next()){
				String endDate = Util.null2String(rs.getString("enddate"));
				String endTime = Util.null2String(rs.getString("endtime"));
				String id = Util.null2String(rs.getString("id"));
				String name = Util.null2String(rs.getString("name"));
				String meetingtype = Util.null2String(rs.getString("meetingtype"));	
				String meetingtypename = Util.null2String(rs.getString("meetingtypename"));	
				String meetingstatus = Util.null2String(rs.getString("meetingstatus"));
				String isdecision = Util.null2String(rs.getString("isdecision"));
				String customizeAddress = Util.null2String(rs.getString("customizeAddress"));
				
				JSONObject mJSON = new JSONObject();
				ResourceComInfo rci = new ResourceComInfo();
				mJSON.put("id", id);
				mJSON.put("meetingtype", meetingtype);
				mJSON.put("meetingtypename", meetingtypename);
				mJSON.put("name", name);
				mJSON.put("meetingroom", Util.null2String(meetingService.getMeetingRoom(rs.getString("address"))));
				mJSON.put("customizeAddress", customizeAddress);
				mJSON.put("caller", Util.null2String(rs.getString("caller")));
				mJSON.put("callername", Util.null2String(rci.getLastname(rs.getString("caller"))));
				mJSON.put("contacter", Util.null2String(rs.getString("contacter")));
				mJSON.put("contactername", Util.null2String(rci.getLastname(rs.getString("contacter"))));
				//mJSON.put("hrmmembers", Util.null2String(rs.getString("hrmmembers")));
				RecordSet rs2 = new RecordSet();
				rs2.executeSql("select membermanager from Meeting_Member2 where meetingid = "+id+" and membertype = 1 order by id");
				String hrmmembers = "";
				while(rs2.next()){
					String membermanager = Util.null2String(rs2.getString("membermanager"));
					hrmmembers +=","+membermanager;
				}
				if(!hrmmembers.equals("")){
					hrmmembers = hrmmembers.substring(1);
				}
				mJSON.put("hrmmembers",hrmmembers);
				mJSON.put("hrmmembersname", Util.null2String(this.getHrmNames(hrmmembers)));
				mJSON.put("begindate", Util.null2String(rs.getString("begindate")));
				mJSON.put("begintime", Util.null2String(rs.getString("begintime")));
				mJSON.put("enddate", endDate);
				mJSON.put("endtime", endTime);
				mJSON.put("desc_n", FormatMultiLang.formatByUserid(Util.null2String(rs.getString("desc_n")),creater));
				mJSON.put("creater", Util.null2String(rs.getString("creater")));
				mJSON.put("createName", Util.null2String(rci.getLastname(rs.getString("creater"))));
				mJSON.put("createdate", Util.null2String(rs.getString("createdate")));
				mJSON.put("createtime", Util.null2String(rs.getString("createtime")));
				mJSON.put("meetingstatus", meetingstatus);
				String meetingstatusname = MeetingTransMethod.getMeetingStatus(meetingstatus,user.getLanguage()+"+"+endDate+"+"+endTime+"+"+isdecision);
				mJSON.put("meetingstatusname", meetingstatusname);
				//zhw 20160918 \u589e\u52a0\u53d8\u66f4\u4fe1\u606f\u5c55\u793a\uff08\u9996\u65c5\u96c6\u56e2\u4f7f\u7528\uff09
				String bgxx = Util.null2String(rs.getString("bgxx"));
				mJSON.put("bgxx", bgxx);
				//\u589e\u52a0\u83b7\u53d6\u4f1a\u8bae\u76f8\u5173\u9644\u4ef6
				String accessorys = Util.null2String(rs.getString("accessorys"));
				mJSON.put("fj",getFJJsonArray(accessorys,DocImageManager));
				//zhw \u589e\u52a0\u83b7\u53d6\u76f8\u5173\u9644\u4ef6\uff08\u9996\u65c5\u96c6\u56e2\u4f7f\u7528\uff09
				String xgfj = Util.null2String(rs.getString("xgfj"));
				mJSON.put("xgfj",getFJJsonArray(xgfj,DocImageManager));
				//zhw \u589e\u52a0\u76f8\u5173\u4ea4\u6d41\u6570\u636e\u5c55\u793a\uff08\u9996\u65c5\u96c6\u56e2\u4f7f\u7528\uff09
				JSONArray jl_js = new JSONArray();
				
				rs2.executeSql("select * from Exchange_Info where sortid ="+id+" AND type_n='MP' order by createDate desc, createTime desc");
				while(rs2.next()){
					String jl_creater =  rs2.getString("creater");
				  	String createDate = rs2.getString("createDate");
				  	String createTime = rs2.getString("createTime");
					String remark2html = rs2.getString("remark");
					String relateddoc=  Util.null2String(rs2.getString("relateddoc"));
					JSONObject jl = new JSONObject();
					jl.put("name", ResourceComInfo.getResourcename(jl_creater));
					jl.put("userimg", ResourceComInfo.getMessagerUrls(jl_creater));
					jl.put("content", remark2html);
					jl.put("createTime", createDate+" "+createTime);
					jl.put("fj", getFJJsonArray(relateddoc,DocImageManager));
			        jl_js.add(jl);
				}
				mJSON.put("jl",jl_js);
				//\u4f1a\u8bae\u56de\u6267\u6570\u636e\u8fd4\u56de\uff08E8\u6700\u65b0\u7248\u672c\u6807\u51c6\u529f\u80fd\uff09 \u9996\u65c5\u96c6\u56e2\u6570\u636e\u5305\u542b\u5728\u5185
				int isattend = -1;
				String isattendName = "";
				String othermember = "";
				String recRemark = "";
				JSONArray hrmList = new JSONArray();
				try{
					String sql = "select membermanager,isattend,";
					if(WxModuleInit.ifMeetingMember){
						sql += "recRemark,";
					}
					sql += "othermember from Meeting_Member2 where meetingid = "+id+" and membertype = 1 order by id";
					//System.out.println(sql);
					int repeattype = Util.getIntValue(rs.getString("repeattype"),0);
			    	rs2.executeSql(sql);
					while(rs2.next()){
						JSONObject hrmJson = new JSONObject();
						String membermanager = Util.null2String(rs2.getString("membermanager"));
						hrmJson.put("hrmName", this.getHrmNames(membermanager));
						String recRemark2 = "";
						if(WxModuleInit.ifMeetingMember){
							recRemark2 = Util.null2String(rs2.getString("recRemark"));
						}
						hrmJson.put("recRemark", recRemark2);
						String othermember2 = this.getHrmNames( Util.null2String(rs2.getString("othermember")));
						hrmJson.put("othermember", othermember2);
						int isattend2 = Util.getIntValue(rs2.getString("isattend"),0);
						String isattendName2 = "\u672a\u56de\u6267";
						if(isattend2==1){//
							isattendName2 = "\u53c2\u52a0";
						}else if(isattend2==2){
							isattendName2 = "\u4e0d\u53c2\u52a0";
						}else if(isattend2==3){
							isattendName2 = "\u5176\u4ed6\u4eba\u5458\u53c2\u52a0("+othermember2+")";
						}
						hrmJson.put("isattend", isattend2);
						hrmJson.put("attendName", isattendName2);
						
						hrmList.add(hrmJson);
						if(membermanager.equals(user.getUID()+"")){//\u662f\u5f53\u524d\u4eba\u5458
							//\u4f1a\u8bae\u72b6\u6001\u662f\u6b63\u5e38 \u5e76\u4e14\u6ca1\u6709\u8fdb\u884c\u4f1a\u8bae\u51b3\u8bae \u5e76\u4e14\u7ed3\u675f\u65e5\u671f\u6bd4\u5f53\u524d\u65f6\u95f4\u5927
							if("2".equals(meetingstatus)&&!isdecision.equals("1") && !isdecision.equals("2")&&repeattype==0
							&&(endDate.compareTo(currentDate)>0||(endDate.compareTo(currentDate)==0&&endTime.compareTo(currentTime)>0))){
								isattend = isattend2;
							}else{
								isattend = 4;//\u4e0d\u5141\u8bb8\u8fdb\u884c\u56de\u6267\u64cd\u4f5c\u4e86
							}
							isattendName = isattendName2;
							othermember = othermember2;
							recRemark = recRemark2;
						}
					}
				}catch(Exception e){
					//e.printStackTrace();
				}
				mJSON.put("isattend",isattend);
				mJSON.put("isattendName",isattendName);
				mJSON.put("othermember",othermember);
				mJSON.put("recRemark",recRemark);
				
				mJSON.put("hrmList",hrmList);
				
				json.put("mt",mJSON);
				//\u589e\u52a0\u67e5\u770b\u4f1a\u8bae\u8bb0\u5f55
				String sql="update Meeting_View_Status set status = 1 where meetingId ="+id +" and userid="+user.getUID();
				rs2.executeSql(sql);
				status = 0;
			}
		}else if(operate.equals("saveMeetingAttend")){//\u4fdd\u5b58\u4f1a\u8bae\u56de\u6267
			String mid = Util.null2String(request.getParameter("mid")); // \u4f1a\u8baeID
			if(mid.equals("")){
				status = -1;
				msg = "\u6ca1\u6709\u4f1a\u8baeID";
			}else{
				String cuserid = user.getUID()+"";
				int isattend = Util.getIntValue(request.getParameter("isattend"),0);//\u662f\u5426\u53c2\u52a0
				String othermember = "";
				if(isattend==3){
					othermember = Util.null2String(request.getParameter("othermember"));//\u5176\u4ed6\u53c2\u4f1a\u4eba\u5458
				}
				String recRemark = Util.null2String(request.getParameter("recRemark"));//\u4e0d\u53c2\u4f1a\u539f\u56e0
				boolean ifSlCustomer = false;
				try{
					Class mcu = Class.forName("weaver.meeting.MeetingCusUtil");
					Method m = mcu.getMethod("saveReAndRequest", new Class[]{String.class,String.class,Integer.TYPE,String.class,String.class}); 		
			    	m.invoke(mcu, new Object[]{mid,cuserid,isattend,othermember,recRemark});
			    	ifSlCustomer = true;
			    	status = 0;
				}catch(Exception e){
					//e.printStackTrace();
				}
				//ifSlCustomer = false;
				if(!ifSlCustomer){
					//\u66f4\u65b0\u56de\u6267\u60c5\u51b5\u548c\u5176\u4ed6\u53c2\u4f1a\u4eba
					String sql = "update Meeting_Member2 set isattend='"+isattend+"',othermember='"+othermember+"'";
					if(WxModuleInit.ifMeetingMember){
						sql += ",recRemark='"+recRemark+"'";
					}
					sql +=" where meetingid ="+mid+" and membermanager="+user.getUID();
					//System.out.println(sql);
					rs.execute(sql);
					status = 0;
				}
			}
		}
	}catch(Exception e){
		e.printStackTrace();
		msg = e.getMessage();
	}
	json.put("status",status);
	json.put("msg",msg);
	//System.out.println(json.toString());
	out.println(json.toString());

      out.write(_jsp_string2, 0, _jsp_string2.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("mobile/plugin/plus/meeting/data/meetingOperation.jsp"), -1998234578487293818L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("page/maint/common/initNoCache.jsp"), 3270256153856711871L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string1;
  private final static char []_jsp_string0;
  private final static char []_jsp_string2;
  static {
    _jsp_string1 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string2 = "\r\n".toCharArray();
  }
}
