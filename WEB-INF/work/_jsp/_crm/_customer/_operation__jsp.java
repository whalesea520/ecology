/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._crm._customer;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import java.net.URLDecoder;
import weaver.general.*;
import java.io.File;
import java.util.*;
import weaver.hrm.*;
import weaver.systeminfo.*;
import weaver.general.StaticObj;
import weaver.general.Util;
import weaver.hrm.settings.RemindSettings;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

public class _operation__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      weaver.conn.RecordSet rs;
      rs = (weaver.conn.RecordSet) pageContext.getAttribute("rs");
      if (rs == null) {
        rs = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs", rs);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet rs2;
      rs2 = (weaver.conn.RecordSet) pageContext.getAttribute("rs2");
      if (rs2 == null) {
        rs2 = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs2", rs2);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.hrm.outinterface.HrmOutInterface HrmOutInterface;
      HrmOutInterface = (weaver.hrm.outinterface.HrmOutInterface) pageContext.getAttribute("HrmOutInterface");
      if (HrmOutInterface == null) {
        HrmOutInterface = new weaver.hrm.outinterface.HrmOutInterface();
        pageContext.setAttribute("HrmOutInterface", HrmOutInterface);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.crm.Maint.CustomerInfoComInfo CustomerInfoComInfo;
      CustomerInfoComInfo = (weaver.crm.Maint.CustomerInfoComInfo) pageContext.getAttribute("CustomerInfoComInfo");
      if (CustomerInfoComInfo == null) {
        CustomerInfoComInfo = new weaver.crm.Maint.CustomerInfoComInfo();
        pageContext.setAttribute("CustomerInfoComInfo", CustomerInfoComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.crm.CrmShareBase CrmShareBase;
      CrmShareBase = (weaver.crm.CrmShareBase) pageContext.getAttribute("CrmShareBase");
      if (CrmShareBase == null) {
        CrmShareBase = new weaver.crm.CrmShareBase();
        pageContext.setAttribute("CrmShareBase", CrmShareBase);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.crm.data.CustomerModifyLog CustomerModifyLog;
      CustomerModifyLog = (weaver.crm.data.CustomerModifyLog) pageContext.getAttribute("CustomerModifyLog");
      if (CustomerModifyLog == null) {
        CustomerModifyLog = new weaver.crm.data.CustomerModifyLog();
        pageContext.setAttribute("CustomerModifyLog", CustomerModifyLog);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      
	
	response.setHeader("cache-control", "no-cache");
	response.setHeader("pragma", "no-cache");
	response.setHeader("expires", "Mon 1 Jan 1990 00:00:00 GMT");
	

	User user = HrmUserVarify.getUser (request , response) ;
	if(user == null)  return ;
	Log logger= LogFactory.getLog(this.getClass());
	String isIE = (String)session.getAttribute("browser_isie");

      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.crm.customer.CustomerService CustomerService;
      CustomerService = (weaver.crm.customer.CustomerService) pageContext.getAttribute("CustomerService");
      if (CustomerService == null) {
        CustomerService = new weaver.crm.customer.CustomerService();
        pageContext.setAttribute("CustomerService", CustomerService);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.crm.customermap.BaiduMapUtil BaiduMapUtil;
      BaiduMapUtil = (weaver.crm.customermap.BaiduMapUtil) pageContext.getAttribute("BaiduMapUtil");
      if (BaiduMapUtil == null) {
        BaiduMapUtil = new weaver.crm.customermap.BaiduMapUtil();
        pageContext.setAttribute("BaiduMapUtil", BaiduMapUtil);
      }
      out.write(_jsp_string3, 0, _jsp_string3.length);
      
	String userid=""+user.getUID();
	String operation=Util.null2o(request.getParameter("operation"));
	if(operation.equals("markimportant")){//\u6807\u8bb0\u4e3a\u91cd\u8981
		String customerid=Util.null2o(request.getParameter("customerid"));
		String important=Util.null2o(request.getParameter("important"));
		CustomerService.markImportant(customerid,userid,important);
	}else if(operation.equals("markAsImportant")){ //\u6807\u8bb0\u4e3a\u91cd\u8981
		String customerid=Util.null2o(request.getParameter("customerid"));
		String important=Util.null2o(request.getParameter("important"));
		CustomerService.markAsImportant(customerid,userid,important);
	}else if("edit_customer_field".equals(operation)){//\u7f16\u8f91\u5ba2\u6237\u5b57\u6bb5
		
		Map fn = new HashMap();
		fn.put("name","\u540d\u79f0");
		fn.put("city","\u57ce\u5e02");
		fn.put("county","\u533a\u53bf\uff08\u4e8c\u7ea7\u57ce\u5e02\uff09");
		fn.put("district","\u533a\u53bf");
		fn.put("address1","\u5730\u57401");
		fn.put("zipcode","\u90ae\u653f\u7f16\u7801");
		fn.put("phone","\u7535\u8bdd");
		fn.put("fax","\u4f20\u771f");
		fn.put("email","\u90ae\u7bb1");
		fn.put("website","\u7f51\u5740");
		fn.put("type","\u7c7b\u578b");
		fn.put("status","\u72b6\u6001");
		fn.put("rating","\u7ea7\u522b");
		fn.put("description","\u63cf\u8ff0");
		fn.put("size_n","\u89c4\u6a21");
		fn.put("source","\u83b7\u5f97\u9014\u5f84");
		fn.put("sector","\u884c\u4e1a");
		fn.put("manager","\u5ba2\u6237\u7ecf\u7406");
		fn.put("agent","\u4e2d\u4ecb\u673a\u6784");
		fn.put("crmcode","\u5ba2\u6237\u7f16\u53f7");
		fn.put("engname","\u7b80\u79f0\uff08\u82f1\u6587\uff09");
		fn.put("address2","\u5730\u57402");
		fn.put("address3","\u5730\u57403");
		fn.put("country","\u56fd\u5bb6");
		fn.put("province","\u7701");
		fn.put("language","\u8bed\u8a00");
		fn.put("introduction","\u4ecb\u7ecd");
		fn.put("evaluation","\u5ba2\u6237\u4ef7\u503c");
		fn.put("principalIds","\u5ba2\u670d\u8d1f\u8d23\u4eba");
		fn.put("exploiterIds","\u5f00\u62d3\u4eba\u5458");
		fn.put("parentid","\u4e0a\u7ea7\u5355\u4f4d");
		fn.put("documentid","\u6587\u6863");
		fn.put("introductionDocid","\u80cc\u666f\u8d44\u6599");
		fn.put("seclevel","\u5b89\u5168\u7ea7\u522b");
		fn.put("CreditAmount","\u4fe1\u7528\u989d\u5ea6");
		fn.put("CreditTime","\u4fe1\u7528\u671f\u95f4");
		fn.put("bankName","\u5f00\u6237\u94f6\u884c");
		fn.put("accountName","\u5e10\u6237");
		fn.put("accounts","\u94f6\u884c\u5e10\u53f7");
		fn.put("othername","\u6b63\u5f0f\u540d\u79f0");
		
		char flag = 2; 
		String sql="";
		String currentdate = TimeUtil.getCurrentDateString();
		String currenttime = TimeUtil.getOnlyCurrentTimeString();
		
		String ProcPara = "";
		String customerid = Util.fromScreen3(request.getParameter("customerid"),user.getLanguage());
		String fieldname = URLDecoder.decode(Util.fromScreen3(request.getParameter("fieldname"),user.getLanguage()),"utf-8");
		//\u5224\u65ad\u662f\u5426\u6709\u5ba2\u6237\u7f16\u8f91\u6743\u9650
		int sharelevel = CrmShareBase.getRightLevelForCRM(user.getUID()+"",customerid);
		if(sharelevel<2){
			return;
		}
		if(!fieldname.equals("status") && (CustomerInfoComInfo.getCustomerInfostatus(customerid).equals("7") || CustomerInfoComInfo.getCustomerInfostatus(customerid).equals("8") || CustomerInfoComInfo.getCustomerInfostatus(customerid).equals("10"))){
			return;
		}
		
		String oldvalue = Util.convertInput2DB(URLDecoder.decode(request.getParameter("oldvalue"),"utf-8"));
		String newvalue = Util.convertInput2DB(URLDecoder.decode(request.getParameter("newvalue"),"utf-8"));
		String fieldtype = Util.fromScreen3(request.getParameter("fieldtype"),user.getLanguage());
		
		String addvalue = Util.convertInput2DB(URLDecoder.decode(request.getParameter("addvalue"),"utf-8"));
		String delvalue = Util.convertInput2DB(URLDecoder.decode(request.getParameter("delvalue"),"utf-8"));
		
		if(fieldname.equals("manager")){
			try{//\u4fee\u6539\u5ba2\u6237\u5361\u7247\u5ba2\u6237\u7ecf\u7406\u65f6\uff0c\u540c\u6b65\u4fee\u6539 \u5ba2\u6237\u7eac\u5ea6 \u5ba2\u6237\u7ecf\u7406\u90e8\u95e8\u4e0b\u9762\u7684\u4eba\u5458\uff0c\u66f4\u65b0\u77e9\u9635\u4e0b\u9762\u7684\u4eba\u5458
				HrmOutInterface.changeCustomManager(customerid,newvalue);
			}catch(Exception e){
				rs.writeLog(e);
			}
			rs.executeSql("update CRM_CustomerInfo set manager="+newvalue+" where id="+customerid);
			//\u901a\u77e5\u53d8\u66f4\u524d\u540e\u7684\u5ba2\u6237\u7ecf\u7406
			String operators = newvalue;
			/**
			String SWFAccepter=operators;
			String SWFTitle=SystemEnv.getHtmlLabelName(15159,user.getLanguage());
			SWFTitle += CustomerInfoComInfo.getCustomerInfoname(customerid);
			SWFTitle += "-"+user.getUsername();
			SWFTitle += "-"+TimeUtil.getCurrentDateString();
			String SWFRemark="";
			String SWFSubmiter = user.getUID()+"";
			SysRemindWorkflow.setCRMSysRemind(SWFTitle,Util.getIntValue(customerid),Util.getIntValue(SWFSubmiter),SWFAccepter,SWFRemark);
			*/
			rs.executeSql("delete from CRM_shareinfo where contents="+operators+" and sharetype=1 and relateditemid="+customerid);
			
			//\u4fee\u6539\u5ba2\u6237\u7ecf\u7406\u91cd\u7f6e\u5ba2\u6237\u5171\u4eab
			CrmShareBase.setCRM_WPShare_newCRMManager(customerid);
			//\u6dfb\u52a0\u65b0\u5ba2\u6237\u6807\u8bb0
			CustomerModifyLog.modify(customerid,oldvalue,newvalue);
			
		}if(fieldname.equals("exploiterIds")){//\u5f00\u62d3\u4eba\u5458
			if(!addvalue.equals("")){//\u6dfb\u52a0\u4eba\u5458
				List idList = Util.TokenizerString(addvalue, ",");
				for(int i=0;i<idList.size();i++){
					if(!"".equals(idList.get(i))){
						rs.executeSql("insert into CRM_CustomerExploiter (customerId,exploiterId) values ("+customerid+","+idList.get(i)+")");
					}
				}
			}
			if(!delvalue.equals("")){//\u5220\u9664\u4eba\u5458
				rs.executeSql("delete from CRM_CustomerExploiter where exploiterId in (" + delvalue + ") and customerid="+customerid);
			}
		}if(fieldname.equals("principalIds")){//\u5ba2\u670d\u8d1f\u8d23\u4eba
			if(!addvalue.equals("")){//\u6dfb\u52a0\u4eba\u5458
				List idList = Util.TokenizerString(addvalue, ",");
				for(int i=0;i<idList.size();i++){
					if(!"".equals(idList.get(i))){
						rs.executeSql("insert into CS_CustomerPrincipal (customerId,principalId) values ("+customerid+","+idList.get(i)+")");
					}
				}
			}
			if(!delvalue.equals("")){//\u5220\u9664\u4eba\u5458
				rs.executeSql("delete from CS_CustomerPrincipal where principalId in (" + delvalue + ") and customerid="+customerid);
			}
		}if(fieldname.equals("othername")){//\u6b63\u5f0f\u540d\u79f0
			rs.executeSql("update CRM_OtherName set customername='"+newvalue+"' where customerid="+customerid);
		}else{
			
			
			if(fieldtype.equals("attachment")){
				rs.execute("select "+fieldname+" from CRM_CustomerInfo where id = "+customerid);
				rs.next();
				String att = rs.getString(1);
				if(att.equals(delvalue)){
					att = "";
				}else{
					att = (","+att+",").replace((","+delvalue+","), "");
					att = att.indexOf(",")==0?att.substring(1):att;
					att = att.lastIndexOf(",")==att.length()-1?att.substring(0,att.length()-1):att;
				}
				rs.execute("update CRM_CustomerInfo set "+fieldname+" = '"+att +"' where id = "+customerid);
				rs.execute("select filerealpath from ImageFile where imagefileid = "+delvalue);
				while(rs.next()){
					File file = new File(rs.getString("filerealpath"));
					if(file.exists()) file.delete();
				}
				rs.execute("delete from ImageFile where imagefileid = "+delvalue);
				
			}else if(fieldtype.equals("num")){
				sql = "update CRM_CustomerInfo set "+fieldname+"='"+newvalue+"' where id="+customerid;
			}else if(fieldtype.equals("str")){
				sql = "update CRM_CustomerInfo set "+fieldname+"='"+newvalue+"' where id="+customerid;
			}
			rs.executeSql(sql);
		}
		
		if(fieldname.equals("rating")){
			//\u901a\u77e5\u5ba2\u6237\u7ecf\u7406\u7684\u7ecf\u7406
			/**
			String operators = ResourceComInfo.getManagerID(CustomerInfoComInfo.getCustomerInfomanager(customerid));
			String SWFAccepter=operators;
			String SWFTitle=SystemEnv.getHtmlLabelName(15158,user.getLanguage());
			SWFTitle += CustomerInfoComInfo.getCustomerInfoname(customerid);
			SWFTitle += "-"+user.getUsername();
			SWFTitle += "-"+TimeUtil.getCurrentDateString();
			String SWFRemark="";
			String SWFSubmiter=user.getUID()+"";;
			SysRemindWorkflow.setCRMSysRemind(SWFTitle,Util.getIntValue(customerid),Util.getIntValue(SWFSubmiter),SWFAccepter,SWFRemark);
			*/
		}
		if(fieldname.equals("status")){
			//\u8bbe\u7f6e\u6210\u529f\u5ba2\u6237\u9ed8\u8ba4\u5171\u4eab
			if(newvalue.equals("4") || oldvalue.equals("4") || newvalue.equals("5") || oldvalue.equals("5")
					|| newvalue.equals("6") || oldvalue.equals("6") || newvalue.equals("8") || oldvalue.equals("8")){
				CrmShareBase.resetStatusShare(customerid);
			}
		}
		if(fieldname.equals("type")){
			//\u8c03\u6574\u4e3a\u4eba\u8109\u65f6\u66f4\u65b0\u8054\u7cfb\u4eba\u7684\u521b\u5efa\u65f6\u95f4
			if(newvalue.equals("26")){
				String contacterid = "";
				String creater = "";
				String createdate = "";
				String createtime = "";
				int count = 0;
				rs.executeSql("select id,creater,createdate,createtime from CRM_CustomerContacter where (createdate='' or createdate is null) and customerid="+customerid);
				while(rs.next()){
					count++;
					if(count>20) break;//\u8d85\u8fc720\u4e2a\u8054\u7cfb\u4eba\u5c06\u4e0d\u8fdb\u884c\u5904\u7406
					contacterid = Util.null2String(rs.getString("id"));
					creater = "";createdate = "";createtime = "";
					rs2.executeSql("select t1.submiter,t1.submitdate,t1.submittime from CRM_Log t1,CRM_Modify t2"
							  +" where t1.submitdate=t2.modifydate and t1.submittime=t2.modifytime and t1.customerid=t2.customerid"
							  +" and t1.logtype='nc' and t1.customerid="+customerid+" and t2.type="+contacterid);
					if(rs2.next()){
						creater = Util.null2String(rs2.getString("submiter"));
						createdate = Util.null2String(rs2.getString("submitdate"));
						createtime = Util.null2String(rs2.getString("submittime"));
					}else{
						rs2.executeSql("select t1.submiter,t1.submitdate,t1.submittime from CRM_Log t1 where t1.customerid="+customerid+" and t1.logtype='n'");
						if(rs2.next()){
							creater = Util.null2String(rs2.getString("submiter"));
							createdate = Util.null2String(rs2.getString("submitdate"));
							createtime = Util.null2String(rs2.getString("submittime"));
						}
					}
					if(!createdate.equals("")){
						rs2.executeSql("update CRM_CustomerContacter set creater='"+creater+"',createdate='"+createdate+"',createtime='"+createtime+"' where id="+contacterid);
					}
				}
			}
		}
		
		//\u66f4\u65b0\u4e2d\u4ecb\u7ed3\u6784\u65f6\uff0c\u66f4\u6539\u6743\u9650\u8868 ----- \u5f00\u59cb    20160701 dcm 
		if(fieldname.equals("agent")){
			if("".equals(newvalue)){
				rs.executeSql("delete from CRM_ShareInfo where deleted=0 and sharetype=9 and relateditemid='"+customerid+"'");
			}else{
				rs.executeSql("select * from CRM_ShareInfo where deleted=0 and contents='"+newvalue+"'and sharetype=9 and relateditemid='"+customerid+"'");//\u67e5\u8be2\u662f\u5426\u5728\u6743\u9650\u8868\u4e2d\u5b58\u5728
				if(!rs.next()){
					rs.executeSql("insert into CRM_ShareInfo (relateditemid,sharetype,sharelevel,crmid,contents,deleted) values ('"+customerid+"',9,1,0,'"+newvalue+"',0)");
				}
			}
		}
		
		//\u66f4\u65b0\u4e2d\u4ecb\u7ed3\u6784\u65f6\uff0c\u66f4\u6539\u6743\u9650\u8868 ----- \u7ed3\u675f
		
		//\u91cd\u7f6e\u7f13\u5b58
		CustomerInfoComInfo.updateCustomerInfoCache(customerid);
		
		rs.execute("SELECT groupid FROM CRM_CustomerDefinField WHERE usetable = 'CRM_CustomerInfo' AND fieldname = '"+fieldname+"'");
		rs.next();
		if(rs.getInt("groupid") <= 4 && fn.containsKey(fieldname)){
			//\u8bb0\u5f55\u65e5\u5fd7
			ProcPara = customerid+flag+"1"+flag+"0"+flag+"0";
			ProcPara += flag+(String)fn.get(fieldname)+flag+currentdate+flag+currenttime+flag+oldvalue+flag+newvalue;
			ProcPara += flag+(user.getUID()+"")+flag+(user.getLogintype()+"")+flag+request.getRemoteAddr();
			rs.executeProc("CRM_Modify_Insert",ProcPara);
			ProcPara = customerid;
			ProcPara += flag+"m";
			ProcPara += flag+"";
			ProcPara += flag+"";
			ProcPara += flag+currentdate;
			ProcPara += flag+currenttime;
			ProcPara += flag+(user.getUID()+"");
			ProcPara += flag+(user.getLogintype()+"");
			ProcPara += flag+request.getRemoteAddr();
			rs.executeProc("CRM_Log_Insert",ProcPara);
		}
			try{
		     rs.execute("select id,address1,address2,address3 from CRM_CustomerInfo where id = '"+customerid+"'");
	            String address1 = "";
	            String address2 = "";
	            String address3 = "";
	            String custmid = "";
	            while(rs.next()){
	                address1 = Util.null2String(rs.getString("address1"));
	                address2 = Util.null2String(rs.getString("address2"));
	                address3 = Util.null2String(rs.getString("address3"));
	                custmid = Util.null2String(rs.getString("id"));
	           }
	            String updateCoordinateSql = "UPDATE CRM_CustomerInfo SET ";
	            String adrsParmSql = "";
	            if(!"".equals(address1)){
	               //\u67e5\u8be2\u5750\u6807
	               Map<String,String> map = BaiduMapUtil.getCoordinateByAddress(address1);
	               if(map.size()==2){
	                   String lng = map.get("lng");
	                   String lat = map.get("lat");
	                   
	                   adrsParmSql += ",lng1='"+lng+"'";
	                   adrsParmSql += ",lat1='"+lat+"'";
	               }
	            }
	            if(!"".equals(address2)){
	                //\u67e5\u8be2\u5750\u6807
	                Map<String,String> map = BaiduMapUtil.getCoordinateByAddress(address2);
	                if(map.size()==2){
	                    String lng = map.get("lng");
	                    String lat = map.get("lat");
	                    
	                    adrsParmSql += ",lng2='"+lng+"'";
	                    adrsParmSql += ",lat2='"+lat+"'";
	                }
	            }
	            if(!"".equals(address3)){
	                //\u67e5\u8be2\u5750\u6807
	                Map<String,String> map = BaiduMapUtil.getCoordinateByAddress(address3);
	                if(map.size()==2){
	                    String lng = map.get("lng");
	                    String lat = map.get("lat");
	                    
	                    adrsParmSql += ",lng3='"+lng+"'";
	                    adrsParmSql += ",lat3='"+lat+"'";
	                }
	            }
	            if(!"".equals(adrsParmSql)) rs.execute(updateCoordinateSql + adrsParmSql.substring(1) + " WHERE id="+custmid);
	        }catch(Exception e){}
	}	


    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("CRM/customer/Operation.jsp"), 3535828984771387181L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("page/maint/common/initNoCache.jsp"), 3270256153856711871L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string2;
  private final static char []_jsp_string0;
  private final static char []_jsp_string1;
  private final static char []_jsp_string3;
  static {
    _jsp_string2 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string1 = "\r\n".toCharArray();
    _jsp_string3 = "\r\n\r\n".toCharArray();
  }
}
