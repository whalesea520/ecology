/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._workflow._request;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import weaver.systeminfo.*;
import weaver.hrm.*;

public class _managebillcptfetch2__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      
User user = HrmUserVarify.getUser (request , response) ;
String mandtypes = request.getParameter("mandtypes");
String groupid = request.getParameter("groupid");
String needcheck = request.getParameter("needcheck");
String dsptypes = request.getParameter("dsptypes");
String edittypes = request.getParameter("edittypes");
String newenddate = request.getParameter("newenddate");
String newfromdate = request.getParameter("newfromdate");
String totalamountsum = request.getParameter("totalamountsum");

      out.write(_jsp_string1, 0, _jsp_string1.length);
      out.print((needcheck));
      out.write(_jsp_string2, 0, _jsp_string2.length);
      out.print((needcheck));
      out.write(_jsp_string3, 0, _jsp_string3.length);
      out.print((groupid));
      out.write(_jsp_string4, 0, _jsp_string4.length);
      out.print((needcheck));
      out.write(_jsp_string5, 0, _jsp_string5.length);
      out.print((dsptypes));
      out.write(_jsp_string6, 0, _jsp_string6.length);
      out.print((edittypes));
      out.write(_jsp_string7, 0, _jsp_string7.length);
      out.print((mandtypes));
      out.write(_jsp_string8, 0, _jsp_string8.length);
      out.print((SystemEnv.getHtmlLabelName(15313,user.getLanguage())));
      out.print((SystemEnv.getHtmlLabelName(15508,user.getLanguage())));
      out.print((SystemEnv.getHtmlLabelName(1446,user.getLanguage())));
      out.write(_jsp_string9, 0, _jsp_string9.length);
      out.print((mandtypes));
      out.write(_jsp_string10, 0, _jsp_string10.length);
      out.print((SystemEnv.getHtmlLabelName(22686,user.getLanguage())));
      out.write(_jsp_string11, 0, _jsp_string11.length);
      out.print((newenddate));
      out.write(_jsp_string12, 0, _jsp_string12.length);
      out.print((newfromdate));
      out.write(_jsp_string13, 0, _jsp_string13.length);
      out.print((newenddate));
      out.write(_jsp_string14, 0, _jsp_string14.length);
      out.print((newfromdate));
      out.write(_jsp_string15, 0, _jsp_string15.length);
      out.print((newfromdate));
      out.write(_jsp_string16, 0, _jsp_string16.length);
      out.print((newfromdate));
      out.write(_jsp_string17, 0, _jsp_string17.length);
      out.print((newenddate));
      out.write(_jsp_string18, 0, _jsp_string18.length);
      out.print((newenddate));
      out.write(_jsp_string19, 0, _jsp_string19.length);
      out.print((newenddate));
      out.write(_jsp_string20, 0, _jsp_string20.length);
      out.print((SystemEnv.getHtmlLabelName(15273,user.getLanguage())));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      out.print((totalamountsum));
      out.write(_jsp_string22, 0, _jsp_string22.length);
      out.print((totalamountsum));
      out.write(_jsp_string23, 0, _jsp_string23.length);
      out.print((totalamountsum));
      out.write(_jsp_string24, 0, _jsp_string24.length);
      out.print((totalamountsum));
      out.write(_jsp_string25, 0, _jsp_string25.length);
      out.print((totalamountsum));
      out.write(_jsp_string26, 0, _jsp_string26.length);
      out.print((totalamountsum));
      out.write(_jsp_string27, 0, _jsp_string27.length);
      out.print((totalamountsum));
      out.write(_jsp_string28, 0, _jsp_string28.length);
      out.print((totalamountsum));
      out.write(_jsp_string29, 0, _jsp_string29.length);
      out.print((mandtypes.indexOf("1_1")!=-1));
      out.write(_jsp_string30, 0, _jsp_string30.length);
      out.print((mandtypes.indexOf("1_1")!=-1));
      out.write(_jsp_string31, 0, _jsp_string31.length);
      out.print((mandtypes.indexOf("2_1")!=-1));
      out.write(_jsp_string32, 0, _jsp_string32.length);
      out.print((edittypes.indexOf("3_1")!=-1));
      out.write(_jsp_string33, 0, _jsp_string33.length);
      out.print((mandtypes.indexOf("3_1")!=-1));
      out.write(_jsp_string34, 0, _jsp_string34.length);
      out.print((mandtypes.indexOf("2_1")!=-1));
      out.write(_jsp_string35, 0, _jsp_string35.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("workflow/request/ManageBillCptFetch2.jsp"), -1641430126661166882L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string4;
  private final static char []_jsp_string10;
  private final static char []_jsp_string29;
  private final static char []_jsp_string23;
  private final static char []_jsp_string35;
  private final static char []_jsp_string22;
  private final static char []_jsp_string12;
  private final static char []_jsp_string31;
  private final static char []_jsp_string27;
  private final static char []_jsp_string5;
  private final static char []_jsp_string25;
  private final static char []_jsp_string18;
  private final static char []_jsp_string2;
  private final static char []_jsp_string26;
  private final static char []_jsp_string3;
  private final static char []_jsp_string28;
  private final static char []_jsp_string0;
  private final static char []_jsp_string24;
  private final static char []_jsp_string16;
  private final static char []_jsp_string21;
  private final static char []_jsp_string15;
  private final static char []_jsp_string8;
  private final static char []_jsp_string17;
  private final static char []_jsp_string13;
  private final static char []_jsp_string7;
  private final static char []_jsp_string1;
  private final static char []_jsp_string20;
  private final static char []_jsp_string19;
  private final static char []_jsp_string33;
  private final static char []_jsp_string9;
  private final static char []_jsp_string30;
  private final static char []_jsp_string32;
  private final static char []_jsp_string6;
  private final static char []_jsp_string34;
  private final static char []_jsp_string14;
  private final static char []_jsp_string11;
  static {
    _jsp_string4 = ";\r\nrowindex = document.frmmain.nodesnum.value;\r\nneedcheck = \"".toCharArray();
    _jsp_string10 = "\";\r\n            for(i=len-1; i >= 0;i--) {\r\n                if (document.forms[0].elements[i].name=='check_node'){\r\n                    if(document.forms[0].elements[i].checked==true) {\r\n                        tmprow = document.forms[0].elements[i].value;\r\n                        if(document.forms[0].elements[i].isexist==1){//\u5220\u9664\u5df2\u7ecf\u5b58\u5728\u7684\u660e\u7ec6\r\n                            document.getElementById(\"delids\").value = document.getElementById(\"delids\").value+\",\"+tmprow;\r\n                        }\r\n                        for(j=0; j<7; j++) {\r\n                            if(mandtypes.indexOf(j+\"_1\")!=-1){\r\n                                if(j==1)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_cptid\",\"\");\r\n                                if(j==2)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_capitalid\",\"\");\r\n                                if(j==3)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_number\",\"\");\r\n                                if(j==4)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_unitprice\",\"\");\r\n                                if(j==5)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_amount\",\"\");\r\n                                if(j==6)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_needdate\",\"\");\r\n                                if(j==7)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_purpose\",\"\");\r\n                                if(j==8)\r\n                                    needcheck = needcheck.replace(\",node_\"+tmprow+\"_cptdesc\",\"\");\r\n\r\n                            }\r\n                        }\r\n                        oTable.deleteRow(rowsum1);\r\n						sumnum -=1;	\r\n                    }\r\n                    rowsum1 -=1;\r\n                }\r\n            }\r\n			//document.frmmain.nodesnum.value = sumnum ;\r\n			reloadSerialNum();\r\n            amountsumcount();\r\n}\r\n}else{\r\nalert('".toCharArray();
    _jsp_string29 = "span\").innerHTML=\"\";\r\n		}\r\n	}\r\n	}\r\n}\r\n\r\nfunction showprice(noderowindex){\r\n	var id = document.getElementById(noderowindex+\"_capitalid\").value;\r\n	//alert(id);\r\n	noderowindextmp = noderowindex;\r\n	jQuery.ajax({\r\n		url : \"/cpt/capital/CapitalStartPriceAjax.jsp?id=\"+id,\r\n		type : \"get\",\r\n		async : true,\r\n		data : {},\r\n		dataType : \"text\",\r\n		success: function do4Success(data){\r\n			showstartprice(noderowindextmp,data);\r\n		}\r\n	});\r\n	\r\n}\r\nfunction showstartprice(noderowindextmp,data){\r\n	if(data){ \r\n			var returnTemp = data;\r\n			var amountsum = document.getElementById(noderowindextmp+\"_number\").value*returnTemp;\r\n			if(document.getElementById(noderowindextmp+\"_unitprice\").type==\"hidden\"){\r\n				document.getElementById(noderowindextmp+\"_unitprice\").value = returnTemp;\r\n				document.getElementById(noderowindextmp+\"_unitpricespan\").innerHTML = returnTemp;\r\n			}else{\r\n				document.getElementById(noderowindextmp+\"_unitprice\").value = returnTemp;\r\n				if(document.getElementById(noderowindextmp+\"_unitpricespan\")){\r\n				document.getElementById(noderowindextmp+\"_unitpricespan\").innerHTML = \"\";\r\n				}\r\n			}\r\n			if(document.getElementById(noderowindextmp+\"_amount\").type==\"hidden\"){\r\n				document.getElementById(noderowindextmp+\"_amount\").value = toFloat(amountsum,0).toFixed(3);\r\n				document.getElementById(noderowindextmp+\"_amountspan\").innerHTML = toFloat(amountsum,0).toFixed(3);\r\n			}else{\r\n				document.getElementById(noderowindextmp+\"_amount\").value = toFloat(amountsum,0).toFixed(3);\r\n				if(document.getElementById(noderowindextmp+\"_amountspan\")){\r\n				document.getElementById(noderowindextmp+\"_amountspan\").innerHTML = \"\";\r\n				}\r\n			}\r\n			amountsumcount();\r\n	}\r\n}\r\n\r\nfunction changeamountsum(noderowindex){\r\n	//alert(noderowindex);\r\n	var pricetmp = document.getElementById(noderowindex+\"_unitprice\").value;\r\n	var numbertmp = document.getElementById(noderowindex+\"_number\").value;\r\n	var amountsumtmp = pricetmp*numbertmp;\r\n	if(document.getElementById(noderowindex+\"_amount\").type==\"hidden\"){\r\n		document.getElementById(noderowindex+\"_amount\").value = toFloat(amountsumtmp,0).toFixed(3);\r\n		document.getElementById(noderowindex+\"_amountspan\").innerHTML = toFloat(amountsumtmp,0).toFixed(3);\r\n	}else{\r\n		document.getElementById(noderowindex+\"_amount\").value = toFloat(amountsumtmp,0).toFixed(3);\r\n		if(document.getElementById(noderowindex+\"_amountspan\")){\r\n		document.getElementById(noderowindex+\"_amountspan\").innerHTML = \"\";\r\n		}\r\n	}\r\n	amountsumcount();\r\n}\r\n\r\n\r\nfunction onShowAssetType(spanname,inputname){\r\n	//console.log(\"spanname:\"+spanname);\r\n	//console.log(\"inputname:\"+inputname);\r\n	ismust1 = ".toCharArray();
    _jsp_string23 = "span\"));\r\n	if(jQuery(\"input[name='".toCharArray();
    _jsp_string35 = "\r\n	id = window.showModalDialog(\"/systeminfo/BrowserMain.jsp?url=/cpt/capital/CapitalBrowser.jsp?sqlwhere=where isdata='2'&cptstateid=1&cptuse=1\")\r\n	if NOT isempty(id) then\r\n	    if id(0)<> \"\" and id(0)<> \"0\" then\r\n		spanname.innerHtml = \"<a href='/cpt/capital/CptCapital.jsp?id=\"&id(0)&\"'>\"&id(1)&\"</a>\"\r\n		inputname.value=id(0)\r\n        inputnamecount.value=id(7)\r\n        inputnamenumber.value=id(7)\r\n        inputnamenumberspan.innerHtml =  \"\"\r\n		showprice(noderowindex)\r\n		else\r\n			if ismust2 = false then\r\n				spanname.innerHtml =  \"\"\r\n			else\r\n				spanname.innerHtml =  \"<img src='/images/BacoError_wev8.gif' align=absmiddle>\" \r\n			end if\r\n		inputname.value=\"\"\r\n		end if\r\n	end if\r\nend sub\r\n</script>".toCharArray();
    _jsp_string22 = "']\")){\r\n	var amountsum = 0;\r\n	//alert(rowindex);\r\n	for(var i=0;i<rowindex;i++){\r\n		var amounttmp = \"\";\r\n		try{\r\n			amounttmp = eval(toFloat(document.getElementById(\"node_\"+i+\"_amount\").value,0));\r\n		}catch(e){amounttmp = \"\";}\r\n		//alert(amounttmp);\r\n		if(amounttmp==\"\"){\r\n			amountsum += 0;\r\n		}else{\r\n			amountsum += parseFloat(amounttmp);\r\n		} \r\n	}\r\n	//alert(amountsum);\r\n	//alert(document.getElementById(\"".toCharArray();
    _jsp_string12 = "\"!=\"b\" && \"".toCharArray();
    _jsp_string31 = "\r\n	var obj= event.target || event.srcElement;\r\n	try\r\n	{\r\n		var rowindex = 0;\r\n		var namearr=name.split(\"_\");\r\n		if(namearr&&namearr[1]){\r\n			rowindex=namearr[1];\r\n		}\r\n		\r\n		if (data) \r\n		{\r\n			if (wuiUtil.getJsonValueByIndex(data, 0) != \"\") \r\n			{\r\n				jQuery(\"#node_\"+rowindex+\"_cpttypeidspan\").html(data.name);\r\n				jQuery(\"#node_\"+rowindex+\"_cpttypeid\").val(data.id);\r\n		    }\r\n			else\r\n			{\r\n				if(ismust1)\r\n				{\r\n					//jQuery(\"#node_\"+rowindex+\"_cpttypeidspan\").html(\"<img src='/images/BacoError_wev8.gif' align=absmiddle>\");\r\n					jQuery(\"#node_\"+rowindex+\"_cpttypeid\").val('');\r\n				}\r\n				else\r\n				{\r\n					jQuery(\"#node_\"+rowindex+\"_cpttypeidspan\").html(\"\");\r\n					jQuery(\"#node_\"+rowindex+\"_cpttypeid\").val('');\r\n				}\r\n			}\r\n		}\r\n	}\r\n	catch(e)\r\n	{\r\n	}\r\n}\r\nfunction onShowTableUrl1()\r\n{\r\n	return \"/systeminfo/BrowserMain.jsp?url=/cpt/capital/CapitalBrowser.jsp?sqlwhere=where isdata='2'&cptstateid=1&cptuse=1\";\r\n}\r\nfunction onSetCptCapital1(event,data,name)\r\n{\r\n	var ismust2 = ".toCharArray();
    _jsp_string27 = "']\").val(amountsum.toFixed(3));\r\n		if(document.getElementById(\"".toCharArray();
    _jsp_string5 = "\";\r\nfunction addRow()\r\n{\r\n	//ncol = oTable.cols;\r\n	ncol = 9;\r\n	dsptypes = \"".toCharArray();
    _jsp_string25 = "span\").innerHTML=amountsum.toFixed(3);\r\n		jQuery(\"input[name='".toCharArray();
    _jsp_string18 = ".value.substring(0,4);\r\n			MonthTo=document.frmmain.".toCharArray();
    _jsp_string2 = "\" != \"\"){\r\n         document.all(\"needcheck\").value += \",".toCharArray();
    _jsp_string26 = "']\").val(amountsum.toFixed(3));\r\n	}else{\r\n		jQuery(\"input[name='".toCharArray();
    _jsp_string3 = "\";\r\n    }\r\n    \r\n</script>\r\n\r\n<script language=javascript>\r\n	\r\n	\r\ngroupid = ".toCharArray();
    _jsp_string28 = "span\")){\r\n		document.getElementById(\"".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string24 = "']\").attr(\"type\")==\"hidden\"){\r\n		document.getElementById(\"".toCharArray();
    _jsp_string16 = ".value.substring(5,7);\r\n			DayFrom=document.frmmain.".toCharArray();
    _jsp_string21 = "\");\r\n         return false;\r\n  			 }\r\n  }\r\n     return true; \r\n}\r\nfunction toFloat(str , def) {\r\n    if(isNaN(parseFloat(str))) return def ;\r\n    else return str ;\r\n}\r\n\r\nfunction toInt(str , def) {\r\n    if(isNaN(parseInt(str))) return def ;\r\n    else return str ;\r\n}\r\n\r\nfunction amountsumcount(){\r\n	if(jQuery(\"input[name='".toCharArray();
    _jsp_string15 = ".value.substring(0,4);\r\n			MonthFrom=document.frmmain.".toCharArray();
    _jsp_string8 = "\";\r\n	\r\n	var rownum = oTable.rows.length;\r\n	oRow = oTable.insertRow(rownum);\r\n	//rowindex = oRow.rowIndex;\r\n	if (0 == rowindex % 2)\r\n    {\r\n        oRow.className = \"DataLight\";\r\n    }\r\n    else\r\n    {\r\n        oRow.className = \"DataDark\";\r\n    }\r\n	for(j=0; j<ncol; j++) {\r\n		oCell = oRow.insertCell(-1); \r\n		oCell.style.height=24;\r\n		//oCell.style.background= \"#D2D1F1\";\r\n		if(dsptypes.indexOf(j+\"_0\")!=-1){\r\n			oCell.style.display=\"none\";\r\n		}\r\n		switch(j) {\r\n			case 0:\r\n				var oDiv = document.createElement(\"div\");\r\n				var sHtml = \"<input type='checkbox' name='check_node' isexist='0' value='\"+rowindex+\"'><input type='hidden' name='check_node_val'  value='\"+rowindex+\"'>\";\r\n				oDiv.innerHTML = sHtml+\"<span serialno>&nbsp;&nbsp;&nbsp;&nbsp;\"+rownum+\"</span>\";\r\n				//oDiv.innerHTML = sHtml;\r\n				oCell.appendChild(oDiv);\r\n				jQuery(oCell).jNice();\r\n				break;\r\n			\r\n			case 1: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";\r\n				if(edittypes.indexOf(\"1_1\")!=-1){\r\n					oDiv.innerHTML=\"<div class='e8Browser'></div>\";\r\n        			oCell.appendChild(oDiv);\r\n        			var tempisMustInput = \"1\";\r\n        			if(mandtypes.indexOf(\"1_1\")!=-1){\r\n       					tempisMustInput = \"2\";\r\n       					needcheck += \",\"+\"node_\"+rowindex+\"_cptid\";\r\n       				}\r\n					\r\n					jQuery(oDiv).find(\".e8Browser\").e8Browser({\r\n						   name:\"node_\"+rowindex+\"_cptid\",\r\n						   viewType:\"0\",\r\n						   browserValue:\"\",\r\n						   isMustInput:tempisMustInput,\r\n						   browserSpanValue:\"\",\r\n						   getBrowserUrlFn:'onShowTableUrl',\r\n						   getBrowserUrlFnParams:\"\",\r\n						   hasInput:true,\r\n						   linkUrl:\"#\",\r\n						   isSingle:true,\r\n						   completeUrl:\"/data.jsp?type=25\",\r\n						   browserUrl:\"\",\r\n						   width:'90%',\r\n						   hasAdd:false,\r\n						   isSingle:true,\r\n						   _callback:\"onSetCptCapital\"\r\n					});\r\n				}\r\n				break;\r\n			case 2: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";\r\n				if(edittypes.indexOf(\"2_1\")!=-1){\r\n					oDiv.innerHTML=\"<div class='e8Browser'></div><input type='hidden' name='node_\"+rowindex+\"_capitalcount' id='node_\"+rowindex+\"_capitalcount'>\";\r\n        			oCell.appendChild(oDiv);\r\n        			\r\n        			var tempisMustInput = \"1\";\r\n        			if(mandtypes.indexOf(\"2_1\")!=-1){\r\n       					tempisMustInput = \"2\";\r\n       					needcheck += \",\"+\"node_\"+rowindex+\"_capitalid\";\r\n       				}\r\n					\r\n					jQuery(oDiv).find(\".e8Browser\").e8Browser({\r\n						   name:\"node_\"+rowindex+\"_capitalid\",\r\n						   viewType:\"0\",\r\n						   browserValue:\"\",\r\n						   isMustInput:tempisMustInput,\r\n						   browserSpanValue:\"\",\r\n						   getBrowserUrlFn:'onShowTableUrl1',\r\n						   getBrowserUrlFnParams:\"\",\r\n						   hasInput:true,\r\n						   linkUrl:\"/cpt/capital/CptCapital.jsp?id=\",\r\n						   isSingle:true,\r\n						   completeUrl:\"/data.jsp?type=23&cptstateid=1&cptuse=1\",\r\n						   browserUrl:\"\",\r\n						   width:'90%',\r\n						   hasAdd:false,\r\n						   isSingle:true,\r\n						   _callback:\"onSetCptCapital1\"\r\n					});\r\n				}\r\n				break;\r\n			case 3: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";\r\n				if(edittypes.indexOf(\"3_1\")!=-1){\r\n					if(mandtypes.indexOf(\"3_1\")!=-1){ \r\n						sHtml = \"<input type='text' class=Inputstyle  id='node_\"+rowindex+\"_number' name='node_\"+rowindex+\"_number' onKeyPress='ItemNum_KeyPress()' onBlur=\\\"checknumber1(this);checkinput('node_\"+rowindex+\"_number','node_\"+rowindex+\"_numberspan');checkCount(\"+rowindex+\");changeamountsum('node_\"+rowindex+\"')\\\"><span id='node_\"+rowindex+\"_numberspan'>\";\r\n						sHtml += \"<img src='/images/BacoError_wev8.gif' align=absmiddle>\";\r\n						sHtml+=\"</span>\";\r\n        					needcheck += \",\"+\"node_\"+rowindex+\"_number\";\r\n        				}else{\r\n        					sHtml = \"<input type='text' class=Inputstyle id='node_\"+rowindex+\"_number' name='node_\"+rowindex+\"_number' onKeyPress='ItemNum_KeyPress()' onBlur='checknumber1(this);checkCount(\"+rowindex+\");changeamountsum(\\\"node_\"+rowindex+\"\\\")'><span id='node_\"+rowindex+\"_numberspan'></span>\";\r\n        				}\r\n	        			oDiv.innerHTML = sHtml;   \r\n					oCell.appendChild(oDiv);  \r\n				}else{\r\n                    sHtml = \"<input type='hidden' class=Inputstyle  id='node_\"+rowindex+\"_number' name='node_\"+rowindex+\"_number'><span id='node_\"+rowindex+\"_numberspan'></span>\";\r\n	        	    oDiv.innerHTML = sHtml;   \r\n					oCell.appendChild(oDiv); \r\n                }\r\n				break;\r\n			case 4: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";\r\n				if(edittypes.indexOf(\"4_1\")!=-1){\r\n					if(mandtypes.indexOf(\"4_1\")!=-1){\r\n						sHtml = \"<input type='text' class=Inputstyle   id='node_\"+rowindex+\"_unitprice' name='node_\"+rowindex+\"_unitprice'  onKeyPress='ItemNum_KeyPress()' onBlur=checknumber1(this);checkinput('node_\"+rowindex+\"_unitprice','node_\"+rowindex+\"_unitpricespan');changeamountsum('node_\"+rowindex+\"')><span id='node_\"+rowindex+\"_unitpricespan'>\";\r\n						sHtml += \"<img src='/images/BacoError_wev8.gif' align=absmiddle>\";\r\n        					needcheck += \",\"+\"node_\"+rowindex+\"_unitprice\";\r\n        					sHtml+=\"</span>\"\r\n        				}else{\r\n        					sHtml = \"<input type='text'  class=Inputstyle onBlur=checknumber1(this);changeamountsum('node_\"+rowindex+\"') id='node_\"+rowindex+\"_unitprice' name='node_\"+rowindex+\"_unitprice'><span id='node_\"+rowindex+\"_unitpricespan'></span>\";\r\n        				}\r\n        				\r\n        				  \r\n        			}else{\r\n        				sHtml = \"<input type='hidden' class=Inputstyle  id='node_\"+rowindex+\"_unitprice' name='node_\"+rowindex+\"_unitprice'><span id='node_\"+rowindex+\"_unitpricespan'></span>\";	\r\n            		}\r\n					oDiv.innerHTML = sHtml;   \r\n					oCell.appendChild(oDiv);\r\n				break;\r\n			case 5: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";\r\n				if(edittypes.indexOf(\"5_1\")!=-1){\r\n					if(mandtypes.indexOf(\"5_1\")!=-1){\r\n						sHtml = \"<input type='text' class=Inputstyle   id='node_\"+rowindex+\"_amount' name='node_\"+rowindex+\"_amount'  onKeyPress='ItemNum_KeyPress()' onBlur=checknumber1(this);checkinput('node_\"+rowindex+\"_amount','node_\"+rowindex+\"_amountspan')><span id='node_\"+rowindex+\"_amountspan'>\";\r\n						sHtml += \"<img src='/images/BacoError_wev8.gif' align=absmiddle>\";\r\n        					needcheck += \",\"+\"node_\"+rowindex+\"_amount\";\r\n        					sHtml+=\"</span>\"\r\n        				}else{\r\n        					sHtml = \"<input type='text' class=Inputstyle onBlur='checknumber1(this);'  id='node_\"+rowindex+\"_amount' name='node_\"+rowindex+\"_amount'><span id='node_\"+rowindex+\"_amountspan'></span>\";\r\n        				}\r\n        				\r\n        			}else{\r\n        				sHtml = \"<input type='hidden' class=Inputstyle  id='node_\"+rowindex+\"_amount' name='node_\"+rowindex+\"_amount'><span id='node_\"+rowindex+\"_amountspan'></span>\";\r\n            		}\r\n\r\n						oDiv.innerHTML = sHtml;   \r\n					oCell.appendChild(oDiv);  \r\n\r\n				break;\r\n			\r\n			case 6: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";\r\n				if(edittypes.indexOf(\"6_1\")!=-1){\r\n					sHtml = \"<button class=e8_browflow type=button onClick='onBillCPTShowDate(node_\"+rowindex+\"_needdatespan,node_\"+rowindex+\"_needdate,\"+mandtypes.indexOf(\"6_1\")+\")'></button> \" + \r\n						\"<span class=Inputstyle id=node_\"+rowindex+\"_needdatespan> \";\r\n					if(mandtypes.indexOf(\"6_1\")!=-1){\r\n        					sHtml += \"<img src='/images/BacoError_wev8.gif' align=absmiddle>\";\r\n        					needcheck += \",\"+\"node_\"+rowindex+\"_needdate\";\r\n        				}\r\n        				sHtml+=\"</span>\"\r\n        				sHtml += \"<input type='hidden' name='node_\"+rowindex+\"_needdate' id='node_\"+rowindex+\"_needdate'>\";\r\n        				oDiv.innerHTML = sHtml;   \r\n					oCell.appendChild(oDiv);  \r\n        			}\r\n				break;\r\n			\r\n			case 7: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";;\r\n				if(edittypes.indexOf(\"7_1\")!=-1){\r\n					if(mandtypes.indexOf(\"7_1\")!=-1){\r\n						sHtml = \"<input class=Inputstyle class=Inputstyle type='text' name='node_\"+rowindex+\"_purpose' onBlur=checkinput('node_\"+rowindex+\"_purpose','node_\"+rowindex+\"_purposespan')><span id='node_\"+rowindex+\"_purposespan'>\";\r\n						sHtml += \"<img src='/images/BacoError_wev8.gif' align=absmiddle>\";\r\n        					needcheck += \",\"+\"node_\"+rowindex+\"_purpose\";\r\n        					sHtml+=\"</span>\"        				\r\n        				}else{\r\n        					sHtml = \"<input type='text' class=Inputstyle name='node_\"+rowindex+\"_purpose'>\";\r\n        				}\r\n        				oDiv.innerHTML = sHtml;   \r\n					oCell.appendChild(oDiv);  \r\n        			}\r\n				break;	\r\n			case 8: \r\n				var oDiv = document.createElement(\"div\"); \r\n				var sHtml = \"\";;\r\n				if(edittypes.indexOf(\"8_1\")!=-1){\r\n					if(mandtypes.indexOf(\"8_1\")!=-1){\r\n						sHtml = \"<input class=Inputstyle type='text' name='node_\"+rowindex+\"_cptdesc' onBlur=checkinput('node_\"+rowindex+\"_cptdesc','node_\"+rowindex+\"_cptdescspan')><span id='node_\"+rowindex+\"_cptdescspan'>\";\r\n						sHtml += \"<img src='/images/BacoError_wev8.gif' align=absmiddle>\";\r\n        					needcheck += \",\"+\"node_\"+rowindex+\"_cptdesc\";\r\n        					sHtml+=\"</span>\"        				\r\n        				}else{\r\n        					sHtml = \"<input type='text' class=Inputstyle name='node_\"+rowindex+\"_cptdesc'>\";\r\n        				}\r\n        				oDiv.innerHTML = sHtml;   \r\n					oCell.appendChild(oDiv);  \r\n        			}\r\n				break;	\r\n				\r\n		}\r\n	}\r\n	rowindex = rowindex*1 +1;\r\n	document.frmmain.nodesnum.value = rowindex ;\r\n	document.all(\"needcheck\").value += \",\"+needcheck;\r\n}\r\n\r\nfunction checkCount(index){\r\n    //var stockamount = document.all(\"node_\"+index+\"_count\").value;\r\n   // var useamount = document.all(\"node_\"+index+\"_number\").value;\r\n    //if(eval(useamount)>eval(stockamount)){\r\n    //    alert(\"".toCharArray();
    _jsp_string17 = ".value.substring(8,10);\r\n			YearTo=document.frmmain.".toCharArray();
    _jsp_string13 = "\"!=\"a\" && document.frmmain.".toCharArray();
    _jsp_string7 = "\";\r\n	mandtypes = \"".toCharArray();
    _jsp_string1 = "\r\n\r\n<script language=\"javascript\">\r\n    if (\"".toCharArray();
    _jsp_string20 = ".value.substring(8,10);\r\n			// window.alert(YearFrom+MonthFrom+DayFrom);\r\n                   if (!DateCompare(YearFrom, MonthFrom, DayFrom,YearTo, MonthTo,DayTo )){\r\n        window.alert(\"".toCharArray();
    _jsp_string19 = ".value.substring(5,7);\r\n			DayTo=document.frmmain.".toCharArray();
    _jsp_string33 = "\r\n	var obj= event.target || event.srcElement;\r\n	try\r\n	{\r\n		var rowindex = 0;\r\n		var namearr=name.split(\"_\");\r\n		if(namearr&&namearr[1]){\r\n			rowindex=namearr[1];\r\n		}\r\n		if (data) \r\n		{\r\n			if (wuiUtil.getJsonValueByIndex(data, 0) != \"\") \r\n			{\r\n				jQuery(\"#node_\"+rowindex+\"_capitalidspan\").html(\"<a href='/cpt/capital/CptCapital.jsp?id=\"+data.id+\"' target='_blank'>\"+data.name+\"</a>\");\r\n				jQuery(\"#node_\"+rowindex+\"_capitalid\").val(data.id);\r\n		        jQuery(\"#node_\"+rowindex+\"_number\").val(data.other6);\r\n		        jQuery(\"#node_\"+rowindex+\"_capitalcount\").val(data.other6);\r\n		         if(!edittype){\r\n			        jQuery(\"#node_\"+rowindex+\"_numberspan\").html(data.other6);\r\n		        }\r\n		        showprice(\"node_\"+rowindex);\r\n		    }\r\n			else\r\n			{\r\n				if(ismust2)\r\n				{\r\n					//jQuery(\"#node_\"+rowindex+\"_capitalidspan\").html(\"<img src='/images/BacoError_wev8.gif' align=absmiddle>\");\r\n					jQuery(\"#node_\"+rowindex+\"_capitalid\").val('');\r\n				}\r\n				else\r\n				{\r\n					jQuery(\"#node_\"+rowindex+\"_capitalidspan\").html(\"\");\r\n					jQuery(\"#node_\"+rowindex+\"_capitalid\").val('');\r\n				}\r\n			}\r\n		}\r\n	}\r\n	catch(e)\r\n	{\r\n	}\r\n}\r\nfunction onShowTableUrl2()\r\n{\r\n	return \"/systeminfo/BrowserMain.jsp?url=/cpt/capital/CapitalBrowser.jsp\";\r\n}\r\nfunction onSetCptCapital2(event,data,name)\r\n{\r\n	var ismust1 = ".toCharArray();
    _jsp_string9 = "\");\r\n    //    document.all(\"node_\"+index+\"_number\").value = stockamount;\r\n   // }\r\n}\r\n\r\nfunction deleteRow1()\r\n{\r\n    var flag = false;\r\n	var ids = document.getElementsByName('check_node');\r\n	for(i=0; i<ids.length; i++) {\r\n		if(ids[i].checked==true) {\r\n			flag = true;\r\n			break;\r\n		}\r\n	}\r\n    if(flag) {\r\n		if(isdel()){\r\n            len = document.forms[0].elements.length;\r\n            var i=0;\r\n            var rowsum1 = 0;\r\n            for(i=len-1; i >= 0;i--) {\r\n                if (document.forms[0].elements[i].name=='check_node')\r\n                    rowsum1 += 1;\r\n            }\r\n			var sumnum = rowsum1;\r\n            mandtypes = \"".toCharArray();
    _jsp_string30 = "\r\n	var data = window.showModalDialog(\"/systeminfo/BrowserMain.jsp?url=/cpt/maintenance/CptAssortmentBrowser.jsp?supassortmentid=\"&groupid&\"&fromcapital=2\")\r\n	\r\n	if(data){\r\n		if(data.id&&data.id!=\"\"&&data.id!=\"0\"){\r\n			$(spanname).html(data.name);\r\n			$(inputname).val(data.id);\r\n		}else{\r\n			if(ismust1!='1'){\r\n				$(spanname).html(\"\");\r\n			}else{\r\n				$(spanname).html(\"<img src='/images/BacoError_wev8.gif' align=absmiddle>\");\r\n			}\r\n			$(inputname).val(\"\");\r\n		}\r\n	}\r\n	\r\n}\r\n</script>\r\n\r\n<script type=\"text/javascript\">\r\nfunction onShowTableUrl()\r\n{\r\n	return \"/systeminfo/BrowserMain.jsp?url=/cpt/maintenance/CptAssortmentBrowser.jsp\";\r\n}\r\nfunction onSetCptCapital(event,data,name)\r\n{\r\n	var ismust1 = ".toCharArray();
    _jsp_string32 = "\r\n	var edittype = ".toCharArray();
    _jsp_string6 = "\";\r\n	edittypes = \"".toCharArray();
    _jsp_string34 = ";\r\n	var obj= event.target || event.srcElement;\r\n	try\r\n	{\r\n		var rowindex = 0;\r\n		var namearr=name.split(\"_\");\r\n		if(namearr&&namearr[1]){\r\n			rowindex=namearr[1];\r\n		}\r\n		\r\n		if (data) \r\n		{\r\n			if (wuiUtil.getJsonValueByIndex(data, 0) != \"\") \r\n			{\r\n				jQuery(\"#node_\"+rowindex+\"_cptcapitalidspan\").html(data.name);\r\n				jQuery(\"#node_\"+rowindex+\"_cptcapitalid\").val(data.id);\r\n		    }\r\n			else\r\n			{\r\n				if(ismust1)\r\n				{\r\n					jQuery(\"#node_\"+rowindex+\"_cptcapitalidspan\").html(\"<img src='/images/BacoError_wev8.gif' align=absmiddle>\");\r\n					jQuery(\"#node_\"+rowindex+\"_cptcapitalid\").val('');\r\n				}\r\n				else\r\n				{\r\n					jQuery(\"#node_\"+rowindex+\"_cptcapitalidspan\").html(\"\");\r\n					jQuery(\"#node_\"+rowindex+\"_cptcapitalid\").val('');\r\n				}\r\n			}\r\n		}\r\n	}\r\n	catch(e)\r\n	{\r\n	}\r\n}\r\n</script>\r\n\r\n<script language=\"vbs\">\r\nsub onShowCptCapital(spanname,inputname,inputnamecount,inputnamenumber,inputnamenumberspan,noderowindex)\r\n	ismust2 = ".toCharArray();
    _jsp_string14 = ".value != \"\"){\r\n			YearFrom=document.frmmain.".toCharArray();
    _jsp_string11 = "');\r\n		return;\r\n}\r\n}	\r\nfunction reloadSerialNum(){\r\n	jQuery(oTable).find(\"tr\").each(function(index,item){\r\n		jQuery(item).find(\"span[serialno]\").html(\"&nbsp;&nbsp;&nbsp;&nbsp;\"+index);\r\n	});\r\n}\r\n\r\nfunction changetype(obj){\r\n	groupid = obj.value;		\r\n//	obj.disabled = true;\r\n}\r\n\r\nfunction DateCompare(YearFrom, MonthFrom, DayFrom,YearTo, MonthTo,DayTo)\r\n{  \r\n    YearFrom  = parseInt(YearFrom,10);\r\n    MonthFrom = parseInt(MonthFrom,10);\r\n    DayFrom = parseInt(DayFrom,10);\r\n    YearTo    = parseInt(YearTo,10);\r\n    MonthTo   = parseInt(MonthTo,10);\r\n    DayTo = parseInt(DayTo,10);\r\n    if(YearTo<YearFrom)\r\n    return false;\r\n    else{\r\n        if(YearTo==YearFrom){\r\n            if(MonthTo<MonthFrom)\r\n            return false;\r\n            else{\r\n                if(MonthTo==MonthFrom){\r\n                    if(DayTo<DayFrom)\r\n                    return false;\r\n                    else\r\n                    return true;\r\n                }\r\n                else \r\n                return true;\r\n            }\r\n            }\r\n        else\r\n        return true;\r\n        }\r\n}\r\n\r\n\r\nfunction checktimeok(){\r\nif (\"".toCharArray();
  }
}
