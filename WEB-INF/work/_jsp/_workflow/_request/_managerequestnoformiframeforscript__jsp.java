/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._workflow._request;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import org.json.JSONObject;
import org.json.JSONException;
import weaver.general.Util;
import weaver.general.AttachFileUtil;
import weaver.common.StringUtil;
import weaver.conn.*;
import java.util.*;
import weaver.hrm.*;
import java.sql.Timestamp;
import weaver.rtx.RTXConfig;
import weaver.file.Prop;
import weaver.general.GCONST;
import weaver.workflow.request.SubWorkflowTriggerService;
import weaver.workflow.request.RequestShare;
import weaver.file.FileUpload;
import weaver.rdeploy.portal.PortalUtil;
import java.net.URLEncoder;

public class _managerequestnoformiframeforscript__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      weaver.conn.RecordSet RecordSet;
      RecordSet = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet");
      if (RecordSet == null) {
        RecordSet = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet", RecordSet);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet RecordSet2;
      RecordSet2 = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet2");
      if (RecordSet2 == null) {
        RecordSet2 = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet2", RecordSet2);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.conn.RecordSet RecordSet3;
      RecordSet3 = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet3");
      if (RecordSet3 == null) {
        RecordSet3 = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet3", RecordSet3);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.conn.RecordSet RecordSet5;
      RecordSet5 = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet5");
      if (RecordSet5 == null) {
        RecordSet5 = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet5", RecordSet5);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.conn.RecordSet RecordSet6;
      RecordSet6 = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet6");
      if (RecordSet6 == null) {
        RecordSet6 = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet6", RecordSet6);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet RecordSet7;
      RecordSet7 = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet7");
      if (RecordSet7 == null) {
        RecordSet7 = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet7", RecordSet7);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet RecordSet8;
      RecordSet8 = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet8");
      if (RecordSet8 == null) {
        RecordSet8 = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet8", RecordSet8);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.conn.RecordSet RecordSet9;
      RecordSet9 = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet9");
      if (RecordSet9 == null) {
        RecordSet9 = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet9", RecordSet9);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.workflow.request.RequestTriDiffWfManager RequestTriDiffWfManager;
      RequestTriDiffWfManager = (weaver.workflow.request.RequestTriDiffWfManager) pageContext.getAttribute("RequestTriDiffWfManager");
      if (RequestTriDiffWfManager == null) {
        RequestTriDiffWfManager = new weaver.workflow.request.RequestTriDiffWfManager();
        pageContext.setAttribute("RequestTriDiffWfManager", RequestTriDiffWfManager);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.workflow.request.RequestCheckUser RequestCheckUser;
      RequestCheckUser = (weaver.workflow.request.RequestCheckUser) pageContext.getAttribute("RequestCheckUser");
      if (RequestCheckUser == null) {
        RequestCheckUser = new weaver.workflow.request.RequestCheckUser();
        pageContext.setAttribute("RequestCheckUser", RequestCheckUser);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.field.FieldComInfo FieldComInfo;
      FieldComInfo = (weaver.workflow.field.FieldComInfo) pageContext.getAttribute("FieldComInfo");
      if (FieldComInfo == null) {
        FieldComInfo = new weaver.workflow.field.FieldComInfo();
        pageContext.setAttribute("FieldComInfo", FieldComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.workflow.WorkflowComInfo WorkflowComInfo;
      WorkflowComInfo = (weaver.workflow.workflow.WorkflowComInfo) pageContext.getAttribute("WorkflowComInfo");
      if (WorkflowComInfo == null) {
        WorkflowComInfo = new weaver.workflow.workflow.WorkflowComInfo();
        pageContext.setAttribute("WorkflowComInfo", WorkflowComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.hrm.resource.ResourceComInfo ResourceComInfo;
      ResourceComInfo = (weaver.hrm.resource.ResourceComInfo) pageContext.getAttribute("ResourceComInfo");
      if (ResourceComInfo == null) {
        ResourceComInfo = new weaver.hrm.resource.ResourceComInfo();
        pageContext.setAttribute("ResourceComInfo", ResourceComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.field.BrowserComInfo BrowserComInfo;
      BrowserComInfo = (weaver.workflow.field.BrowserComInfo) pageContext.getAttribute("BrowserComInfo");
      if (BrowserComInfo == null) {
        BrowserComInfo = new weaver.workflow.field.BrowserComInfo();
        pageContext.setAttribute("BrowserComInfo", BrowserComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.crm.Maint.CustomerInfoComInfo CustomerInfoComInfo;
      CustomerInfoComInfo = (weaver.crm.Maint.CustomerInfoComInfo) pageContext.getAttribute("CustomerInfoComInfo");
      if (CustomerInfoComInfo == null) {
        CustomerInfoComInfo = new weaver.crm.Maint.CustomerInfoComInfo();
        pageContext.setAttribute("CustomerInfoComInfo", CustomerInfoComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet rs;
      rs = (weaver.conn.RecordSet) pageContext.getAttribute("rs");
      if (rs == null) {
        rs = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs", rs);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet rs1;
      rs1 = (weaver.conn.RecordSet) pageContext.getAttribute("rs1");
      if (rs1 == null) {
        rs1 = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs1", rs1);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.docs.docs.DocImageManager DocImageManager;
      DocImageManager = (weaver.docs.docs.DocImageManager) pageContext.getAttribute("DocImageManager");
      if (DocImageManager == null) {
        DocImageManager = new weaver.docs.docs.DocImageManager();
        pageContext.setAttribute("DocImageManager", DocImageManager);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.workflow.WfFunctionManageUtil WfFunctionManageUtil;
      WfFunctionManageUtil = (weaver.workflow.workflow.WfFunctionManageUtil) pageContext.getAttribute("WfFunctionManageUtil");
      if (WfFunctionManageUtil == null) {
        WfFunctionManageUtil = new weaver.workflow.workflow.WfFunctionManageUtil();
        pageContext.setAttribute("WfFunctionManageUtil", WfFunctionManageUtil);
      }
      out.write(_jsp_string3, 0, _jsp_string3.length);
      weaver.workflow.workflow.WfForceOver WfForceOver;
      WfForceOver = (weaver.workflow.workflow.WfForceOver) pageContext.getAttribute("WfForceOver");
      if (WfForceOver == null) {
        WfForceOver = new weaver.workflow.workflow.WfForceOver();
        pageContext.setAttribute("WfForceOver", WfForceOver);
      }
      out.write(_jsp_string3, 0, _jsp_string3.length);
      weaver.workflow.workflow.WfForceDrawBack WfForceDrawBack;
      WfForceDrawBack = (weaver.workflow.workflow.WfForceDrawBack) pageContext.getAttribute("WfForceDrawBack");
      if (WfForceDrawBack == null) {
        WfForceDrawBack = new weaver.workflow.workflow.WfForceDrawBack();
        pageContext.setAttribute("WfForceDrawBack", WfForceDrawBack);
      }
      out.write(_jsp_string3, 0, _jsp_string3.length);
      weaver.workflow.request.RequestDoc flowDoc;
      flowDoc = (weaver.workflow.request.RequestDoc) pageContext.getAttribute("flowDoc");
      if (flowDoc == null) {
        flowDoc = new weaver.workflow.request.RequestDoc();
        pageContext.setAttribute("flowDoc", flowDoc);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.request.WFUrgerManager WFUrgerManager;
      WFUrgerManager = (weaver.workflow.request.WFUrgerManager) pageContext.getAttribute("WFUrgerManager");
      if (WFUrgerManager == null) {
        WFUrgerManager = new weaver.workflow.request.WFUrgerManager();
        pageContext.setAttribute("WFUrgerManager", WFUrgerManager);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.general.SysPubRefComInfo sysPubRefComInfo;
      sysPubRefComInfo = (weaver.general.SysPubRefComInfo) pageContext.getAttribute("sysPubRefComInfo");
      if (sysPubRefComInfo == null) {
        sysPubRefComInfo = new weaver.general.SysPubRefComInfo();
        pageContext.setAttribute("sysPubRefComInfo", sysPubRefComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.request.RequestDetailImport RequestDetailImport;
      RequestDetailImport = (weaver.workflow.request.RequestDetailImport) pageContext.getAttribute("RequestDetailImport");
      if (RequestDetailImport == null) {
        RequestDetailImport = new weaver.workflow.request.RequestDetailImport();
        pageContext.setAttribute("RequestDetailImport", RequestDetailImport);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.request.WFLinkInfo WFLinkInfo_nf;
      WFLinkInfo_nf = (weaver.workflow.request.WFLinkInfo) pageContext.getAttribute("WFLinkInfo_nf");
      if (WFLinkInfo_nf == null) {
        WFLinkInfo_nf = new weaver.workflow.request.WFLinkInfo();
        pageContext.setAttribute("WFLinkInfo_nf", WFLinkInfo_nf);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.workflow.workflow.WFManager WFManager;
      synchronized (pageContext.getSession()) {
        WFManager = (weaver.workflow.workflow.WFManager) pageContext.getSession().getAttribute("WFManager");
        if (WFManager == null) {
          WFManager = new weaver.workflow.workflow.WFManager();
          pageContext.getSession().setAttribute("WFManager", WFManager);
        }
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.cpt.util.CptWfUtil CptWfUtil;
      CptWfUtil = (weaver.cpt.util.CptWfUtil) pageContext.getAttribute("CptWfUtil");
      if (CptWfUtil == null) {
        CptWfUtil = new weaver.cpt.util.CptWfUtil();
        pageContext.setAttribute("CptWfUtil", CptWfUtil);
      }
      out.write(_jsp_string4, 0, _jsp_string4.length);
      weaver.wechat.util.WechatPropConfig WechatPropConfig;
      WechatPropConfig = (weaver.wechat.util.WechatPropConfig) pageContext.getAttribute("WechatPropConfig");
      if (WechatPropConfig == null) {
        WechatPropConfig = new weaver.wechat.util.WechatPropConfig();
        pageContext.setAttribute("WechatPropConfig", WechatPropConfig);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.systeminfo.SystemEnv SystemEnv;
      SystemEnv = (weaver.systeminfo.SystemEnv) pageContext.getAttribute("SystemEnv");
      if (SystemEnv == null) {
        SystemEnv = new weaver.systeminfo.SystemEnv();
        pageContext.setAttribute("SystemEnv", SystemEnv);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      
User user = HrmUserVarify.getUser (request , response) ;
int init_road = Util.getIntValue(request.getParameter("init_road"),-1);//\u5f53\u524d\u8282\u70b9\u7684\u8def\u5f84\u7f16\u8f91\u6743\u9650
String init_nodename=SystemEnv.getHtmlLabelName(15070, user.getLanguage());
int init_frms = Util.getIntValue(request.getParameter("init_frms"),-1);
int currtype=-1;//\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u578b
String init_nodeDo="";
boolean isfromtab =  Util.null2String(request.getParameter("isfromtab")).equals("true")?true:false;

      out.write(_jsp_string1, 0, _jsp_string1.length);
      
String isworkflowdoc = Util.getIntValue(request.getParameter("isworkflowdoc"),0)+"";//\u662f\u5426\u4e3a\u516c\u6587
int seeflowdoc = Util.getIntValue(request.getParameter("seeflowdoc"),0);
int userlanguage=Util.getIntValue(request.getParameter("languageid"),7);
String clientip = request.getRemoteAddr();
Calendar today = Calendar.getInstance();
String currentdate = Util.add0(today.get(Calendar.YEAR), 4) + "-" +
                     Util.add0(today.get(Calendar.MONTH) + 1, 2) + "-" +
                     Util.add0(today.get(Calendar.DAY_OF_MONTH), 2) ;

String currenttime = Util.add0(today.get(Calendar.HOUR_OF_DAY), 2) + ":" +
                     Util.add0(today.get(Calendar.MINUTE), 2) + ":" +
                     Util.add0(today.get(Calendar.SECOND), 2) ;
                     
String newfromdate="a";
String newenddate="b";
String  isrequest = Util.null2String(request.getParameter("isrequest")); // \u662f\u5426\u662f\u4ece\u76f8\u5173\u5de5\u4f5c\u6d41\u7684\u94fe\u63a5\u4e2d\u6765,1:\u662f
int salesMessage = Util.getIntValue(request.getParameter("salesMessage"),-1);
int requestid = Util.getIntValue(request.getParameter("requestid"),0);
String wfdoc = Util.null2String((String)session.getAttribute(requestid+"_wfdoc"));
String message = Util.null2String(session.getAttribute("errormsgid_"+user.getUID()+"_"+requestid));  // \u8fd4\u56de\u7684\u9519\u8bef\u4fe1\u606f
if(StringUtil.isNull(message)){
    message = Util.null2String(request.getParameter("message"));
}
session.removeAttribute("errormsgid_"+user.getUID()+"_"+requestid);
int isovertime= Util.getIntValue(request.getParameter("isovertime"),0) ;
String requestname="";      //\u8bf7\u6c42\u540d\u79f0
String requestlevel="";     //\u8bf7\u6c42\u91cd\u8981\u7ea7\u522b 0:\u6b63\u5e38 1:\u91cd\u8981 2:\u7d27\u6025
String requestmark = "" ;   //\u8bf7\u6c42\u7f16\u53f7
String isbill="0";          //\u662f\u5426\u5355\u636e 0:\u5426 1:\u662f
int creater=0;              //\u8bf7\u6c42\u7684\u521b\u5efa\u4eba
int creatertype = 0;        //\u521b\u5efa\u4eba\u7c7b\u578b 0: \u5185\u90e8\u7528\u6237 1: \u5916\u90e8\u7528\u6237
int deleted=0;              //\u8bf7\u6c42\u662f\u5426\u5220\u9664  1:\u662f 0\u6216\u8005\u5176\u5b83 \u5426
int billid=0 ;              //\u5982\u679c\u662f\u5355\u636e,\u5bf9\u5e94\u7684\u5355\u636e\u8868\u7684id
String  fromFlowDoc=Util.null2String(request.getParameter("fromFlowDoc"));  //\u662f\u5426\u4ece\u6d41\u7a0b\u521b\u5efa\u6587\u6863\u800c\u6765
int workflowid=0;           //\u5de5\u4f5c\u6d41id
String workflowtype = "" ;  //\u5de5\u4f5c\u6d41\u79cd\u7c7b
int formid=0;               //\u8868\u5355\u6216\u8005\u5355\u636e\u7684id
int helpdocid = 0;          //\u5e2e\u52a9\u6587\u6863 id
int nodeid=0;               //\u8282\u70b9id
String nodetype="";         //\u8282\u70b9\u7c7b\u578b  0:\u521b\u5efa 1:\u5ba1\u6279 2:\u5b9e\u73b0 3:\u5f52\u6863
String workflowname = "" ;          //\u5de5\u4f5c\u6d41\u540d\u79f0
String isreopen="";                 //\u662f\u5426\u53ef\u4ee5\u91cd\u6253\u5f00
String isreject="";                 //\u662f\u5426\u53ef\u4ee5\u9000\u56de
int isremark = -1 ;              //\u5f53\u524d\u64cd\u4f5c\u72b6\u6001  modify by xhheng @ 20041217 for TD 1291
int handleforwardid = -1;     //\u8f6c\u529e\u72b6\u6001
int takisremark = -1;     //\u610f\u89c1\u5f81\u8be2\u72b6\u6001
String status = "" ;     //\u5f53\u524d\u7684\u64cd\u4f5c\u7c7b\u578b
String needcheck="requestname,";

String topage = Util.null2String(request.getParameter("topage")) ;        //\u8fd4\u56de\u7684\u9875\u9762
topage = URLEncoder.encode(topage);
String isaffirmance=Util.null2String(request.getParameter("isaffirmance"));//\u662f\u5426\u9700\u8981\u63d0\u4ea4\u786e\u8ba4
String reEdit=Util.null2String(request.getParameter("reEdit"));//\u662f\u5426\u4e3a\u7f16\u8f91
// \u5de5\u4f5c\u6d41\u65b0\u5efa\u6587\u6863\u7684\u5904\u7406
String docfileid = Util.null2String(request.getParameter("docfileid"));   // \u65b0\u5efa\u6587\u6863\u7684\u5de5\u4f5c\u6d41\u5b57\u6bb5
String isrejectremind="";
String ischangrejectnode="";
String isselectrejectnode="";
// \u8463\u5e73 2004-12-2 FOR TD1421  \u65b0\u5efa\u6d41\u7a0b\u65f6\u5982\u679c\u70b9\u51fb\u8868\u5355\u4e0a\u7684\u6587\u6863\u65b0\u5efa\u6309\u94ae\uff0c\u5728\u65b0\u5efa\u5b8c\u6587\u6863\u4e4b\u540e\uff0c\u80fd\u8fd4\u56de\u6d41\u7a0b\uff0c\u4f46\u662f\u6587\u6863\u5374\u6ca1\u6709\u6302\u5e26\u8fdb\u6765\u3002
String newdocid = Util.null2String(request.getParameter("newdocid"));        // \u65b0\u5efa\u7684\u6587\u6863

// \u64cd\u4f5c\u7684\u7528\u6237\u4fe1\u606f
FileUpload fu = new FileUpload(request);
String f_weaver_belongto_userid=request.getParameter("f_weaver_belongto_userid");//\u9700\u8981\u589e\u52a0\u7684\u4ee3\u7801
String f_weaver_belongto_usertype=request.getParameter("f_weaver_belongto_usertype");//\u9700\u8981\u589e\u52a0\u7684\u4ee3\u7801
user = HrmUserVarify.getUser(request, response, f_weaver_belongto_userid, f_weaver_belongto_usertype) ;//\u9700\u8981\u589e\u52a0\u7684\u4ee3\u7801
int userid=user.getUID();                   //\u5f53\u524d\u7528\u6237id
//System.out.println("-wfadd--89-222222222222222222222222222222222-userid------"+userid);
int usertype = 0;                           //\u7528\u6237\u5728\u5de5\u4f5c\u6d41\u8868\u4e2d\u7684\u7c7b\u578b 0: \u5185\u90e8 1: \u5916\u90e8
String logintype = user.getLogintype();     //\u5f53\u524d\u7528\u6237\u7c7b\u578b  1: \u7c7b\u522b\u7528\u6237  2:\u5916\u90e8\u7528\u6237
String username = "";
boolean wfmonitor="true".equals(session.getAttribute(userid+"_"+requestid+"wfmonitor"))?true:false;                //\u6d41\u7a0b\u76d1\u63a7\u4eba
boolean haveBackright=false;            //\u5f3a\u5236\u6536\u56de\u6743\u9650
boolean haveOverright=false;            //\u5f3a\u5236\u5f52\u6863\u6743\u9650
boolean haveStopright = false;			//\u6682\u505c\u6743\u9650
boolean haveCancelright = false;		//\u64a4\u9500\u6743\u9650
boolean haveRestartright = false;		//\u542f\u7528\u6743\u9650
String currentnodetype = "";
int currentnodeid = 0;
int desrequestid=0;
int lastOperator=0;
String lastOperateDate="";
String lastOperateTime="";

if(logintype.equals("1"))
	username = Util.toScreen(ResourceComInfo.getResourcename(""+userid),user.getLanguage()) ;
if(logintype.equals("2"))
	username = Util.toScreen(CustomerInfoComInfo.getCustomerInfoname(""+userid),user.getLanguage());

if(logintype.equals("1")) usertype = 0;
if(logintype.equals("2")) usertype = 1;

String sql = "" ;
char flag = Util.getSeparator() ;
String fromPDA= Util.null2String((String)session.getAttribute("loginPAD"));   //\u4ecePDA\u767b\u5f55

status = Util.null2String((String)session.getAttribute(userid+"_"+requestid+"status"));
requestname= Util.null2String((String)session.getAttribute(userid+"_"+requestid+"requestname"));
requestlevel=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"requestlevel"));
requestmark= Util.null2String((String)session.getAttribute(userid+"_"+requestid+"requestmark"));
creater= Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"creater"),0);
creatertype=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"creatertype"),0);
deleted=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"deleted"),0);
workflowid=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"workflowid"),0);
nodeid=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"nodeid"),0);
nodetype=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"nodetype"));
workflowname=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"workflowname"));
workflowtype=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"workflowtype"));
formid=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"formid"),0);
billid=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"billid"),0);
isbill=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"isbill"));
helpdocid=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"helpdocid"),0);
currentnodeid=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"currentnodeid"),0);
currentnodetype=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"currentnodetype"));

lastOperator=Util.getIntValue((String)session.getAttribute(userid+"_"+requestid+"lastOperator"),0);
lastOperateDate=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"lastOperateDate"));
lastOperateTime=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"lastOperateTime"));
String coadsigntype=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"coadsigntype"));

//\u8d44\u4ea7\u81ea\u5b9a\u4e49\u6d41\u7a0b\u7c7b\u578b
    String cptwftype=CptWfUtil.getAllCptWftype(""+workflowid);
    boolean isCptwf=false;
    boolean ismodeCptwf=false;
    if(!"".equals(cptwftype)){
        isCptwf="fetch".equalsIgnoreCase(cptwftype)
                ||"move".equalsIgnoreCase(cptwftype)
                ||"lend".equalsIgnoreCase(cptwftype)
                ||"discard".equalsIgnoreCase(cptwftype)
                ||"back".equalsIgnoreCase(cptwftype)
                ||"loss".equalsIgnoreCase(cptwftype)
                ||"mend".equalsIgnoreCase(cptwftype)
                ||"mode_fetch".equalsIgnoreCase(cptwftype)
                ||"mode_move".equalsIgnoreCase(cptwftype)
                ||"mode_lend".equalsIgnoreCase(cptwftype)
                ||"mode_discard".equalsIgnoreCase(cptwftype)
                ||"mode_back".equalsIgnoreCase(cptwftype)
                ||"mode_loss".equalsIgnoreCase(cptwftype)
                ||"mode_mend".equalsIgnoreCase(cptwftype);
        ismodeCptwf=cptwftype.startsWith("mode_");
    }

//\u5f00\u542f\u4e91\u90e8\u7f72\u540e\uff0c\u81ea\u7531\u8282\u70b9\u6d41\u7a0b\u662f\u5426\u5df2\u5728\u9ad8\u7ea7\u8bbe\u7f6e\u4e2d\u4fee\u6539\u8fc7
PortalUtil putil = new PortalUtil();
boolean cloudstatus = putil.isuserdeploy();
boolean cloudchange = false;
String iscnodefree = "0";
RecordSet.execute("select 1 from Workflow_Initialization where wfid = 35");
if(RecordSet.next()){
	cloudchange = true;
}
if(cloudstatus && cloudchange && workflowid == 35){
	iscnodefree = "1";
}
//\u662f\u5426\u5177\u6709\u5206\u4eab\u6743\u9650
boolean iscanshare = false;
// \u5f53\u524d\u7528\u6237\u8868\u4e2d\u8be5\u8bf7\u6c42\u5bf9\u5e94\u7684\u4fe1\u606f isremark\u4e3a0\u4e3a\u5f53\u524d\u64cd\u4f5c\u8005, isremark\u4e3a1\u4e3a\u5f53\u524d\u88ab\u8f6c\u53d1\u8005,isremark\u4e3a2\u4e3a\u53ef\u8ddf\u8e2a\u67e5\u770b\u8005
//RecordSet.executeProc("workflow_currentoperator_SByUs",userid+""+flag+usertype+flag+requestid+"");
RecordSet.executeSql("select * from workflow_currentoperator where (isremark<8 or isremark>8) and requestid="+requestid+" and userid="+userid+" and usertype="+usertype+" order by isremark,islasttimes desc");
while(RecordSet.next())	{
	iscanshare = true;
    int tempisremark = Util.getIntValue(RecordSet.getString("isremark"),0) ;
	handleforwardid = Util.getIntValue(RecordSet.getString("handleforwardid"),-1) ;     //\u8f6c\u529e\u72b6\u6001
	 takisremark = Util.getIntValue(RecordSet.getString("takisremark"),0) ;     //\u610f\u89c1\u5f81\u8be2\u72b6\u6001

    //if(tempisremark==8){//\u6284\u9001\uff08\u4e0d\u63d0\u4ea4\uff09\u67e5\u770b\u9875\u9762\u5373\u66f4\u65b0\u4e3a\u5df2\u529e\u4e8b\u5b9c\u3002
    //	RecordSet2.executeSql("update workflow_currentoperator set isremark=2,operatedate='"+currentdate+"',operatetime='"+currenttime+"' where requestid="+requestid+" and userid="+userid+" and usertype="+usertype);
    //	response.sendRedirect("/workflow/request/ViewRequest.jsp?requestid="+requestid+"&isremark=8");
    //}
    if( tempisremark == 0 || tempisremark == 1 || tempisremark == 5 || tempisremark == 9|| tempisremark == 7) {                       // \u5f53\u524d\u64cd\u4f5c\u8005\u6216\u88ab\u8f6c\u53d1\u8005
        isremark = tempisremark ;
        break ;
    }
}
if(isremark==-1){
	RecordSet.executeSql("select isremark from workflow_currentoperator where isremark=8 and requestid="+requestid+" and userid="+userid+" and usertype="+usertype);
	while(RecordSet.next())	{
	iscanshare = true;
    int tempisremark = Util.getIntValue(RecordSet.getString("isremark"),0) ;
    if(tempisremark==8){//\u6284\u9001\uff08\u4e0d\u63d0\u4ea4\uff09\u67e5\u770b\u9875\u9762\u5373\u66f4\u65b0\u4e3a\u5df2\u529e\u4e8b\u5b9c\u3002
    	//RecordSet2.executeSql("update workflow_currentoperator set isremark=2,operatedate='"+currentdate+"',operatetime='"+currenttime+"' where requestid="+requestid+" and userid="+userid+" and usertype="+usertype);
    	//\u65f6\u95f4\u4e0e\u6570\u636e\u5e93\u4fdd\u6301\u4e00\u81f4\uff0c\u6240\u4ee5\u91c7\u7528\u5b58\u50a8\u8fc7\u7a0b\u6765\u66f4\u65b0\u6570\u636e\u5e93\u3002
    	RecordSet2.executeProc("workflow_CurrentOperator_Copy",requestid+""+flag+userid+flag+usertype+"");
    	if(currentnodetype.equals("3")){
    		RecordSet2.executeSql("update workflow_currentoperator set iscomplete=1 where requestid="+requestid+" and userid="+userid+" and usertype="+usertype);
    	} 
    	response.sendRedirect("/workflow/request/ViewRequest.jsp?requestid="+requestid+"&isremark=8&fromFlowDoc="+fromFlowDoc+"&f_weaver_belongto_userid="+userid+"&f_weaver_belongto_usertype="+usertype);
    	return;
    }
	}
}
if( isremark != 0 && isremark != 1&& isremark != 5 && isremark != 9&& isremark != 7) {
    response.sendRedirect("/notice/noright.jsp");
    return;
}
int currentstatus = -1;//\u5f53\u524d\u6d41\u7a0b\u72b6\u6001(\u5bf9\u5e94\u6d41\u7a0b\u6682\u505c\u3001\u64a4\u9500\u800c\u8a00)
String isModifyLog = "";
RecordSet.executeSql("select t1.ismodifylog,t2.currentstatus from workflow_base t1, workflow_requestbase t2 where t1.id=t2.workflowid and t2.requestid="+requestid);
if(RecordSet.next()) {
	currentstatus = Util.getIntValue(RecordSet.getString("currentstatus"));
	isModifyLog = RecordSet.getString("isModifyLog");
	
}
haveStopright = WfFunctionManageUtil.haveStopright(currentstatus,creater,user,currentnodetype,requestid,false);//\u6d41\u7a0b\u4e0d\u4e3a\u6682\u505c\u6216\u8005\u64a4\u9500\u72b6\u6001\uff0c\u5f53\u524d\u7528\u6237\u4e3a\u6d41\u7a0b\u53d1\u8d77\u4eba\u6216\u8005\u7cfb\u7edf\u7ba1\u7406\u5458\uff0c\u5e76\u4e14\u6d41\u7a0b\u72b6\u6001\u4e0d\u4e3a\u521b\u5efa\u548c\u5f52\u6863
haveCancelright = WfFunctionManageUtil.haveCancelright(currentstatus,creater,user,currentnodetype,requestid,false);//\u6d41\u7a0b\u4e0d\u4e3a\u64a4\u9500\u72b6\u6001\uff0c\u5f53\u524d\u7528\u6237\u4e3a\u6d41\u7a0b\u53d1\u8d77\u4eba\uff0c\u5e76\u4e14\u6d41\u7a0b\u72b6\u6001\u4e0d\u4e3a\u521b\u5efa\u548c\u5f52\u6863
haveRestartright = WfFunctionManageUtil.haveRestartright(currentstatus,creater,user,currentnodetype,requestid,false);//\u6d41\u7a0b\u4e3a\u6682\u505c\u6216\u8005\u64a4\u9500\u72b6\u6001\uff0c\u5f53\u524d\u7528\u6237\u4e3a\u7cfb\u7edf\u7ba1\u7406\u5458\uff0c\u5e76\u4e14\u6d41\u7a0b\u72b6\u6001\u4e0d\u4e3a\u521b\u5efa\u548c\u5f52\u6863
if(currentstatus>-1&&!haveCancelright&&!haveRestartright)
{
	String tips = "";
	if(currentstatus==0)
	{
		tips = SystemEnv.getHtmlLabelName(26154,user.getLanguage());//\u6d41\u7a0b\u5df2\u6682\u505c,\u8bf7\u4e0e\u6d41\u7a0b\u53d1\u8d77\u4eba\u6216\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb!
	}
	else
	{
		tips = SystemEnv.getHtmlLabelName(26155,user.getLanguage());//\u6d41\u7a0b\u5df2\u64a4\u9500,\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb!
	}

      out.write(_jsp_string5, 0, _jsp_string5.length);
      out.print((tips));
      out.write(_jsp_string6, 0, _jsp_string6.length);
      out.print((isovertime));
      out.write(_jsp_string7, 0, _jsp_string7.length);
      
    return ;
}
String IsPendingForward=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsPendingForward"));
String IsTakingOpinions=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsTakingOpinions"));
String IsHandleForward=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsHandleForward"));
String IsBeForward=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsBeForward"));
String IsBeForwardTodo=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsBeForwardTodo"));
String IsBeForwardAlready=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsBeForwardAlready"));  // \u5df2\u529e\u8f6c\u53d1
String IsBeForwardSubmitAlready=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsBeForwardSubmitAlready"));
String IsBeForwardSubmitNotaries=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsBeForwardSubmitNotaries"));
String IsFromWFRemark_T=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"IsFromWFRemark_T"));

RecordSet.executeSql("select * from workflow_flownode where workflowid="+workflowid+" and nodeid="+nodeid);
if(RecordSet.next()){
IsPendingForward=Util.null2String(RecordSet.getString("IsPendingForward"));
IsTakingOpinions=Util.null2String(RecordSet.getString("IsTakingOpinions"));
IsHandleForward=Util.null2String(RecordSet.getString("IsHandleForward"));
}

boolean canForwd = false;
if(isremark == 1 && takisremark ==2 && "1".equals(IsPendingForward)){  //\u5f81\u8be2\u610f\u89c1\u56de\u590d\
canForwd = true;
}
if(takisremark !=2){
if(("0".equals(IsFromWFRemark_T) && "1".equals(IsBeForwardTodo)) 
        || ("1".equals(IsFromWFRemark_T) && "1".equals(IsBeForwardAlready)) 
        || ("2".equals(IsFromWFRemark_T) && "1".equals(IsBeForward))){
	canForwd = true;
}
}
boolean IsCanSubmit="true".equals(session.getAttribute(userid+"_"+requestid+"IsCanSubmit"))?true:false;
boolean IsFreeWorkflow="true".equals(session.getAttribute(userid+"_"+requestid+"IsFreeWorkflow"))?true:false;
boolean isImportDetail="true".equals(session.getAttribute(userid+"_"+requestid+"isImportDetail"))?true:false;
session.setAttribute(userid+"_"+requestid+"isremark",""+isremark);
boolean IsCanModify="true".equals(session.getAttribute(userid+"_"+requestid+"IsCanModify"))?true:false;
//String coadisforward=Util.null2String((String)session.getAttribute(userid+"_"+requestid+"coadisforward"));
boolean coadCanSubmit="true".equals(session.getAttribute(userid+"_"+requestid+"coadCanSubmit"))?true:false;
boolean isMainSubmitted="true".equals(session.getAttribute(userid+"_"+requestid+"isMainSubmitted"))?true:false;
RecordSet.executeSql("select isremark,nodeid from workflow_currentoperator where (isremark<8 or isremark>8) and requestid="+requestid+" and userid="+userid+" and usertype="+usertype+" order by isremark,islasttimes desc");
while(RecordSet.next())	{
    int tempisremark = Util.getIntValue(RecordSet.getString("isremark"),0) ;
    int tmpnodeid=Util.getIntValue(RecordSet.getString("nodeid"));
    if( tempisremark == 0 || tempisremark == 1 || tempisremark == 5 || tempisremark == 9|| tempisremark == 7) {                       // \u5f53\u524d\u64cd\u4f5c\u8005\u6216\u88ab\u8f6c\u53d1\u8005
        isremark = tempisremark ;
        nodeid=tmpnodeid;
        nodetype=WFLinkInfo_nf.getNodeType(nodeid);
        break ;
    }
}
//add by mackjoe at 2005-12-20 \u589e\u52a0\u6a21\u677f\u5e94\u7528
String ismode="";
int modeid=0;
int isform=0;
int showdes=0;
String isFormSignatureOfThisJsp=null;
String FreeWorkflowname="";
RecordSet.executeSql("select ismode,showdes,isFormSignature,freewfsetcurnameen,freewfsetcurnametw,freewfsetcurnamecn from workflow_flownode where workflowid="+workflowid+" and nodeid="+nodeid);
if(RecordSet.next()){
    ismode=Util.null2String(RecordSet.getString("ismode"));
    showdes=Util.getIntValue(Util.null2String(RecordSet.getString("showdes")),0);
	isFormSignatureOfThisJsp = Util.null2String(RecordSet.getString("isFormSignature"));
    if(user.getLanguage() == 8){
        FreeWorkflowname=Util.null2String(RecordSet.getString("freewfsetcurnameen"));
    }
    else if(user.getLanguage() == 9){
        FreeWorkflowname=Util.null2String(RecordSet.getString("freewfsetcurnametw"));
    }
    else {
        FreeWorkflowname=Util.null2String(RecordSet.getString("freewfsetcurnamecn"));
    }
}
int isUseWebRevisionOfThisJsp = Util.getIntValue(new weaver.general.BaseBean().getPropValue("weaver_iWebRevision","isUseWebRevision"), 0);
if(isUseWebRevisionOfThisJsp != 1){
	isFormSignatureOfThisJsp = "";
}
if("".equals(FreeWorkflowname.trim())){
	FreeWorkflowname = SystemEnv.getHtmlLabelName(21781,user.getLanguage());
}
session.setAttribute(userid+"_"+requestid+"FreeWorkflowname",FreeWorkflowname);

if(ismode.equals("1") && showdes!=1){
    RecordSet.executeSql("select id from workflow_nodemode where isprint='0' and workflowid="+workflowid+" and nodeid="+nodeid);
    if(RecordSet.next()){
        modeid=RecordSet.getInt("id");
    }else{
            RecordSet.executeSql("select id from workflow_formmode where isprint='0' and formid="+formid+" and isbill='"+isbill+"'");
        if(RecordSet.next()){
            modeid=RecordSet.getInt("id");
            isform=1;
        }
    }
}else if("2".equals(ismode)){
	weaver.workflow.exceldesign.HtmlLayoutOperate htmlLayoutOperate = new weaver.workflow.exceldesign.HtmlLayoutOperate();
	modeid = htmlLayoutOperate.getActiveHtmlLayout(workflowid, nodeid, 0);
}

//---------------------------------------------------------------------------------
//\u8de8\u6d4f\u89c8\u5668\u6dfb\u52a0-\u5f53\u524d\u6d4f\u89c8\u5668\u662f\u975eIE\uff0c\u8868\u5355\u4e3a\u5355\u636e\uff0c\u5e76\u4e14\u662f\u672a\u4fee\u6539\u7684\u5355\u636e\uff0c\u5219\u8df3\u8f6c\u81f3\u516c\u5171\u9875\u9762 START
//---------------------------------------------------------------------------------
//\u6a21\u677f\u6a21\u5f0f-\u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u975eIE\u5219\u81ea\u52a8\u4f7f\u7528\u4e00\u822c\u6a21\u5f0f\u6765\u663e\u793a\u6d41\u7a0b START 2011-11-23 CC
//if (!isIE.equalsIgnoreCase("true") && ismode.equals("1")) {
String isIE = (String)session.getAttribute("browser_isie");
if (isIE == null || "".equals(isIE)) {
	isIE = "true";
}
//\u6a21\u677f\u6a21\u5f0f-\u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u975eIE\u5219\u81ea\u52a8\u4f7f\u7528\u4e00\u822c\u6a21\u5f0f\u6765\u663e\u793a\u6d41\u7a0b END
//---------------------------------------------------------------------------------
//\u8de8\u6d4f\u89c8\u5668\u6dfb\u52a0-\u5f53\u524d\u6d4f\u89c8\u5668\u662f\u975eIE\uff0c\u8868\u5355\u4e3a\u5355\u636e\uff0c\u5e76\u4e14\u662f\u672a\u4fee\u6539\u7684\u5355\u636e\uff0c\u5219\u8df3\u8f6c\u81f3\u516c\u5171\u9875\u9762 END
//---------------------------------------------------------------------------------


//end by mackjoe
ArrayList specialBillIDList = sysPubRefComInfo.getDetailCodeList("SpecialBillID");
boolean isSpecialBill = specialBillIDList.contains(""+formid);
/*------ xwj for td3131 20051117 ----- begin--------*/
if(isSpecialBill==true && isbill.equals("1")){
    topage = URLEncoder.encode(topage);
    response.sendRedirect("ManageRequestNoFormBill.jsp?f_weaver_belongto_userid="+userid+"&f_weaver_belongto_usertype="+usertype+"&fromFlowDoc="+fromFlowDoc+"&fromPDA="+fromPDA+"&requestid="+requestid+"&message="+message+"&topage="+topage+"&docfileid="+
            docfileid+"&newdocid="+newdocid+"&isovertime="+isovertime+"&isrequest="+isrequest+"&isaffirmance="+isaffirmance+"&reEdit="+reEdit+"&seeflowdoc="+seeflowdoc+"&isworkflowdoc="+isworkflowdoc+"&isfromtab="+isfromtab);
    return;
}
int IsFreeNode=0;
/*------ xwj for td3131 20051117 ----- end----------*/
RecordSet.executeProc("workflow_Nodebase_SelectByID",nodeid+"");
if(RecordSet.next()){
	isreopen=RecordSet.getString("isreopen");
	isreject=RecordSet.getString("isreject");
	IsFreeNode=Util.getIntValue(RecordSet.getString("IsFreeNode"),0);
}
// \u8bb0\u5f55\u67e5\u770b\u65e5\u5fd7
weaver.workflow.request.WorkflowIsFreeStartNode stnode=new weaver.workflow.request.WorkflowIsFreeStartNode();
String nodeidss= stnode.getIsFreeStartNode(""+nodeid);
String freedis=stnode.getNodeid(nodeidss);
String isornotFree=stnode.isornotFree(""+nodeid);
WFManager.setWfid(Util.getIntValue(""+workflowid));
WFManager.getWfInfo();
String isFree = WFManager.getIsFree();
 //\u5224\u65ad\u662f\u4e0d\u662f\u521b\u5efa\u4fdd\u5b58
 boolean iscreate=stnode.IScreateNode(""+requestid); 
  if(!isornotFree.equals("")&&!freedis.equals("")&&!iscreate&&(!"1".equals(isFree) || !"2".equals(nodetype))){
   isreject = "1";
 }
String isTriDiffWorkflow=null; 
RecordSet.executeSql("select a.isTriDiffWorkflow, b.* from workflow_base a, workflow_flownode b where a.id = b.workflowid and a.id="+workflowid + " and b.nodeid=" + nodeid);

if(RecordSet.next()){
	isTriDiffWorkflow=Util.null2String(RecordSet.getString("isTriDiffWorkflow"));
    isrejectremind=Util.null2String(RecordSet.getString("isrejectremind"));
    ischangrejectnode=Util.null2String(RecordSet.getString("ischangrejectnode"));
	  isselectrejectnode=Util.null2String(RecordSet.getString("isselectrejectnode"));

} 
/*--  xwj for td2104 on 20050802 begin  --*/
boolean isOldWf = false;
RecordSet3.executeSql("select nodeid from workflow_currentoperator where requestid = " + requestid);
while(RecordSet3.next()){
	if(RecordSet3.getString("nodeid") == null || "".equals(RecordSet3.getString("nodeid")) || "-1".equals(RecordSet3.getString("nodeid"))){
			isOldWf = true;
	}
}

if(! currentnodetype.equals("3") )
    RecordSet.executeProc("SysRemindInfo_DeleteHasnewwf",""+userid+flag+usertype+flag+requestid);
else
    RecordSet.executeProc("SysRemindInfo_DeleteHasendwf",""+userid+flag+usertype+flag+requestid);

String imagefilename = "/images/hdReport_wev8.gif";
String titlename =  SystemEnv.getHtmlLabelName(18015,user.getLanguage())+":"
	                +SystemEnv.getHtmlLabelName(553,user.getLanguage())+" - "+Util.toScreen(workflowname,user.getLanguage())+ " - " + status + " "+"<span id='requestmarkSpan'>"+requestmark+"</span>";//Modify by \u6768\u56fd\u751f 2004-10-26 For TD1231
String needfav ="1";
String needhelp ="";
//if(helpdocid !=0 ) {titlename=titlename + "<img src=/images/help_wev8.gif style=\"CURSOR:hand\" width=12 onclick=\"location.href='/docs/docs/DocDsp.jsp?id="+helpdocid+"'\">";}
//\u5224\u65ad\u662f\u5426\u6709\u6d41\u7a0b\u521b\u5efa\u6587\u6863\uff0c\u5e76\u4e14\u5728\u8be5\u8282\u70b9\u662f\u6709\u6b63\u6587\u5b57\u6bb5
boolean docFlag=flowDoc.haveDocFiled(""+workflowid,""+nodeid);
String  docFlagss=docFlag?"1":"0";
session.setAttribute("requestAdd"+requestid,docFlagss);
//\u5224\u65ad\u6b63\u6587\u5b57\u6bb5\u662f\u5426\u663e\u793a\u9009\u62e9\u6309\u94ae
ArrayList newTextList = flowDoc.getDocFiled(""+workflowid);
if(newTextList != null && newTextList.size() > 0){
  String flowDocField = ""+newTextList.get(1);
  String newTextNodes = ""+newTextList.get(5);
  session.setAttribute("requestFlowDocField"+user.getUID(),flowDocField);
  session.setAttribute("requestAddNewNodes"+user.getUID(),newTextNodes);
}

      out.write(_jsp_string8, 0, _jsp_string8.length);
      //TD9145
Prop prop = Prop.getInstance();
String ifchangstatus = Util.null2String(prop.getPropValue(GCONST.getConfigFile() , "ecology.changestatus"));
String submitname = "" ; // \u63d0\u4ea4\u6309\u94ae\u7684\u540d\u79f0 : \u521b\u5efa, \u5ba1\u6279, \u5b9e\u73b0
String forwardName = "";//\u8f6c\u53d1
String takingopinionsName = ""; //\u5f81\u6c42\u610f\u89c1
String HandleForwardName = ""; //\u8f6c\u529e
String forhandName = ""; //\u8f6c\u529e\u63d0\u4ea4
String forhandbackName = ""; //\u8f6c\u529e\u9700\u53cd\u9988
String forhandnobackName = ""; //\u8f6c\u529e\u4e0d\u9700\u53cd\u9988
String givingopinionsName ="";  //\u56de\u590d
String givingOpinionsnobackName = ""; // \u56de\u590d\u4e0d\u53cd\u9988
String givingOpinionsbackName = ""; // \u56de\u590d\u9700\u53cd\u9988

String saveName = "";//\u4fdd\u5b58
String rejectName = "";//\u9000\u56de
String forsubName = "";//\u8f6c\u53d1\u63d0\u4ea4
String ccsubName = "";//\u6284\u9001\u63d0\u4ea4
String newWFName = "";//\u65b0\u5efa\u6d41\u7a0b\u6309\u94ae
String newSMSName = "";//\u65b0\u5efa\u77ed\u4fe1\u6309\u94ae
String haswfrm = "";//\u662f\u5426\u4f7f\u7528\u65b0\u5efa\u6d41\u7a0b\u6309\u94ae
String hassmsrm = "";//\u662f\u5426\u4f7f\u7528\u65b0\u5efa\u77ed\u4fe1\u6309\u94ae
int t_workflowid = 0;//\u65b0\u5efa\u6d41\u7a0b\u7684ID
String subnobackName = "";//\u63d0\u4ea4\u4e0d\u9700\u53cd\u9988
String subbackName = "";//\u63d0\u4ea4\u9700\u53cd\u9988
String hasnoback = "";//\u4f7f\u7528\u63d0\u4ea4\u4e0d\u9700\u53cd\u9988\u6309\u94ae
String hasback = "";//\u4f7f\u7528\u63d0\u4ea4\u9700\u53cd\u9988\u6309\u94ae
String forsubnobackName = "";//\u8f6c\u53d1\u6279\u6ce8\u4e0d\u9700\u53cd\u9988
String forsubbackName = "";//\u8f6c\u53d1\u6279\u6ce8\u9700\u53cd\u9988
String hasfornoback = "";//\u4f7f\u7528\u8f6c\u53d1\u6279\u6ce8\u4e0d\u9700\u53cd\u9988\u6309\u94ae
String hasforback = "";//\u4f7f\u7528\u8f6c\u53d1\u6279\u6ce8\u9700\u53cd\u9988\u6309\u94ae
String ccsubnobackName = "";//\u6284\u9001\u6279\u6ce8\u4e0d\u9700\u53cd\u9988
String ccsubbackName = "";//\u6284\u9001\u6279\u6ce8\u9700\u53cd\u9988
String hasccnoback = "";//\u4f7f\u7528\u6284\u9001\u6279\u6ce8\u4e0d\u9700\u53cd\u9988\u6309\u94ae
String hasccback = "";//\u4f7f\u7528\u6284\u9001\u6279\u6ce8\u9700\u53cd\u9988\u6309\u94ae
String newOverTimeName=""; //\u8d85\u65f6\u8bbe\u7f6e\u6309\u94ae
String hasovertime="";    //\u662f\u5426\u4f7f\u7528\u8d85\u65f6\u8bbe\u7f6e\u6309\u94ae
String newCHATSName = "";//\u65b0\u5efa\u5fae\u4fe1\u6309\u94ae (QC:98106)
String haschats = "";//\u662f\u5426\u4f7f\u7528\u65b0\u5efa\u5fae\u4fe1\u6309\u94ae (QC:98106)

String hasforhandback = "";  //\u662f\u5426\u8f6c\u529e\u53cd\u9988
String hasforhandnoback = ""; //\u662f\u5426\u8f6c\u529e\u4e0d\u9700\u53cd\u9988
String hastakingOpinionsback = ""; //\u662f\u5426\u56de\u590d\u53cd\u9988
String hastakingOpinionsnoback = "";//\u662f\u5426\u56de\u590d\u4e0d\u9700\u53cd\u9988
String isSubmitDirect =  Util.null2String(request.getParameter("isSubmitDirect")); // \u662f\u5426\u542f\u7528\u63d0\u4ea4\u81f3\u9000\u56de\u8282\u70b9
String submitDirectName = ""; // \u63d0\u4ea4\u81f3\u9000\u56de\u8282\u70b9\u6309\u94ae\u540d\u79f0
int subbackCtrl = 0;
int forhandbackCtrl = 0;
int forsubbackCtrl = 0;
int ccsubbackCtrl = 0;
int takingOpinionsbackCtrl = 0;

String sqlselectName = "select * from workflow_nodecustomrcmenu where wfid="+workflowid+" and nodeid="+nodeid;
String sqlselectNewName = "select * from workflow_nodeCustomNewMenu where enable = 1 and wfid=" + workflowid + " and nodeid=" + nodeid + " order by menuType, id";
if(isremark != 0){
	RecordSet.executeSql("select nodeid from workflow_currentoperator c where c.requestid="+requestid+" and c.userid="+userid+" and c.usertype="+usertype+" and c.isremark='"+isremark+"' ");
	String tmpnodeid="";
	if(RecordSet.next()){
		tmpnodeid = Util.null2String(RecordSet.getString("nodeid"));
	}
	sqlselectName = "select * from workflow_nodecustomrcmenu where wfid="+workflowid+" and nodeid="+tmpnodeid;
	sqlselectNewName = "select * from workflow_nodeCustomNewMenu where enable = 1 and wfid=" + workflowid + " and nodeid=" + tmpnodeid + " order by menuType, id";
}
RecordSet.executeSql(sqlselectName);

ArrayList newMenuList0 = new ArrayList(); // \u65b0\u5efa\u6d41\u7a0b\u83dc\u5355\u5217\u8868
ArrayList newMenuList1 = new ArrayList(); // \u65b0\u5efa\u77ed\u4fe1\u83dc\u5355\u5217\u8868
ArrayList newMenuList2 = new ArrayList(); // \u65b0\u5efa\u5fae\u4fe1\u83dc\u5355\u5217\u8868
RecordSet.executeSql(sqlselectNewName);
while(RecordSet.next()) {
	int menuType = Util.getIntValue(RecordSet.getString("menuType"), -1);
	if(menuType < 0) {
		continue;
	}
	HashMap newMenuMap = new HashMap();
	newMenuMap.put("id", Util.getIntValue(RecordSet.getString("id"), 0));
	newMenuMap.put("newName", Util.null2String(RecordSet.getString("newName" + user.getLanguage())));
	if(0 == menuType) {
		newMenuMap.put("workflowid", Util.getIntValue(RecordSet.getString("workflowid"), 0));
		newMenuList0.add(newMenuMap);
	}else if(1 == menuType) {
		newMenuList1.add(newMenuMap);
	}else if(2 == menuType) {
		newMenuList2.add(newMenuMap);
	}
}
String lastnodeid = ""; // \u4e0a\u4e00\u6b21\u9000\u56de\u64cd\u4f5c\u7684\u8282\u70b9id
String isSubmitDirectNode = ""; // \u4e0a\u4e00\u6b21\u9000\u56de\u64cd\u4f5c\u7684\u8282\u70b9\u662f\u5426\u542f\u7528\u9000\u56de\u540e\u518d\u63d0\u4ea4\u76f4\u8fbe\u672c\u8282\u70b9
String sql_isreject = " select a.nodeid lastnodeid, a.logtype from workflow_requestlog a, workflow_nownode b where a.requestid = b.requestid and a.destnodeid = b.nownodeid "
	+ " and b.requestid=" + requestid + " and a.destnodeid=" + nodeid + " and a.nodeid != " + nodeid + " order by a.logid desc";
RecordSet.executeSql(sql_isreject);
while(RecordSet.next()) {
	String logtype = Util.null2String(RecordSet.getString("logtype"));
	if("3".equals(logtype)) {
		lastnodeid = Util.null2String(RecordSet.getString("lastnodeid"));
		break;
	}
	if("0".equals(logtype) || "2".equals(logtype) || "e".equals(logtype) || "i".equals(logtype) || "j".equals(logtype)){
		break;
	}
}
if(!"".equals(lastnodeid)&&!WFLinkInfo_nf.isCanSubmitToRejectNode(requestid,currentnodeid,Util.getIntValue(lastnodeid,0))){
	lastnodeid = "";
}
if(!"".equals(lastnodeid)) {
	RecordSet.executeSql("select * from workflow_flownode where workflowid=" + workflowid + " and nodeid=" + lastnodeid);
	if(RecordSet.next()) {
		isSubmitDirectNode = Util.null2String(RecordSet.getString("isSubmitDirectNode"));
	}
}


      out.write(_jsp_string1, 0, _jsp_string1.length);
      
//add by ben for relationgrequests 2006-05-09
int haslinkworkflow=Util.getIntValue(String.valueOf(session.getAttribute("haslinkworkflow")),0);
if(haslinkworkflow==1&&!isrequest.equals("1")){
    session.setAttribute("desrequestid",""+requestid);
	desrequestid=requestid;
}else{
    if(haslinkworkflow==0&&!isrequest.equals("1")){
        session.removeAttribute("desrequestid");
        int linkwfnum=Util.getIntValue(String.valueOf(session.getAttribute("slinkwfnum")),0);
        for(int i=0;i<=linkwfnum;i++){
            session.removeAttribute("resrequestid"+i);
        }
        session.removeAttribute("slinkwfnum");
    }
}

//\u6dfb\u52a0\u4e34\u65f6\u6388\u6743\u4fe1\u606f
if(haslinkworkflow == 1){
    RequestShare.addRequestViewRightInfo(request);
}

      out.write(_jsp_string9, 0, _jsp_string9.length);
      
		int printmodeid=0;
		int modeprintdes=0;
		RecordSet.executeSql("select printdes from workflow_flownode where workflowid="+workflowid+" and nodeid="+nodeid);
		if(RecordSet.next()){
			modeprintdes=Util.getIntValue(Util.null2String(RecordSet.getString("printdes")),0);
		}
		if(  modeprintdes!=1){
		    RecordSet.executeSql("select id from workflow_nodemode where isprint='1' and workflowid="+workflowid+" and nodeid="+nodeid);
		    if(RecordSet.next()){
		    	printmodeid=RecordSet.getInt("id");
		    }else{
		        RecordSet.executeSql("select id from workflow_formmode where formid="+formid+" and isbill='"+isbill+"' order by isprint desc");
		        while(RecordSet.next()){
		            if(modeid<1){
		            	printmodeid=RecordSet.getInt("id");
		            }
		        }
		    }
		}
		
      out.write(_jsp_string10, 0, _jsp_string10.length);
      out.print((SystemEnv.getHtmlLabelName(826,user.getLanguage())+SystemEnv.getHtmlLabelName(21407,user.getLanguage())));
      out.write(_jsp_string11, 0, _jsp_string11.length);
      out.print((formid));
      out.write(_jsp_string12, 0, _jsp_string12.length);
      out.print((isbill));
      out.write(_jsp_string13, 0, _jsp_string13.length);
      out.print((newenddate));
      out.write(_jsp_string14, 0, _jsp_string14.length);
      out.print((newfromdate));
      out.write(_jsp_string15, 0, _jsp_string15.length);
      out.print((newenddate));
      out.write(_jsp_string16, 0, _jsp_string16.length);
      out.print((newfromdate));
      out.write(_jsp_string17, 0, _jsp_string17.length);
      out.print((newfromdate));
      out.write(_jsp_string18, 0, _jsp_string18.length);
      out.print((newfromdate));
      out.write(_jsp_string19, 0, _jsp_string19.length);
      out.print((newenddate));
      out.write(_jsp_string20, 0, _jsp_string20.length);
      out.print((newenddate));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      out.print((newenddate));
      out.write(_jsp_string22, 0, _jsp_string22.length);
      out.print((SystemEnv.getHtmlLabelName(15273,userlanguage)));
      out.write(_jsp_string23, 0, _jsp_string23.length);
      
            RecordSet rsss = new RecordSet();
            String fromdateid ="";
            String sql11="Select id from workflow_billfield where billid= 181 and fieldname='fromDate' ";
            rsss.executeSql(sql11);
            if(rsss.next()){
               fromdateid=rsss.getString("id");
            }
            String todateid="";
            String sql22="Select id from workflow_billfield where billid= 181 and fieldname='toDate' ";
            rsss.executeSql(sql22);
            if(rsss.next()){
               todateid=rsss.getString("id");
            }            
            String fromtimeid ="";
            String sql33="Select id from workflow_billfield where billid= 181 and fieldname='fromTime' ";
            rsss.executeSql(sql33);
            if(rsss.next()){
               fromtimeid=rsss.getString("id");
            }  
            String totimeid ="";
            String sql44="Select id from workflow_billfield where billid= 181 and fieldname='toTime' ";
            rsss.executeSql(sql44);
            if(rsss.next()){
               totimeid=rsss.getString("id");
            } 
            
                    String dbType =   rsss.getDBType();
                    String fromdate =  "field"+fromdateid;
                    String todate     = "field"+todateid;
                    String fromtime   = "field"+fromtimeid;
                    String totime     = "field"+totimeid;             
                    /*
                    String dbType =   rsss.getDBType();
                    String fromdate =  dbType=="sqlserver"?"field686":"field767";
                    String todate     =          dbType=="sqlserver"?"field688":"field769";
                    String fromtime   =     dbType=="sqlserver"?"field687":"field768";
                    String totime        =dbType=="sqlserver"?"field689":"field770";
                    */

            
      out.write(_jsp_string24, 0, _jsp_string24.length);
      out.print((fromdate));
      out.write(_jsp_string25, 0, _jsp_string25.length);
      out.print((fromdate));
      out.write(_jsp_string26, 0, _jsp_string26.length);
      out.print((fromdate));
      out.write(_jsp_string27, 0, _jsp_string27.length);
      out.print((todate));
      out.write(_jsp_string28, 0, _jsp_string28.length);
      out.print((todate));
      out.write(_jsp_string29, 0, _jsp_string29.length);
      out.print((todate));
      out.write(_jsp_string30, 0, _jsp_string30.length);
      out.print((fromtime));
      out.write(_jsp_string31, 0, _jsp_string31.length);
      out.print((fromtime));
      out.write(_jsp_string32, 0, _jsp_string32.length);
      out.print((totime));
      out.write(_jsp_string33, 0, _jsp_string33.length);
      out.print((totime));
      out.write(_jsp_string34, 0, _jsp_string34.length);
      out.print((SystemEnv.getHtmlLabelName(17362,userlanguage)));
      out.write(_jsp_string35, 0, _jsp_string35.length);
      out.print((fromdate));
      out.write(_jsp_string36, 0, _jsp_string36.length);
      out.print((todate));
      out.write(_jsp_string37, 0, _jsp_string37.length);
      out.print((SystemEnv.getHtmlLabelName(15273,userlanguage)));
      out.write(_jsp_string38, 0, _jsp_string38.length);
      out.print((SystemEnv.getHtmlLabelName(24981,userlanguage)));
      out.write(_jsp_string39, 0, _jsp_string39.length);
      out.print((SystemEnv.getHtmlLabelName(26315,userlanguage)));
      out.write(_jsp_string40, 0, _jsp_string40.length);
      out.print((SystemEnv.getHtmlLabelName(17690,userlanguage)));
      out.write(_jsp_string41, 0, _jsp_string41.length);
      out.print((SystemEnv.getHtmlLabelName(18407,user.getLanguage())));
      out.write(_jsp_string42, 0, _jsp_string42.length);
      out.print((requestid));
      out.write(_jsp_string43, 0, _jsp_string43.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string47, 0, _jsp_string47.length);
      out.print((SystemEnv.getHtmlLabelName(26255,user.getLanguage())));
      out.write(_jsp_string48, 0, _jsp_string48.length);
      out.print((requestid));
      out.write(_jsp_string49, 0, _jsp_string49.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string50, 0, _jsp_string50.length);
      out.print((SystemEnv.getHtmlLabelName(26255,user.getLanguage())));
      out.write(_jsp_string51, 0, _jsp_string51.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string52, 0, _jsp_string52.length);
      
		boolean isnewprint = new weaver.workflow.request.WFDocPrintUtil().getWFIsNewPrint(nodeid);
		if(isnewprint){
			
      out.write(_jsp_string53, 0, _jsp_string53.length);
      out.print((requestid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((nodeid));
      out.write(_jsp_string55, 0, _jsp_string55.length);
      
		}else{
			
      out.write(_jsp_string56, 0, _jsp_string56.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string57, 0, _jsp_string57.length);
      out.print((printmodeid));
      out.write(_jsp_string58, 0, _jsp_string58.length);
      
		}
	
      out.write(_jsp_string59, 0, _jsp_string59.length);
      out.print((user.getUID()));
      out.write(',');
      out.print((user.getLogintype()));
      out.write(_jsp_string60, 0, _jsp_string60.length);
      out.print((request.getRemoteAddr()));
      out.write(_jsp_string61, 0, _jsp_string61.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string62, 0, _jsp_string62.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string63, 0, _jsp_string63.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string64, 0, _jsp_string64.length);
      out.print((SystemEnv.getHtmlLabelName(32818,user.getLanguage())));
      out.write(_jsp_string65, 0, _jsp_string65.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string66, 0, _jsp_string66.length);
      out.print((fromFlowDoc));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string67, 0, _jsp_string67.length);
      out.print((isovertime));
      out.write(_jsp_string68, 0, _jsp_string68.length);
      out.print((topage));
      out.write(_jsp_string69, 0, _jsp_string69.length);
      out.print((isCptwf ));
      out.write(_jsp_string70, 0, _jsp_string70.length);
       if("1".equals(isSubmitDirectNode)) { 
      out.write(_jsp_string71, 0, _jsp_string71.length);
      out.print((lastnodeid ));
      out.write(_jsp_string72, 0, _jsp_string72.length);
       } 
      out.write(_jsp_string73, 0, _jsp_string73.length);
       if("1".equals(isSubmitDirectNode)) { 
      out.write(_jsp_string74, 0, _jsp_string74.length);
      out.print((lastnodeid ));
      out.write(_jsp_string75, 0, _jsp_string75.length);
       } 
      out.write(_jsp_string76, 0, _jsp_string76.length);
      out.print((isCptwf ));
      out.write(_jsp_string70, 0, _jsp_string70.length);
       if("1".equals(isSubmitDirectNode)) { 
      out.write(_jsp_string71, 0, _jsp_string71.length);
      out.print((lastnodeid ));
      out.write(_jsp_string72, 0, _jsp_string72.length);
       } 
      out.write(_jsp_string77, 0, _jsp_string77.length);
       if("1".equals(isSubmitDirectNode)) { 
      out.write(_jsp_string74, 0, _jsp_string74.length);
      out.print((lastnodeid ));
      out.write(_jsp_string75, 0, _jsp_string75.length);
       } 
      out.write(_jsp_string78, 0, _jsp_string78.length);
       if("1".equals(isSubmitDirectNode)) { 
      out.write(_jsp_string79, 0, _jsp_string79.length);
      out.print((lastnodeid ));
      out.write(_jsp_string80, 0, _jsp_string80.length);
       } 
      out.write(_jsp_string81, 0, _jsp_string81.length);
       if("1".equals(isSubmitDirectNode)) { 
      out.write(_jsp_string79, 0, _jsp_string79.length);
      out.print((lastnodeid ));
      out.write(_jsp_string80, 0, _jsp_string80.length);
       } 
      out.write(_jsp_string82, 0, _jsp_string82.length);
      out.print((lastnodeid ));
      out.write(_jsp_string83, 0, _jsp_string83.length);
       if(!"".equals(ifchangstatus) && ("1".equals(hasback) || ("".equals(hasback) && "".equals(hasnoback)))) { 
      out.write(_jsp_string84, 0, _jsp_string84.length);
       }else { 
      out.write(_jsp_string85, 0, _jsp_string85.length);
       } 
      out.write(_jsp_string86, 0, _jsp_string86.length);
       if("1".equals(isSubmitDirectNode) || "1".equals(isSubmitDirect)) { 
      out.write(_jsp_string79, 0, _jsp_string79.length);
      out.print((lastnodeid ));
      out.write(_jsp_string80, 0, _jsp_string80.length);
       } 
      out.write(_jsp_string87, 0, _jsp_string87.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string88, 0, _jsp_string88.length);
      out.print((requestid));
      out.write(_jsp_string89, 0, _jsp_string89.length);
      out.print((nodeid));
      out.write(_jsp_string90, 0, _jsp_string90.length);
      out.print((SystemEnv.getHtmlLabelName(25394,user.getLanguage())));
      out.write(_jsp_string91, 0, _jsp_string91.length);
      out.print((SystemEnv.getHtmlLabelName(25395,user.getLanguage())));
      out.write(_jsp_string92, 0, _jsp_string92.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string88, 0, _jsp_string88.length);
      out.print((requestid));
      out.write(_jsp_string89, 0, _jsp_string89.length);
      out.print((nodeid));
      out.write(_jsp_string93, 0, _jsp_string93.length);
      out.print((SystemEnv.getHtmlLabelName(22064,user.getLanguage())));
      out.print((SystemEnv.getHtmlLabelName(498,user.getLanguage())));
      out.write(_jsp_string94, 0, _jsp_string94.length);
      out.print((SystemEnv.getHtmlLabelName(22064,user.getLanguage())));
      out.print((SystemEnv.getHtmlLabelName(15242,user.getLanguage())));
      out.write(_jsp_string95, 0, _jsp_string95.length);
      out.print((isFree));
      out.write(_jsp_string96, 0, _jsp_string96.length);
      if(iscnodefree.equals("1") && IsFreeWorkflow){ 
      out.write(_jsp_string97, 0, _jsp_string97.length);
      }
      out.write(_jsp_string98, 0, _jsp_string98.length);
      out.print((isFree));
      out.write(_jsp_string99, 0, _jsp_string99.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string100, 0, _jsp_string100.length);
      out.print((init_road));
      out.write(_jsp_string101, 0, _jsp_string101.length);
      out.print((init_frms));
      out.write(_jsp_string102, 0, _jsp_string102.length);
      out.print((SystemEnv.getHtmlLabelName(83284,user.getLanguage())));
      out.write(_jsp_string103, 0, _jsp_string103.length);
      out.print((SystemEnv.getHtmlLabelName(21781,user.getLanguage())));
      out.write(_jsp_string104, 0, _jsp_string104.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string105, 0, _jsp_string105.length);
      out.print((iscnodefree));
      out.write(_jsp_string106, 0, _jsp_string106.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((nodeid));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string107, 0, _jsp_string107.length);
      out.print((formid));
      out.write(_jsp_string108, 0, _jsp_string108.length);
      out.print((billid));
      out.write(_jsp_string109, 0, _jsp_string109.length);
      out.print((SystemEnv.getHtmlLabelName(18818,user.getLanguage())));
      out.write(_jsp_string110, 0, _jsp_string110.length);
      
     if(!freedis.equals("")&&!isornotFree.equals("")){
     //if(IsFreeWorkflow&&IsFreeNode==1){
		    String zjclNodeid=stnode.getIsFreeStart01Node(""+nodeid);
		    //\u9010\u7ea7\u9000\u56de
		     if(freedis.equals("1")){
		    
      out.write(_jsp_string111, 0, _jsp_string111.length);
      
		         if(isrejectremind.equals("1")&&ischangrejectnode.equals("1")){
      out.write(_jsp_string112, 0, _jsp_string112.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string113, 0, _jsp_string113.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((currentnodeid));
      out.write(_jsp_string114, 0, _jsp_string114.length);
      out.print((isrejectremind));
      out.write(_jsp_string115, 0, _jsp_string115.length);
      out.print((ischangrejectnode));
      out.write(_jsp_string116, 0, _jsp_string116.length);
      out.print((isselectrejectnode));
      out.write(_jsp_string117, 0, _jsp_string117.length);
      out.print((nodeidss));
      out.write(_jsp_string118, 0, _jsp_string118.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string119, 0, _jsp_string119.length);
      out.print((zjclNodeid));
      out.write(_jsp_string120, 0, _jsp_string120.length);
       }else{
      out.write(_jsp_string121, 0, _jsp_string121.length);
      out.print((zjclNodeid));
      out.write(_jsp_string122, 0, _jsp_string122.length);
      out.print((zjclNodeid));
      out.write(_jsp_string123, 0, _jsp_string123.length);
      }
		     }else{//\u81ea\u7531\u9000\u56de
		    
      out.write(_jsp_string124, 0, _jsp_string124.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((currentnodeid));
      out.write(_jsp_string114, 0, _jsp_string114.length);
      out.print((isrejectremind));
      out.write(_jsp_string115, 0, _jsp_string115.length);
      out.print((ischangrejectnode));
      out.write(_jsp_string116, 0, _jsp_string116.length);
      out.print((isselectrejectnode));
      out.write(_jsp_string117, 0, _jsp_string117.length);
      out.print((nodeidss));
      out.write(_jsp_string125, 0, _jsp_string125.length);
      }
    }else{
	    if((isrejectremind.equals("1")&&ischangrejectnode.equals("1"))||isselectrejectnode.equals("1") || "2".equals(isselectrejectnode)){
	 
      out.write(_jsp_string126, 0, _jsp_string126.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((currentnodeid));
      out.write(_jsp_string114, 0, _jsp_string114.length);
      out.print((isrejectremind));
      out.write(_jsp_string115, 0, _jsp_string115.length);
      out.print((ischangrejectnode));
      out.write(_jsp_string116, 0, _jsp_string116.length);
      out.print((isselectrejectnode));
      out.write(_jsp_string127, 0, _jsp_string127.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string128, 0, _jsp_string128.length);
      }else{
      out.write(_jsp_string129, 0, _jsp_string129.length);
      }}
      out.write(_jsp_string130, 0, _jsp_string130.length);
       if(!"1".equals(GCONST.getWorkflowReturnNode())) { 
      out.write(_jsp_string131, 0, _jsp_string131.length);
       } 
      out.write(_jsp_string132, 0, _jsp_string132.length);
      

     if(!freedis.equals("")&&!isornotFree.equals("")){
		String zjclNodeid=stnode.getIsFreeStart01Node(""+nodeid);
		//\u9010\u7ea7\u9000\u56de
		
		if(freedis.equals("1")){
		   if(isrejectremind.equals("1")&&ischangrejectnode.equals("1")){
      out.write(_jsp_string133, 0, _jsp_string133.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string113, 0, _jsp_string113.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((currentnodeid));
      out.write(_jsp_string114, 0, _jsp_string114.length);
      out.print((isrejectremind));
      out.write(_jsp_string115, 0, _jsp_string115.length);
      out.print((ischangrejectnode));
      out.write(_jsp_string116, 0, _jsp_string116.length);
      out.print((isselectrejectnode));
      out.write(_jsp_string117, 0, _jsp_string117.length);
      out.print((nodeidss));
      out.write(_jsp_string134, 0, _jsp_string134.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string135, 0, _jsp_string135.length);
      }else{
      out.write(_jsp_string136, 0, _jsp_string136.length);
      out.print((zjclNodeid));
      out.write(_jsp_string137, 0, _jsp_string137.length);
      out.print((zjclNodeid));
      out.write(_jsp_string138, 0, _jsp_string138.length);
      }
		   }else{//\u81ea\u7531\u9000\u56de
		    
      out.write(_jsp_string139, 0, _jsp_string139.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((currentnodeid));
      out.write(_jsp_string114, 0, _jsp_string114.length);
      out.print((isrejectremind));
      out.write(_jsp_string115, 0, _jsp_string115.length);
      out.print((ischangrejectnode));
      out.write(_jsp_string116, 0, _jsp_string116.length);
      out.print((isselectrejectnode));
      out.write(_jsp_string117, 0, _jsp_string117.length);
      out.print((nodeidss));
      out.write(_jsp_string134, 0, _jsp_string134.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string140, 0, _jsp_string140.length);
      }
    }else{
	    if((isrejectremind.equals("1")&&ischangrejectnode.equals("1"))||isselectrejectnode.equals("1") || "2".equals(isselectrejectnode)){
      out.write(_jsp_string141, 0, _jsp_string141.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print((workflowid));
      out.write(_jsp_string54, 0, _jsp_string54.length);
      out.print((currentnodeid));
      out.write(_jsp_string114, 0, _jsp_string114.length);
      out.print((isrejectremind));
      out.write(_jsp_string115, 0, _jsp_string115.length);
      out.print((ischangrejectnode));
      out.write(_jsp_string116, 0, _jsp_string116.length);
      out.print((isselectrejectnode));
      out.write(_jsp_string142, 0, _jsp_string142.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string143, 0, _jsp_string143.length);
      }else{
      out.write(_jsp_string144, 0, _jsp_string144.length);
      }
	}
      out.write(_jsp_string145, 0, _jsp_string145.length);
      out.print((requestid));
      out.write(',');
      out.print((workflowid));
      out.write(',');
      out.print((nodeid));
      out.write(',');
      out.print((isbill));
      out.write(_jsp_string146, 0, _jsp_string146.length);
      out.print((billid));
      out.write(_jsp_string147, 0, _jsp_string147.length);
      out.print((ismode));
      out.write(_jsp_string148, 0, _jsp_string148.length);
      out.print((SystemEnv.getHtmlLabelName(18980,user.getLanguage())));
      out.write(_jsp_string149, 0, _jsp_string149.length);
      out.print((SystemEnv.getHtmlLabelName(18214, user.getLanguage())));
      out.write(_jsp_string150, 0, _jsp_string150.length);
      out.print((seeflowdoc));
      out.write(_jsp_string151, 0, _jsp_string151.length);
      if("1".equals(session.getAttribute("istest"))){
      out.write(_jsp_string152, 0, _jsp_string152.length);
      }
      out.write(_jsp_string153, 0, _jsp_string153.length);
      
//\u81ea\u5b9a\u4e49\u8d44\u4ea7\u6d41\u7a0b\u9a8c\u8bc1


if( isCptwf){
	JSONObject jsonObject=null;
	if(ismodeCptwf){
		jsonObject=CptWfUtil.getCptwfInfo4mode(""+workflowid);
	}else{
		jsonObject=CptWfUtil.getCptwfInfo(""+workflowid);
	}

	String zicFieldId= jsonObject.getString("zc");
	int zcViewtype=Util.getIntValue( ""+jsonObject.getInt("zctype"),0);
	String shulFieldId= null;
	int slViewtype=0;
	if(ismodeCptwf){
		if("mode_move".equalsIgnoreCase(cptwftype)
		||"mode_back".equalsIgnoreCase(cptwftype)
		||"mode_lend".equalsIgnoreCase(cptwftype)
		||"mode_mend".equalsIgnoreCase(cptwftype)
		){
			shulFieldId="-10000";
		}else{
			shulFieldId= jsonObject.getString("sl");
		}
		slViewtype=Util.getIntValue( ""+jsonObject.getInt("sltype"),0);
	}else{
		shulFieldId= jsonObject.getString("sl");
		slViewtype=Util.getIntValue( ""+jsonObject.getInt("sltype"),0);
	}


	
      out.write(_jsp_string154, 0, _jsp_string154.length);
      out.print((cptwftype ));
      out.write(_jsp_string155, 0, _jsp_string155.length);
      out.print((zcViewtype ));
      out.write(_jsp_string156, 0, _jsp_string156.length);
      out.print((slViewtype ));
      out.write(_jsp_string156, 0, _jsp_string156.length);
      out.print((slViewtype ));
      out.write(_jsp_string156, 0, _jsp_string156.length);
      out.print((slViewtype ));
      out.write(_jsp_string157, 0, _jsp_string157.length);
      out.print((SystemEnv.getHtmlLabelName(84466,user.getLanguage())));
      out.write(_jsp_string158, 0, _jsp_string158.length);
      out.print((zicFieldId ));
      out.write(_jsp_string159, 0, _jsp_string159.length);
      out.print((shulFieldId ));
      out.write(_jsp_string160, 0, _jsp_string160.length);
      out.print((zicFieldId ));
      out.write(_jsp_string161, 0, _jsp_string161.length);
      out.print((shulFieldId ));
      out.write(_jsp_string162, 0, _jsp_string162.length);
      out.print((cptwftype ));
      out.write(_jsp_string163, 0, _jsp_string163.length);
      out.print((ismodeCptwf ));
      out.write(_jsp_string164, 0, _jsp_string164.length);
      
}else{
    
      out.write(_jsp_string165, 0, _jsp_string165.length);
      
}


      out.write(_jsp_string166, 0, _jsp_string166.length);
      out.print((SystemEnv.getHtmlLabelName(21533,user.getLanguage())));
      out.write(_jsp_string167, 0, _jsp_string167.length);
      out.print((userid));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((usertype));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print((requestid));
      out.write(_jsp_string168, 0, _jsp_string168.length);
      out.print((requestid));
      out.write(_jsp_string169, 0, _jsp_string169.length);
      out.print((requestname));
      out.write(_jsp_string170, 0, _jsp_string170.length);
      out.print((SystemEnv.getHtmlLabelName(18214,user.getLanguage())));
      out.write(_jsp_string171, 0, _jsp_string171.length);
      pageContext.include("/workflow/request/UserDefinedRequestBrowser.jsp", "workflowid=" + com.caucho.el.Expr.toString(workflowid, null), true);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("workflow/request/ManageRequestNoFormIframeForScript.jsp"), -2855034721566031195L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string83;
  private final static char []_jsp_string44;
  private final static char []_jsp_string26;
  private final static char []_jsp_string37;
  private final static char []_jsp_string36;
  private final static char []_jsp_string93;
  private final static char []_jsp_string78;
  private final static char []_jsp_string59;
  private final static char []_jsp_string149;
  private final static char []_jsp_string92;
  private final static char []_jsp_string135;
  private final static char []_jsp_string10;
  private final static char []_jsp_string11;
  private final static char []_jsp_string81;
  private final static char []_jsp_string159;
  private final static char []_jsp_string16;
  private final static char []_jsp_string144;
  private final static char []_jsp_string101;
  private final static char []_jsp_string41;
  private final static char []_jsp_string119;
  private final static char []_jsp_string45;
  private final static char []_jsp_string89;
  private final static char []_jsp_string160;
  private final static char []_jsp_string82;
  private final static char []_jsp_string28;
  private final static char []_jsp_string72;
  private final static char []_jsp_string22;
  private final static char []_jsp_string50;
  private final static char []_jsp_string131;
  private final static char []_jsp_string29;
  private final static char []_jsp_string84;
  private final static char []_jsp_string77;
  private final static char []_jsp_string107;
  private final static char []_jsp_string161;
  private final static char []_jsp_string85;
  private final static char []_jsp_string54;
  private final static char []_jsp_string143;
  private final static char []_jsp_string5;
  private final static char []_jsp_string14;
  private final static char []_jsp_string94;
  private final static char []_jsp_string127;
  private final static char []_jsp_string141;
  private final static char []_jsp_string95;
  private final static char []_jsp_string137;
  private final static char []_jsp_string13;
  private final static char []_jsp_string17;
  private final static char []_jsp_string139;
  private final static char []_jsp_string86;
  private final static char []_jsp_string151;
  private final static char []_jsp_string52;
  private final static char []_jsp_string39;
  private final static char []_jsp_string46;
  private final static char []_jsp_string48;
  private final static char []_jsp_string140;
  private final static char []_jsp_string34;
  private final static char []_jsp_string130;
  private final static char []_jsp_string128;
  private final static char []_jsp_string145;
  private final static char []_jsp_string63;
  private final static char []_jsp_string152;
  private final static char []_jsp_string148;
  private final static char []_jsp_string167;
  private final static char []_jsp_string42;
  private final static char []_jsp_string58;
  private final static char []_jsp_string56;
  private final static char []_jsp_string122;
  private final static char []_jsp_string80;
  private final static char []_jsp_string91;
  private final static char []_jsp_string51;
  private final static char []_jsp_string166;
  private final static char []_jsp_string3;
  private final static char []_jsp_string87;
  private final static char []_jsp_string30;
  private final static char []_jsp_string31;
  private final static char []_jsp_string6;
  private final static char []_jsp_string150;
  private final static char []_jsp_string165;
  private final static char []_jsp_string67;
  private final static char []_jsp_string33;
  private final static char []_jsp_string25;
  private final static char []_jsp_string40;
  private final static char []_jsp_string111;
  private final static char []_jsp_string138;
  private final static char []_jsp_string158;
  private final static char []_jsp_string68;
  private final static char []_jsp_string99;
  private final static char []_jsp_string8;
  private final static char []_jsp_string164;
  private final static char []_jsp_string97;
  private final static char []_jsp_string171;
  private final static char []_jsp_string156;
  private final static char []_jsp_string71;
  private final static char []_jsp_string126;
  private final static char []_jsp_string73;
  private final static char []_jsp_string133;
  private final static char []_jsp_string4;
  private final static char []_jsp_string110;
  private final static char []_jsp_string57;
  private final static char []_jsp_string27;
  private final static char []_jsp_string19;
  private final static char []_jsp_string146;
  private final static char []_jsp_string74;
  private final static char []_jsp_string47;
  private final static char []_jsp_string66;
  private final static char []_jsp_string102;
  private final static char []_jsp_string35;
  private final static char []_jsp_string162;
  private final static char []_jsp_string70;
  private final static char []_jsp_string105;
  private final static char []_jsp_string120;
  private final static char []_jsp_string98;
  private final static char []_jsp_string163;
  private final static char []_jsp_string69;
  private final static char []_jsp_string124;
  private final static char []_jsp_string55;
  private final static char []_jsp_string169;
  private final static char []_jsp_string60;
  private final static char []_jsp_string147;
  private final static char []_jsp_string123;
  private final static char []_jsp_string38;
  private final static char []_jsp_string9;
  private final static char []_jsp_string117;
  private final static char []_jsp_string96;
  private final static char []_jsp_string15;
  private final static char []_jsp_string18;
  private final static char []_jsp_string76;
  private final static char []_jsp_string100;
  private final static char []_jsp_string114;
  private final static char []_jsp_string32;
  private final static char []_jsp_string103;
  private final static char []_jsp_string153;
  private final static char []_jsp_string115;
  private final static char []_jsp_string90;
  private final static char []_jsp_string88;
  private final static char []_jsp_string53;
  private final static char []_jsp_string113;
  private final static char []_jsp_string1;
  private final static char []_jsp_string106;
  private final static char []_jsp_string112;
  private final static char []_jsp_string155;
  private final static char []_jsp_string7;
  private final static char []_jsp_string24;
  private final static char []_jsp_string65;
  private final static char []_jsp_string142;
  private final static char []_jsp_string109;
  private final static char []_jsp_string2;
  private final static char []_jsp_string20;
  private final static char []_jsp_string170;
  private final static char []_jsp_string23;
  private final static char []_jsp_string121;
  private final static char []_jsp_string118;
  private final static char []_jsp_string0;
  private final static char []_jsp_string104;
  private final static char []_jsp_string21;
  private final static char []_jsp_string154;
  private final static char []_jsp_string125;
  private final static char []_jsp_string108;
  private final static char []_jsp_string64;
  private final static char []_jsp_string136;
  private final static char []_jsp_string129;
  private final static char []_jsp_string75;
  private final static char []_jsp_string62;
  private final static char []_jsp_string79;
  private final static char []_jsp_string168;
  private final static char []_jsp_string116;
  private final static char []_jsp_string49;
  private final static char []_jsp_string43;
  private final static char []_jsp_string157;
  private final static char []_jsp_string12;
  private final static char []_jsp_string134;
  private final static char []_jsp_string61;
  private final static char []_jsp_string132;
  static {
    _jsp_string83 = "\";\r\n	}\r\n	".toCharArray();
    _jsp_string44 = "&f_weaver_belongto_usertype=".toCharArray();
    _jsp_string26 = ".value.substring(5,7);\r\n            DayFrom=document.frmmain.".toCharArray();
    _jsp_string37 = ".value){\r\n                    if (!DateCompare(YearFrom, HourFrom, MinFrom,YearTo, HourTo,MinTo )){\r\n                        window.alert(\"".toCharArray();
    _jsp_string36 = ".value==document.frmmain.".toCharArray();
    _jsp_string93 = "&paramSubwfSetId=\"+paramSubwfSetId+\"&tempflag=\"+Math.random();\r\n	});\r\n}\r\n\r\nfunction returnTriSubwf(returnString){\r\n	if(returnString==1){\r\n		top.Dialog.alert(\"".toCharArray();
    _jsp_string78 = "\r\n		$G(\"needwfback\").value = \"0\";\r\n		getRemarkText_log();\r\n		doSubmit(obj);\r\n	}\r\n	\r\n}\r\nfunction doRemark_nBack(obj){\r\n	$G(\"needwfback\").value = \"1\";\r\n	getRemarkText_log();\r\n	doRemark_n(obj);\r\n}\r\nfunction doRemark_nNoBack(obj){\r\n	$G(\"needwfback\").value = \"0\";\r\n	getRemarkText_log();\r\n	doRemark_n(obj);\r\n}\r\nfunction doAffirmanceBack(obj){\r\n	".toCharArray();
    _jsp_string59 = "\r\n	var width = screen.width ;\r\n	var height = screen.height ;\r\n	if (height == 768 ) height -= 75 ;\r\n	if (height == 600 ) height -= 60 ;\r\n	var szFeatures = \"top=0,\" ;\r\n	szFeatures +=\"left=0,\" ;\r\n	szFeatures +=\"width=\"+width+\",\" ;\r\n	szFeatures +=\"height=\"+height+\",\" ;\r\n	szFeatures +=\"directories=no,\" ;\r\n	szFeatures +=\"status=yes,\" ;\r\n	szFeatures +=\"menubar=no,\" ;\r\n	szFeatures +=\"toolbar=yes,\" ;\r\n	szFeatures +=\"scrollbars=yes,\" ;\r\n	szFeatures +=\"resizable=yes\" ; //channelmode\r\n	window.open(redirectUrl,\"\",szFeatures) ;\r\n}\r\n\r\n\r\nfunction returnTrue(o){\r\n	return;\r\n}\r\n\r\nfunction addDocReadTag(docId) {\r\n	//user.getLogintype() \u5f53\u524d\u7528\u6237\u7c7b\u578b  1: \u7c7b\u522b\u7528\u6237  2:\u5916\u90e8\u7528\u6237\r\n	DocReadTagUtil.addDocReadTag(docId,".toCharArray();
    _jsp_string149 = "\");\r\n            }\r\n        }\r\n    } ;\r\n    dialog.Title = \"".toCharArray();
    _jsp_string92 = "\";\r\n	top.Dialog.confirm(info,function(){\r\n		$G(\"triSubwfIframe\").src=\"/workflow/request/TriSubwfIframe.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string135 = "&url=\"+url;\r\n		   ".toCharArray();
    _jsp_string10 = "\r\n\r\n<SCRIPT LANGUAGE=\"JavaScript\">\r\n\r\nfunction changecancleon(obj){\r\n	jQuery(obj).find(\".fieldClassChange\").css(\"background-color\",\"#f4fcff\");\r\n	jQuery(obj).find(\"#fieldCancleChange\").find(\"span\").css(\"display\",\"block\");\r\n}\r\n\r\nfunction changecancleout(obj){\r\n	jQuery(obj).find(\".fieldClassChange\").css(\"background-color\",\"#ffffff\");\r\n	jQuery(obj).find(\"#fieldCancleChange\").find(\"span\").css(\"display\",\"none\");\r\n}\r\n\r\n\r\nfunction clearAllQueue(oUploadcancle){\r\n	top.Dialog.confirm(\"".toCharArray();
    _jsp_string11 = "?\", function(){\r\n		oUploadcancle.cancelQueue();\r\n	}, function () {}, 320, 90,true);\r\n}\r\n\r\nfunction changebuttonon(obj){\r\n	var disabledflag = jQuery(obj).attr(\"disabled\");\r\n	if(!disabledflag){\r\n		jQuery(obj).css(\"background-color\",\"#8d8d8d\");\r\n	}\r\n}\r\n\r\nfunction uploadbuttonon(obj){\r\n	var disabledflag = jQuery(obj).attr(\"disabled\");\r\n	if(!disabledflag){\r\n		jQuery(obj).css(\"background-color\",\"#52ab2f\");\r\n	}\r\n}\r\n\r\nfunction changebuttonout(obj){\r\n	var disabledflag = jQuery(obj).attr(\"disabled\");\r\n	if(!disabledflag){\r\n		jQuery(obj).css(\"background-color\",\"#aaaaaa\");\r\n	}\r\n}\r\n\r\nfunction uploadbuttonout(obj){\r\n	var disabledflag = jQuery(obj).attr(\"disabled\");\r\n	if(!disabledflag){\r\n		jQuery(obj).css(\"background-color\",\"#6bcc44\");\r\n	}\r\n}\r\n\r\nfunction changefileaon(obj){\r\n	jQuery(obj).css(\"cssText\",\"cursor:pointer;color:#008aff!important;text-decoration:underline!important;\");\r\n}\r\n\r\nfunction changefileaout(obj){\r\n	jQuery(obj).css(\"cssText\",\"cursor:pointer;color:#8b8b8b!important;text-decoration:none!important;\");\r\n}\r\n\r\nfunction showProgressCancel(obj){\r\n	jQuery(obj).find(\".progressCancel\").css(\"cssText\",\"cursor:pointer;width:20px!important;height:20px!important;background-image:url('/images/ecology8/workflow/fileupload/cancle_wev8.png')!important;background-repeat:no-repeat!important;background-position:-2px 0px!important;display:block;float:right;\");\r\n}\r\n\r\nfunction hideProgressCancel(obj){\r\n	jQuery(obj).find(\".progressCancel\").css(\"cssText\",\"cursor:pointer;width:20px!important;height:20px!important;background-image:url('/images/ecology8/workflow/fileupload/cancle_wev8.png')!important;background-repeat:no-repeat!important;background-position:-14px 0px!important;display:none;float:right;\");\r\n}\r\n\r\nif (window.addEventListener){\r\n    window.addEventListener(\"load\", windowOnload, false);\r\n}else if (window.attachEvent){\r\n    window.attachEvent(\"onload\", windowOnload);\r\n}else{\r\n    window.onload=windowOnload;\r\n}\r\n\r\n//qc 66179 by yl\r\nvar ffff  =    ".toCharArray();
    _jsp_string81 = "\r\n	$G(\"needwfback\").value = \"1\";\r\n	getRemarkText_log();\r\n	doAffirmance(obj);\r\n}\r\nfunction doAffirmanceNoBack(obj){\r\n	".toCharArray();
    _jsp_string159 = "+\"']\").val();//\u9886\u7528\u7684\u8d44\u4ea7id\r\n            var cptnum = jQuery(\"input[name='field\"+".toCharArray();
    _jsp_string16 = ".value != \"\")\r\n    {\r\n        YearFrom=document.frmmain.".toCharArray();
    _jsp_string144 = "\r\n\r\n	    	return true;\r\n     ".toCharArray();
    _jsp_string101 = "&istableedit=".toCharArray();
    _jsp_string41 = "!!!!\");\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\nfunction doImportDetail(){\r\n    if(!checkDataChange()){\r\n        if(confirm(\"".toCharArray();
    _jsp_string119 = "&url=\"+url);\r\n				    if (result != null) {\r\n					    var val=result.split(\"|\");\r\n				        if($G(\"RejectNodes\")) $G(\"RejectNodes\").value=val[0];\r\n				        if($G(\"RejectToNodeid\")) $G(\"RejectToNodeid\").value=\"".toCharArray();
    _jsp_string45 = "&requestid=".toCharArray();
    _jsp_string89 = "&nodeId=".toCharArray();
    _jsp_string160 = "+\"']\").val();//\u9886\u7528\u7684\u6570\u91cf\r\n            if(zcid!=undefined&&zcid!=\"\"){\r\n                if(cptwftype==\"mode_move\"||cptwftype==\"mode_lend\"||cptwftype==\"mode_mend\"||cptwftype==\"mode_back\"){\r\n                    cptnum=1;\r\n                }\r\n                poststr += \"|\"+zcid+\",\"+ cptnum;\r\n            }\r\n\r\n        }else{\r\n            var indexnum0 = 0;\r\n            var indexElement=\"indexnum0\";\r\n            if(zcviewtype==2){indexElement=\"indexnum1\";}\r\n            else if(zcviewtype==3){indexElement=\"indexnum2\";}\r\n            else if(zcviewtype==4){indexElement=\"indexnum3\";}\r\n            if(document.getElementById(indexElement)){\r\n                indexnum0 = document.getElementById(indexElement).value * 1.0 - 1;\r\n            }\r\n\r\n            for(var i=0;i<=indexnum0;i++){\r\n                try{\r\n                    var zcid = jQuery(\"input[name='field\"+".toCharArray();
    _jsp_string82 = "\r\n	$G(\"needwfback\").value = \"0\";\r\n	getRemarkText_log();\r\n	doAffirmance(obj);\r\n}\r\nfunction doSubmitDirect(obj, subfun) {\r\n	if($G(\"SubmitToNodeid\")) {\r\n       $G(\"SubmitToNodeid\").value = \"".toCharArray();
    _jsp_string28 = ".value.substring(0,4);\r\n            MonthTo=document.frmmain.".toCharArray();
    _jsp_string72 = "\";\r\n				}\r\n			".toCharArray();
    _jsp_string22 = ".value.substring(8,10);\r\n        if (!DateCompare(YearFrom, MonthFrom, DayFrom,YearTo, MonthTo,DayTo )){\r\n            window.alert(\"".toCharArray();
    _jsp_string50 = "\";\r\n    	var title = \"".toCharArray();
    _jsp_string131 = "\r\n		return true;\r\n	".toCharArray();
    _jsp_string29 = ".value.substring(5,7);\r\n            DayTo=document.frmmain.".toCharArray();
    _jsp_string84 = "\r\n		if(\"Affirmance\" == subfun) {\r\n			doAffirmanceBack(obj);\r\n		}else {\r\n			doSubmitBack(obj);\r\n		}\r\n	".toCharArray();
    _jsp_string77 = "\r\n			$G(\"needwfback\").value = \"0\";\r\n			getRemarkText_log();\r\n			doSubmit(obj);\r\n		});\r\n			\r\n	}else{\r\n		".toCharArray();
    _jsp_string107 = "&formid=".toCharArray();
    _jsp_string161 = "+\"_\"+i+\"']\").val();//\u9886\u7528\u7684\u8d44\u4ea7id\r\n                    if(zcid==undefined||zcid==\"\"){continue;}\r\n                    var cptnum = jQuery(\"input[name='field\"+".toCharArray();
    _jsp_string85 = "\r\n		if(\"Affirmance\" == subfun) {\r\n			doAffirmanceNoBack(obj);\r\n		}else {\r\n			doSubmitNoBack(obj);\r\n		}\r\n	".toCharArray();
    _jsp_string54 = "&nodeid=".toCharArray();
    _jsp_string143 = "&url=\"+url;\r\n	 ".toCharArray();
    _jsp_string5 = "\r\n	<script language=\"JavaScript\">\r\n		var tips = '".toCharArray();
    _jsp_string14 = "\"!=\"b\" && \"".toCharArray();
    _jsp_string94 = "\");\r\n	}else {\r\n		top.Dialog.alert(\"".toCharArray();
    _jsp_string127 = "\");\r\n	    var result = showModalDialog(\"/systeminfo/BrowserMain.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string141 = "\r\n\r\n		    var url=escape(\"/workflow/request/RejectNodeSet.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string95 = "\");\r\n	}\r\n	location.reload();\r\n}\r\njQuery(document).ready(function(){\r\n	if( '".toCharArray();
    _jsp_string137 = "\";\r\n		      if($G(\"RejectToNodeid\")) $G(\"RejectToNodeid\").value=\"".toCharArray();
    _jsp_string13 = ";\r\nfunction DateCompare(YearFrom, MonthFrom, DayFrom,YearTo, MonthTo,DayTo)\r\n{\r\n    YearFrom  = parseInt(YearFrom,10);\r\n    MonthFrom = parseInt(MonthFrom,10);\r\n    DayFrom = parseInt(DayFrom,10);\r\n    YearTo    = parseInt(YearTo,10);\r\n    MonthTo   = parseInt(MonthTo,10);\r\n    DayTo = parseInt(DayTo,10);\r\n    if(YearTo<YearFrom)\r\n        return false;\r\n    else{\r\n        if(YearTo==YearFrom){\r\n            if(MonthTo<MonthFrom)\r\n                return false;\r\n            else{\r\n                if(MonthTo==MonthFrom){\r\n                    if(DayTo<DayFrom)\r\n                        return false;\r\n                    else\r\n                        return true;\r\n                }\r\n                else\r\n                    return true;\r\n            }\r\n        }\r\n        else\r\n            return true;\r\n    }\r\n}\r\nfunction checktimeok(){         <!-- \u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f -->\r\n    if (\"".toCharArray();
    _jsp_string17 = ".value.substring(0,4);\r\n        MonthFrom=document.frmmain.".toCharArray();
    _jsp_string139 = "\r\n\r\n		      var url=escape(\"/workflow/request/RejectNodeSetFree.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string86 = "\r\n}\r\nfunction doSave_nNew(obj){\r\n	getRemarkText_log();\r\n	doSave_n(obj);\r\n}\r\nfunction doReject_New(){\r\n	getRemarkText_log();\r\n	doReject();\r\n}\r\nfunction doSubmit_Pre(obj){\r\n	".toCharArray();
    _jsp_string151 = "\"==\"1\"){\r\n		if($G(\"rightMenu\")!=null){\r\n			$G(\"rightMenu\").style.display=\"none\";\r\n		}\r\n	}\r\n".toCharArray();
    _jsp_string52 = "&id=\"+docid;\r\n    window.open(operationPage,\"_blank\",\"top=0,left=\"+(screenWidth-800)/2+\",height=\"+(screenHeight-90)+\",width=800,status=no,scrollbars=yes,toolbar=yes,menubar=no,location=no\");\r\n}\r\n// modify by xhheng @20050304 for TD 1691\r\nfunction openSignPrint() {\r\n	".toCharArray();
    _jsp_string39 = "\"  +\"".toCharArray();
    _jsp_string46 = "&workflowid=".toCharArray();
    _jsp_string48 = "\";\r\n        	dialog.Width = 550;\r\n        	dialog.Height = 550;\r\n        	dialog.Title=title;\r\n        	dialog.Drag = true;\r\n        	dialog.maxiumnable = true;\r\n        	dialog.URL = url;\r\n        	dialog.show();\r\n        }\r\n    }else{\r\n        //window.showModalDialog(\"/workflow/workflow/BrowserMain.jsp?url=/workflow/request/RequestDetailImport.jsp?requestid=".toCharArray();
    _jsp_string140 = "&url=\"+url;\r\n			".toCharArray();
    _jsp_string34 = ".value.substring(3,5);\r\n            if (!DateCompare(YearFrom, MonthFrom, DayFrom,YearTo, MonthTo,DayTo )){\r\n                window.alert(\"".toCharArray();
    _jsp_string130 = "\r\n}\r\n\r\nfunction onSetRejectNode(){\r\n	".toCharArray();
    _jsp_string128 = "&url=\"+url);\r\n	    if (result != null) {\r\n	         // $G(\"RejectNodes\").value=result;\r\n		    var val=result.split(\"|\");\r\n	        if($G(\"RejectNodes\")) $G(\"RejectNodes\").value=val[0];\r\n	        if($G(\"RejectToNodeid\")) $G(\"RejectToNodeid\").value=val[1]; \r\n	        if($G(\"RejectToType\")) $G(\"RejectToType\").value=val[2];\r\n	       return true;\r\n	    }else{\r\n	        return false;\r\n	    }\r\n	    ".toCharArray();
    _jsp_string145 = "\r\n     dialog.callbackfun = function (paramobj, id1) {\r\n        if(id1) {          \r\n            if (wuiUtil.getJsonValueByIndex(id1, 0) != \"\" && wuiUtil.getJsonValueByIndex(id1, 0) != \"0\") {\r\n                var resourceids = wuiUtil.getJsonValueByIndex(id1, 0);\r\n                var resourcename = wuiUtil.getJsonValueByIndex(id1, 1);\r\n                var sHtml = \"\";\r\n                resourceids = resourceids.substr(0);\r\n                resourcename = resourcename.substr(0);\r\n                var val=resourcename.split(\"|\");\r\n                if($G(\"RejectNodes\")) $G(\"RejectNodes\").value=val[0];\r\n		if($G(\"RejectToNodeid\")) $G(\"RejectToNodeid\").value=val[1];\r\n		if($G(\"RejectToType\")) $G(\"RejectToType\").value=val[2];\r\n		showtipsinfo(".toCharArray();
    _jsp_string63 = "&workflowid=\"+wfid+\"&nodeid=\"+nodeid+\"&reqid=\"+reqid + \"&menuid=\" + menuid;\r\n	var width = screen.availWidth/2;\r\n	var height = screen.availHeight/2;\r\n	var top = height/2;\r\n	var left = width/2;\r\n	var szFeatures = \"top=\"+top+\",\" ;\r\n	szFeatures +=\"left=\"+left+\",\" ;\r\n	szFeatures +=\"width=\"+width+\",\" ;\r\n	szFeatures +=\"height=\"+height+\",\" ;\r\n	szFeatures +=\"directories=no,\" ;\r\n	szFeatures +=\"status=yes,toolbar=no,location=no,\" ;\r\n	szFeatures +=\"menubar=no,\" ;\r\n	szFeatures +=\"scrollbars=yes,\" ;\r\n	szFeatures +=\"resizable=yes\" ; //channelmode\r\n	window.open(redirectUrl,\"\",szFeatures) ;\r\n}\r\n//\u5fae\u4fe1\u63d0\u9192(QC:98106)\r\nfunction onNewChats(wfid, nodeid,reqid, menuid){ \r\n	var redirectUrl =  \"/wechat/sendWechat.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string152 = "\r\nfunction setAdiabled(){\r\n	jQuery(\"a\").attr(\"disabled\", true);\r\n	jQuery(\"a\").attr(\"onclick\", \"javascript:return false;\");\r\n	jQuery(\"a\").attr(\"href\", \"javascript:return false;\");\r\n	jQuery(\"a\").attr(\"target\", \"_blank\");\r\n}\r\n\r\n\r\nfunction setAdiabledLoad(){\r\n	setAdiabled();\r\n	setInterval(setAdiabled, 500);\r\n}\r\njQuery(document).ready(function(){\r\n	setAdiabledLoad();\r\n});\r\n".toCharArray();
    _jsp_string148 = "\",\"divFavContent18980\",\"".toCharArray();
    _jsp_string167 = "\";\r\ndiag_vote.URL = \"/workflow/request/WorkflowLogNew.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string42 = "\")){\r\n            //window.showModalDialog(\"/workflow/workflow/BrowserMain.jsp?url=/workflow/request/RequestDetailImport.jsp?requestid=".toCharArray();
    _jsp_string58 = "\";\r\n    if(parseInt(printmodeid)>0){\r\n  	  printModePreview(\"loadprintmodeFrame\",redirectUrl);\r\n  	  return ;\r\n    }\r\n			".toCharArray();
    _jsp_string56 = "\r\n	var redirectUrl = \"PrintRequest.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string122 = "\";\r\n		           if($G(\"RejectToNodeid\")) $G(\"RejectToNodeid\").value=\"".toCharArray();
    _jsp_string80 = "\";\r\n		}\r\n	".toCharArray();
    _jsp_string91 = ":\"+\"\\n\"+subworkflowname+\"".toCharArray();
    _jsp_string51 = "\";\r\n    	dialog.Width = 700;\r\n    	dialog.Height = 650;\r\n    	dialog.Title=title;\r\n    	dialog.Drag = true;\r\n    	dialog.maxiumnable = true;\r\n    	dialog.URL = url;\r\n    	dialog.show();\r\n    }\r\n}\r\n\r\n\r\nfunction changeTab()\r\n{\r\n   /*\r\n   for(i=0;i<=1;i++){\r\n  		parent.$G(\"oTDtype_\"+i).background=\"/images/tab2_wev8.png\";\r\n  		parent.$G(\"oTDtype_\"+i).className=\"cycleTD\";\r\n  	}\r\n  	parent.$G(\"oTDtype_0\").background=\"/images/tab.active2_wev8.png\";\r\n  	parent.$G(\"oTDtype_0\").className=\"cycleTDCurrent\";\r\n  	*/\r\n  	}\r\nfunction showWFHelp(docid){\r\n    var screenWidth = window.screen.width*1;\r\n    var screenHeight = window.screen.height*1;\r\n    var operationPage = \"/docs/docs/DocDsp.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string166 = "\r\n\r\nfunction doPrintViewLog(){\r\n\r\nif(window.top.Dialog){\r\n	diag_vote = new window.top.Dialog();\r\n} else {\r\n	diag_vote = new Dialog();\r\n}\r\ndiag_vote.currentWindow = window;\r\ndiag_vote.Width = 800;\r\ndiag_vote.Height = 550;\r\ndiag_vote.Modal = true;\r\ndiag_vote.maxiumnable = true;\r\ndiag_vote.Title = \"".toCharArray();
    _jsp_string3 = "<!--xwj for td3665 20060224-->\r\n".toCharArray();
    _jsp_string87 = "\r\n	getRemarkText_log();\r\n	doSubmit(obj);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction getRemarkText_log(){\r\n	try{\r\n		var reamrkNoStyle = CkeditorExt.getText(\"remark\");\r\n		if(reamrkNoStyle == \"\"){\r\n			$G(\"remarkText10404\").value = reamrkNoStyle;\r\n		}else{\r\n			var remarkText = CkeditorExt.getTextNew(\"remark\");\r\n			$G(\"remarkText10404\").value = remarkText;\r\n		}\r\n		for(var i=0; i<CkeditorExt.editorName.length; i++){\r\n			var tmpname = CkeditorExt.editorName[i];\r\n			try{\r\n				if(tmpname == \"remark\"){\r\n					continue;\r\n				}\r\n				$(tmpname).value = CkeditorExt.getText(tmpname);\r\n			}catch(e){}\r\n		}\r\n	}catch(e){\r\n	}\r\n\r\n\r\n}\r\n\r\nfunction triSubwf(paramSubwfSetId){\r\n	$G(\"triSubwfIframe\").src=\"/workflow/request/TriSubwfIframe.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string30 = ".value.substring(8,10);\r\n            HourFrom=document.frmmain.".toCharArray();
    _jsp_string31 = ".value.substring(0,2);\r\n            MinFrom = document.frmmain.".toCharArray();
    _jsp_string6 = "';\r\n		window.top.Dialog.alert(tips,function(){\r\n			window.location.href=\"/notice/noright.jsp?isovertime=".toCharArray();
    _jsp_string150 = "\";\r\n    dialog.Height = 400 ;\r\n    dialog.Drag = true;\r\n    dialog.show();\r\n}\r\n\r\n</SCRIPT>\r\n<!-- added by cyril on 20080605 for td8828-->\r\n<script language=javascript src=\"/js/checkData_wev8.js\"></script>\r\n<script type=\"text/javascript\" src=\"/js/swfupload/workflowswfupload_wev8.js\"></script>\r\n<!-- end by cyril on 20080605 for td8828-->\r\n<script language=\"JavaScript\">\r\n	if(\"".toCharArray();
    _jsp_string165 = "\r\n    function cptcusifover(_callback){\r\n        try{\r\n            if(_callback){\r\n                _callback();\r\n            }\r\n        }catch(e){}\r\n    }\r\n\r\n    ".toCharArray();
    _jsp_string67 = "&isovertime=".toCharArray();
    _jsp_string33 = ".value.substring(0,2);\r\n            MinTo = document.frmmain.".toCharArray();
    _jsp_string25 = ".value.substring(0,4);\r\n            MonthFrom=document.frmmain.".toCharArray();
    _jsp_string40 = "\"+\"".toCharArray();
    _jsp_string111 = "\r\n		    ".toCharArray();
    _jsp_string138 = "\"; \r\n		      return true;\r\n		   ".toCharArray();
    _jsp_string158 = "\");\r\n                return true;\r\n            }\r\n        }\r\n\r\n        var temprequestid = \"0\";\r\n        if(jQuery(\"input[name=requestid]\").length){\r\n            temprequestid = jQuery(\"input[name=requestid]\").val();\r\n        }\r\n        var poststr = \"\";\r\n        if(zcviewtype==0){//\u4e3b\u5b57\u6bb5\r\n\r\n            var zcid = jQuery(\"input[name='field\"+".toCharArray();
    _jsp_string68 = "&topage=".toCharArray();
    _jsp_string99 = "' == '1' ){\r\n         //\u521d\u59cb\u5316\u81ea\u7531\u6d41\u7a0b\u8bbe\u7f6e\r\n        if(jQuery(\".freeNode\").find(\"input[name='indexnum']\").length <= 0){\r\n            jQuery(\".freeNode\").append(\"<input type='hidden' id='rownum' name='rownum' value='1'/>\");\r\n            jQuery(\".freeNode\").append(\"<input type='hidden' id='indexnum' name='indexnum' value='1'/>\");\r\n            jQuery(\".freeNode\").append(\"<input type='hidden' id='checkfield' name='checkfield' value='nodename_0,operators_0'/>\");\r\n        }\r\n\r\n        //\u6253\u5f00\u81ea\u7531\u6d41\u7a0b\u8bbe\u7f6e\u6d4f\u89c8\u6846\r\n        var dlg = new window.top.Dialog();//\u5b9a\u4e49Dialog\u5bf9\u8c61\r\n    \u3000\u3000dlg.Width = 1000;//\u5b9a\u4e49\u957f\u5ea6\r\n    \u3000\u3000dlg.Height = 550;\r\n    \u3000\u3000dlg.URL = \"/workflow/request/FreeNodeShow.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string8 = "\r\n\r\n\r\n".toCharArray();
    _jsp_string164 = "\",\r\n                dataType : \"json\",\r\n                success: function do4Success(data){\r\n                    if(data&&data.msg&&data.msg!=\"\"){\r\n                        window.top.Dialog.alert(data.msg);\r\n                        returnval=true;\r\n                    }else{\r\n                        try{\r\n                            if(_callback){\r\n                                _callback();\r\n                            }\r\n                        }catch(e){}\r\n                        returnval=false;\r\n                    }\r\n                }\r\n            });\r\n        }else{\r\n            try{\r\n                if(_callback){\r\n                    _callback();\r\n                }\r\n            }catch(e){}\r\n        }\r\n    }\r\n    ".toCharArray();
    _jsp_string97 = "\r\n		doFreeWorkflow();\r\n".toCharArray();
    _jsp_string171 = "\";\r\n	eh_dialog.URL = \"/workflow/request/requestChooseOperator.jsp\";\r\n	eh_dialog.callbackfun = function(paramobj, datas) {\r\n		frmmain.append('<input type=\"hidden\" name=\"eh_setoperator\" value=\"y\" />');\r\n		frmmain.append('<input type=\"hidden\" name=\"eh_relationship\" value=\"'+datas.relationship+'\" />');\r\n		frmmain.append('<input type=\"hidden\" name=\"eh_operators\" value=\"'+datas.operators+'\" />');\r\n		doSubmitBack();		//\u6a21\u62df\u63d0\u4ea4\r\n	};\r\n	eh_dialog.closeHandle = function(paramobj, datas){\r\n		if(frmmain.find(\"input[name='eh_setoperator']\").size() == 0){\r\n			frmmain.append('<input type=\"hidden\" name=\"eh_setoperator\" value=\"n\" />');\r\n			doSubmitBack();		//\u6a21\u62df\u63d0\u4ea4\r\n		}\r\n	};\r\n	eh_dialog.show();\r\n});\r\n</script>\r\n\r\n".toCharArray();
    _jsp_string156 = "';\r\n        var slviewtype='".toCharArray();
    _jsp_string71 = "\r\n				if($G(\"SubmitToNodeid\")) {\r\n			       $G(\"SubmitToNodeid\").value = \"".toCharArray();
    _jsp_string126 = "\r\n	    var url=escape(\"/workflow/request/RejectNodeSet.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string73 = "\r\n			$G(\"needwfback\").value = \"1\";\r\n			getRemarkText_log();\r\n			doSubmit(obj);\r\n		});\r\n			\r\n	}else{\r\n		".toCharArray();
    _jsp_string133 = "\r\n\r\n			  var url=escape(\"/workflow/request/RejectNodeSetFree.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string4 = "\r\n<!-- \u5fae\u4fe1\u63d0\u9192(QC:98106) -->\r\n".toCharArray();
    _jsp_string110 = "\";\r\n    dialog.Height = screen.availHeight/2;\r\n    dialog.Width = screen.availWidth/2;\r\n    dialog.Drag = true;\r\n    dialog.show();\r\n    \r\n	//var width = screen.availWidth/2;\r\n	//var height = screen.availHeight/2;\r\n	//var top = height/2;\r\n	//var left = width/2;\r\n	//var szFeatures = \"top=\"+top+\",\" ;\r\n	//szFeatures +=\"left=\"+left+\",\" ;\r\n	//szFeatures +=\"width=\"+width+\",\" ;\r\n	//szFeatures +=\"height=\"+height+\",\" ;\r\n	//szFeatures +=\"directories=no,\" ;\r\n	//szFeatures +=\"status=yes,toolbar=no,location=no,\" ;\r\n	//szFeatures +=\"menubar=no,\" ;\r\n	//szFeatures +=\"scrollbars=yes,\" ;\r\n	//szFeatures +=\"resizable=yes\" ; //channelmode\r\n	//window.open(redirectUrl,\"\",szFeatures) ;\r\n}\r\n//\u539f\u9000\u56de\u65b9\u6cd5-\u5982\u679c\u8981\u542f\u7528\uff0c\u628a\u540d\u5b57\u6539\u6210onSetRejectNode\r\nfunction onSetRejectNode2(){\r\n    ".toCharArray();
    _jsp_string57 = "&isprint=1&fromFlowDoc=1\";\r\n	var printmodeid=\"".toCharArray();
    _jsp_string27 = ".value.substring(8,10);\r\n            YearTo=document.frmmain.".toCharArray();
    _jsp_string19 = ".value.substring(8,10);\r\n        YearTo=document.frmmain.".toCharArray();
    _jsp_string146 = ",1,".toCharArray();
    _jsp_string74 = "\r\n			if($G(\"SubmitToNodeid\")) {\r\n		       $G(\"SubmitToNodeid\").value = \"".toCharArray();
    _jsp_string47 = "\";\r\n        	var title = \"".toCharArray();
    _jsp_string66 = "&reEdit=1&fromFlowDoc=".toCharArray();
    _jsp_string102 = "\";\r\n    \u3000\u3000dlg.Title = \"".toCharArray();
    _jsp_string35 = "!!!!\");\r\n                return false;\r\n            }else{\r\n                if(document.frmmain.".toCharArray();
    _jsp_string162 = "+\"_\"+i+\"']\").val();//\u9886\u7528\u7684\u6570\u91cf\r\n                    if(cptwftype==\"mode_move\"||cptwftype==\"mode_lend\"||cptwftype==\"mode_mend\"||cptwftype==\"mode_back\"){\r\n                        cptnum=1;\r\n                    }\r\n\r\n                    if(cptnum==undefined||cptnum==\"\"){continue;}\r\n                    poststr += \"|\"+zcid+\",\"+ cptnum;\r\n\r\n                }catch(e){alert(e)}\r\n            }\r\n            if(poststr!=\"\"){\r\n                poststr =poststr.substr(1);\r\n            }else{\r\n               \r\n            }\r\n\r\n        }\r\n        if(poststr!=\"\"){\r\n            jQuery.ajax({\r\n                url : \"/cpt/capital/CptIfOverAjax.jsp\",\r\n                type : \"post\",\r\n                async : true,\r\n                processData : false,\r\n                data : \"poststr=\"+poststr+\"&requestid=\"+temprequestid+\"&cptwftype=".toCharArray();
    _jsp_string70 = "){//\u81ea\u5b9a\u4e49\u8d44\u4ea7\u6d41\u7a0b\r\n		cptcusifover(function(){\r\n			".toCharArray();
    _jsp_string105 = "&iscnodefree=".toCharArray();
    _jsp_string120 = "\"; \r\n				        if($G(\"RejectToType\")) $G(\"RejectToType\").value=\"0\";\r\n				         return true;\r\n				    }else{ \r\n					     return false;\r\n					 } \r\n		        	 \r\n		    	".toCharArray();
    _jsp_string98 = "\r\n});\r\n\r\nfunction doFreeWorkflow(){\r\n    //\u5982\u679c\u6d41\u7a0b\u4e3a\u81ea\u7531\u6d41\u7a0b\uff0c\u5219\u9ed8\u8ba4\u663e\u793a\u81ea\u7531\u6d41\u7a0b\u8bbe\u7f6e\u7a97\u4f53\r\n    if( '".toCharArray();
    _jsp_string163 = "&ismodecpt=".toCharArray();
    _jsp_string69 = "\";\r\n}\r\nfunction doSubmitBack(obj){\r\n\r\n	if(".toCharArray();
    _jsp_string124 = "\r\n		        var url=escape(\"/workflow/request/RejectNodeSetFree.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string55 = "\";\r\n			".toCharArray();
    _jsp_string169 = "\";\r\nvar requestname= \"".toCharArray();
    _jsp_string60 = ",\"".toCharArray();
    _jsp_string147 = ",\"\",\"reject\",\"".toCharArray();
    _jsp_string123 = "\"; \r\n		           if($G(\"RejectToType\")) $G(\"RejectToType\").value=\"0\";\r\n		           return true;\r\n		    	".toCharArray();
    _jsp_string38 = "!!!!!\");\r\n                        return false;\r\n                    }else{\r\n                        if(HourFrom==HourTo && MinFrom == MinTo){\r\n                            window.alert(\"".toCharArray();
    _jsp_string9 = "\r\n		".toCharArray();
    _jsp_string117 = "&isFreeNode=".toCharArray();
    _jsp_string96 = "' == '1' ){\r\n	    //\u5728\u6d41\u7a0b\u8868\u5355\u4e2d\u521b\u5efa\u4e00\u4e2a\u9690\u85cf\u7684div\uff0c\u7528\u4e8e\u5b58\u653e\u81ea\u7531\u6d41\u7a0b\u8bbe\u7f6e\u4fe1\u606f\r\n	    //jsp\u751f\u6210\u7684div\u53ef\u80fd\u5728form\u4e4b\u5916\uff0c\u6b64\u529f\u80fd\u7528\u4e8e\u5c06div\u4e2d\u7684\u5185\u5bb9\u79fb\u5165form\u4e2d\uff0c\u4fdd\u8bc1\u6570\u636e\u6b63\u786e\u63d0\u4ea4\r\n	    jQuery('[name=frmmain]').append(\r\n	        '<div class=\"freeNode\" style=\"display:none;\">'\r\n	            + jQuery('.freeNode').html()\r\n	        +'</div>'\r\n	    );\r\n	    if (jQuery('.freeNode').length > 1) {\r\n	    	jQuery('.freeNode').eq(1).remove();\r\n	    }\r\n    }\r\n	\r\n".toCharArray();
    _jsp_string15 = "\"!=\"a\" && document.frmmain.".toCharArray();
    _jsp_string18 = ".value.substring(5,7);\r\n        DayFrom=document.frmmain.".toCharArray();
    _jsp_string76 = "\r\n		$G(\"needwfback\").value = \"1\";\r\n		getRemarkText_log();\r\n		doSubmit(obj);\r\n	}\r\n	\r\n}\r\nfunction doSubmitNoBack(obj){\r\n	if(".toCharArray();
    _jsp_string100 = "&isroutedit=".toCharArray();
    _jsp_string114 = "&isrejectremind=".toCharArray();
    _jsp_string32 = ".value.substring(3,5);\r\n            HourTo=document.frmmain.".toCharArray();
    _jsp_string103 = "\";\r\n        dlg.maxiumnable = false;\r\n    \u3000\u3000dlg.show();\r\n        // \u4fdd\u7559\u5bf9\u8bdd\u6846\u5bf9\u8c61\r\n        window.top.freewindow = window;\r\n        window.top.freedialog = dlg;\r\n\r\n        return;\r\n    }\r\n\r\n    var title = \" ".toCharArray();
    _jsp_string153 = "\r\n\r\n\r\n    ".toCharArray();
    _jsp_string115 = "&ischangrejectnode=".toCharArray();
    _jsp_string90 = "&paramSubwfSetId=\"+paramSubwfSetId+\"&tempflag=\"+Math.random();\r\n}\r\n\r\nfunction triSubwf2(paramSubwfSetId,subworkflowname){\r\n	subworkflowname = subworkflowname.replace(new RegExp(',',\"gm\"),'\\n');\r\n	var info = \"".toCharArray();
    _jsp_string88 = "&operation=triSubwf&requestId=".toCharArray();
    _jsp_string53 = "\r\n	var redirectUrl = \"/docs/docs/seconddev/docmouldprint/DocMouldPrintTab.jsp?requestid=".toCharArray();
    _jsp_string113 = "&isrejecttype=1&requestid=".toCharArray();
    _jsp_string1 = "\r\n".toCharArray();
    _jsp_string106 = "\";\r\n	var dialog = new window.top.Dialog();\r\n	dialog.currentWindow = window;\r\n	dialog.Width = 550;\r\n	dialog.Height = 550;\r\n	dialog.Modal = true;\r\n	dialog.Title = title;\r\n	dialog.URL =url;\r\n	dialog.isIframe=false;\r\n	dialog.show();\r\n}\r\nfunction onNewOverTime(){\r\n	var redirectUrl =  \"/workflow/request/OverTimeSetByNodeUser.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string112 = "\r\n			        var url=escape(\"/workflow/request/RejectNodeSetFree.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string155 = "\";\r\n        var returnval = false;\r\n        var zcviewtype='".toCharArray();
    _jsp_string7 = "\";\r\n		});\r\n	</script>\r\n".toCharArray();
    _jsp_string24 = "\r\n            YearFrom=document.frmmain.".toCharArray();
    _jsp_string65 = "\";\r\n	dialog.Width = 1000;\r\n	dialog.Height = 350;\r\n	dialog.Drag = true;\r\n	dialog.maxiumnable = true;\r\n	dialog.URL = redirectUrl;\r\n	dialog.show();\r\n} \r\nfunction doEdit(obj){\r\n	parent.location.href=\"ViewRequest.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string142 = "\");\r\n		    dialog.URL =\"/systeminfo/BrowserMain.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string109 = "\";\r\n	var dialog = new window.top.Dialog();\r\n    dialog.currentWindow = window;\r\n    dialog.URL = redirectUrl;\r\n	dialog.Title =\"".toCharArray();
    _jsp_string2 = " \r\n".toCharArray();
    _jsp_string20 = ".value.substring(0,4);\r\n        MonthTo=document.frmmain.".toCharArray();
    _jsp_string170 = "\";\r\nvar returnjson = '[{\"sharetype\":\"workflow\",\"sharetitle\":\"'+requestname+'\",\"objectname\":\"FW:CustomShareMsg\",\"shareid\":\"'+requestid+'\"}]';\r\nsocialshareToEmessage(returnjson);\r\n}\r\n\r\njQuery(document).ready(function(){\r\n	//add by liuzy QC146873 exception handle\r\n	var needChooseOperator = jQuery(\"input[name='needChooseOperator']\",window.parent.document).val();\r\n	if(needChooseOperator != 'y')\r\n		return;\r\n	var frmmain = jQuery(\"form[name='frmmain']\");\r\n	var eh_dialog = null;\r\n	if(window.top.Dialog)\r\n		eh_dialog = new window.top.Dialog();\r\n	else\r\n		eh_dialog = new Dialog();\r\n	eh_dialog.currentWindow = window;\r\n	eh_dialog.Width = 650;\r\n	eh_dialog.Height = 500;\r\n	eh_dialog.Modal = true;\r\n	eh_dialog.maxiumnable = false;\r\n	eh_dialog.Title = \"".toCharArray();
    _jsp_string23 = "\");\r\n            return false;\r\n        }\r\n    }\r\n    else{\r\n        if( ffff == 181 && ffffIsbill==1){\r\n            ".toCharArray();
    _jsp_string121 = "\r\n		    	   if($G(\"RejectNodes\")) $G(\"RejectNodes\").value=\"".toCharArray();
    _jsp_string118 = "\");\r\n				    var result = showModalDialog(\"/systeminfo/BrowserMain.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string0 = "\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<!-- word\u8f6chtml\u63d2\u4ef6 -->\r\n".toCharArray();
    _jsp_string104 = "\";\r\n	var url=\"/workflow/workflow/BrowserMain.jsp?&url=/workflow/request/FreeWorkflowSet.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string21 = ".value.substring(5,7);\r\n        DayTo=document.frmmain.".toCharArray();
    _jsp_string154 = "\r\n    function cptcusifover(_callback){\r\n        var cptwftype=\"".toCharArray();
    _jsp_string125 = "\");\r\n			    var result = showModalDialog(\"/systeminfo/BrowserMain.jsp?url=\"+url);\r\n			    if (result != null) {\r\n			         //$G(\"RejectNodes\").value=result;\r\n				    var val=result.split(\"|\");\r\n			        if($G(\"RejectNodes\")) $G(\"RejectNodes\").value=val[0];\r\n			        if($G(\"RejectToNodeid\")) $G(\"RejectToNodeid\").value=val[1]; \r\n			        if($G(\"RejectToType\")) $G(\"RejectToType\").value=val[2];\r\n			       return true;\r\n			    }else{ \r\n				   return false;\r\n				 }\r\n			".toCharArray();
    _jsp_string108 = "&isbill=0&billid=".toCharArray();
    _jsp_string64 = "&workflowid=\"+wfid+\"&nodeid=\"+nodeid+\"&reqid=\"+reqid+\"&actionid=dialog&menuid=\" + menuid;\r\n	var dialog = new window.top.Dialog();\r\n	dialog.currentWindow = window;\r\n	dialog.Title = \"".toCharArray();
    _jsp_string136 = "\r\n\r\n		      if($G(\"RejectNodes\")) $G(\"RejectNodes\").value=\"".toCharArray();
    _jsp_string129 = "\r\n	    return true;\r\n    ".toCharArray();
    _jsp_string75 = "\";\r\n			}\r\n		".toCharArray();
    _jsp_string62 = "&workflowid=\"+wfid+\"&isagent=\"+agent+\"&reqid=\"+requestid;\r\n	var width = screen.availWidth-10 ;\r\n	var height = screen.availHeight-50 ;\r\n	var szFeatures = \"top=0,\" ;\r\n	szFeatures +=\"left=0,\" ;\r\n	szFeatures +=\"width=\"+width+\",\" ;\r\n	szFeatures +=\"height=\"+height+\",\" ;\r\n	szFeatures +=\"directories=no,\" ;\r\n	szFeatures +=\"status=yes,toolbar=no,location=no,\" ;\r\n	szFeatures +=\"menubar=no,\" ;\r\n	szFeatures +=\"scrollbars=yes,\" ;\r\n	szFeatures +=\"resizable=yes\" ; //channelmode\r\n	window.open(redirectUrl,\"\",szFeatures) ;\r\n}\r\nfunction onNewSms(wfid, nodeid, reqid, menuid){\r\n	var redirectUrl =  \"/sms/SendRequestSms.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string79 = "\r\n		if($G(\"SubmitToNodeid\")) {\r\n	       $G(\"SubmitToNodeid\").value = \"".toCharArray();
    _jsp_string168 = "\";\r\ndiag_vote.show();\r\n\r\n\r\n}\r\n\r\nfunction doShare(){\r\nvar requestid= \"".toCharArray();
    _jsp_string116 = "&isselectrejectnode=".toCharArray();
    _jsp_string49 = "\",window);\r\n        var dialog = new window.top.Dialog();\r\n    	dialog.currentWindow = window;\r\n    	var url = \"/workflow/workflow/BrowserMain.jsp?url=/workflow/request/RequestDetailImport.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string43 = "\",window);\r\n            var dialog = new window.top.Dialog();\r\n        	dialog.currentWindow = window;\r\n        	var url = \"/workflow/workflow/BrowserMain.jsp?url=/workflow/request/RequestDetailImport.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string157 = "';\r\n        if(cptwftype!=\"mode_move\"&&cptwftype!=\"mode_lend\"&&cptwftype!=\"mode_mend\"&&cptwftype!=\"mode_back\"){\r\n            if(zcviewtype!=slviewtype){\r\n                window.top.Dialog.alert(\"".toCharArray();
    _jsp_string12 = ";\r\nvar ffffIsbill  =    ".toCharArray();
    _jsp_string134 = "\");\r\n			  dialog.URL =\"/systeminfo/BrowserMain.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string61 = "\",returnTrue);\r\n\r\n}\r\nfunction onNewRequest(wfid,requestid,agent){\r\n	var redirectUrl =  \"AddRequest.jsp?f_weaver_belongto_userid=".toCharArray();
    _jsp_string132 = "\r\n    var boolean;\r\n\u3000\u3000	var dialog = new window.top.Dialog();\r\n    dialog.currentWindow = window;\r\n    dialog.callbackfunParam = null;\r\n	\r\n    ".toCharArray();
  }
}
