/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._workflow._request;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import weaver.general.Pinyin4j;
import weaver.file.FileUpload;
import weaver.hrm.HrmUserVarify;
import weaver.hrm.User;
import weaver.systeminfo.SystemEnv;
import weaver.general.Util;
import java.util.*;
import weaver.general.TimeUtil;
import org.json.JSONObject;

public class _workflowrequestpictureforjson__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("application/json; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      weaver.hrm.resource.ResourceComInfo ResourceComInfo;
      ResourceComInfo = (weaver.hrm.resource.ResourceComInfo) pageContext.getAttribute("ResourceComInfo");
      if (ResourceComInfo == null) {
        ResourceComInfo = new weaver.hrm.resource.ResourceComInfo();
        pageContext.setAttribute("ResourceComInfo", ResourceComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.crm.Maint.CustomerInfoComInfo CustomerInfoComInfo;
      CustomerInfoComInfo = (weaver.crm.Maint.CustomerInfoComInfo) pageContext.getAttribute("CustomerInfoComInfo");
      if (CustomerInfoComInfo == null) {
        CustomerInfoComInfo = new weaver.crm.Maint.CustomerInfoComInfo();
        pageContext.setAttribute("CustomerInfoComInfo", CustomerInfoComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet rs;
      rs = (weaver.conn.RecordSet) pageContext.getAttribute("rs");
      if (rs == null) {
        rs = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs", rs);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet rs1;
      rs1 = (weaver.conn.RecordSet) pageContext.getAttribute("rs1");
      if (rs1 == null) {
        rs1 = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs1", rs1);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet RecordSetOld;
      RecordSetOld = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSetOld");
      if (RecordSetOld == null) {
        RecordSetOld = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSetOld", RecordSetOld);
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      weaver.workflow.monitor.Monitor Monitor;
      Monitor = (weaver.workflow.monitor.Monitor) pageContext.getAttribute("Monitor");
      if (Monitor == null) {
        Monitor = new weaver.workflow.monitor.Monitor();
        pageContext.setAttribute("Monitor", Monitor);
      }
      out.write(_jsp_string3, 0, _jsp_string3.length);
      
FileUpload fu = new FileUpload(request);
String f_weaver_belongto_userid=fu.getParameter("f_weaver_belongto_userid");//\u9700\u8981\u589e\u52a0\u7684\u4ee3\u7801
String f_weaver_belongto_usertype=fu.getParameter("f_weaver_belongto_usertype");//\u9700\u8981\u589e\u52a0\u7684\u4ee3\u7801
User user = HrmUserVarify.getUser(request, response, f_weaver_belongto_userid, f_weaver_belongto_usertype) ;//\u9700\u8981\u589e\u52a0\u7684\u4ee3\u7801
int userid2=user.getUID();  
if(user == null)  return ;


int requestid = Util.getIntValue(request.getParameter("requestid")) ;
String workflowid = Util.null2String(request.getParameter("workflowid")) ;
String nodeid = Util.null2String(request.getParameter("nodeid")) ;
String isbill = Util.null2String(request.getParameter("isbill")) ;
String formid = Util.null2String(request.getParameter("formid")) ;
int desrequestid=Util.getIntValue(request.getParameter("desrequestid"));
String userid=new Integer(user.getUID()).toString();                   //\u5f53\u524d\u7528\u6237id
String logintype = user.getLogintype();     //\u5f53\u524d\u7528\u6237\u7c7b\u578b  1: \u5185\u90e8\u7528\u6237  2:\u5916\u90e8\u7528\u6237
String isurger=Util.null2String(request.getParameter("isurger"));
boolean isOldWf_ = false;
RecordSetOld.executeSql("select nodeid from workflow_currentoperator where requestid = " + requestid);
while(RecordSetOld.next()){
    if(RecordSetOld.getString("nodeid") == null || "".equals(RecordSetOld.getString("nodeid")) || "-1".equals(RecordSetOld.getString("nodeid"))){
            isOldWf_ = true;
    }
}
if(isOldWf_){
String url = "/workflow/request/WorkflowManageRequestPicture_old.jsp?f_weaver_belongto_userid="+userid2+"&f_weaver_belongto_usertype="+f_weaver_belongto_usertype+"&requestid=" + requestid + "&workflowid="+workflowid+"&nodeid="+nodeid+"&isbill="+isbill+"&formid="+formid;
response.sendRedirect(url);

}



if(isurger.equals("true")|| Monitor.hasMonitor(requestid+"",user.getUID()+"")){
   StringBuffer sqlsb = new StringBuffer();
    sqlsb.append("select * ");
    sqlsb.append("    from (select a.nodeid, ");
    sqlsb.append("                 b.nodename, ");
    sqlsb.append("              a.userid, ");
    sqlsb.append("              a.isremark, ");
    sqlsb.append("              a.lastisremark, ");
    sqlsb.append("              a.usertype, ");
    sqlsb.append("             a.agentorbyagentid, ");
    sqlsb.append("             a.agenttype, ");
    sqlsb.append("             a.receivedate, ");
    sqlsb.append("             a.receivetime, ");
    sqlsb.append("             a.operatedate, ");
    sqlsb.append("             a.operatetime, ");
    sqlsb.append("             a.viewtype, ");
    sqlsb.append("             a.nodetype ");
    sqlsb.append("        from (SELECT distinct requestid, ");
    sqlsb.append("                              userid, ");
    sqlsb.append("                              workflow_currentoperator.workflowid, ");
    sqlsb.append("                              workflowtype, ");
    sqlsb.append("                              isremark, ");
    sqlsb.append("                              lastisremark, ");
    sqlsb.append("                              usertype, ");
    sqlsb.append("                              workflow_currentoperator.nodeid, ");
    sqlsb.append("                              agentorbyagentid, ");
    sqlsb.append("                              agenttype, ");
    sqlsb.append("                              receivedate, ");
    sqlsb.append("                              receivetime, ");
    sqlsb.append("                              viewtype, ");
    sqlsb.append("                              iscomplete, ");
    sqlsb.append("                              operatedate, ");
    sqlsb.append("                              operatetime, ");
    sqlsb.append("                              nodetype ");
    sqlsb.append("                FROM workflow_currentoperator, workflow_flownode ");
    sqlsb.append("               where workflow_currentoperator.nodeid = ");
    sqlsb.append("                     workflow_flownode.nodeid ");
    sqlsb.append("                 and requestid = "+requestid+") a, ");
    sqlsb.append("             workflow_nodebase b ");
    sqlsb.append("       where a.nodeid = b.id ");
    sqlsb.append("         and a.requestid = "+requestid+" ");
    sqlsb.append("         and a.agenttype <> 1 ");
    sqlsb.append("      union ");
    sqlsb.append("      select a.nodeid, ");
    sqlsb.append("             b.nodename, ");
    sqlsb.append("             a.userid, ");
    sqlsb.append("             a.isremark, ");
    sqlsb.append("             a.isremark as lastisremark, ");
    sqlsb.append("             a.usertype, ");
    sqlsb.append("             0 as agentorbyagentid, ");
    sqlsb.append("             '' as agenttype, ");
    sqlsb.append("             a.receivedate, ");
    sqlsb.append("             a.receivetime, ");
    sqlsb.append("             a.operatedate, ");
    sqlsb.append("             a.operatetime, ");
    sqlsb.append("             a.viewtype, ");
    sqlsb.append("             a.nodetype ");
    sqlsb.append("        from (SELECT distinct o.requestid, ");
    sqlsb.append("                              o.userid, ");
    sqlsb.append("                              o.workflowid, ");
    sqlsb.append("                              o.isremark, ");
    sqlsb.append("                              o.usertype, ");
    sqlsb.append("                              o.nodeid, ");
    sqlsb.append("                              o.receivedate, ");
    sqlsb.append("                              o.receivetime, ");
    sqlsb.append("                              o.viewtype, ");
    sqlsb.append("                              o.operatedate, ");
    sqlsb.append("                              o.operatetime, ");
    sqlsb.append("                              n.nodetype ");
    sqlsb.append("                FROM workflow_otheroperator o, workflow_flownode n ");
    sqlsb.append("               where o.nodeid = n.nodeid ");
    sqlsb.append("                 and o.requestid = "+requestid+") a, ");
    sqlsb.append("             workflow_nodebase b ");
    sqlsb.append("       where a.nodeid = b.id ");
    sqlsb.append("         and a.requestid = "+requestid+") a ");
       //add by liaodong for qc76119 in 2013-10-09 start
    sqlsb.append(" order by a.nodetype,case when a.operatedate is null then 1 else 0 end,a.operatetime,a.receivedate, a.receivetime ");
    //end 
   rs.executeSql(sqlsb.toString());
   
}else{
    String viewLogIds = "";
    ArrayList canViewIds = new ArrayList();
    String viewNodeId = "-1";
    String tempNodeId = "-1";
    String singleViewLogIds = "-1";
    rs.executeSql("select distinct nodeid from workflow_currentoperator where requestid="+requestid+" and userid="+userid);

    while(rs.next()){
        viewNodeId = rs.getString("nodeid");
        rs1.executeSql("select viewnodeids from workflow_flownode where workflowid=" + workflowid + " and nodeid="+viewNodeId);
        if(rs1.next()){
            singleViewLogIds = rs1.getString("viewnodeids");
        }
    
        if("-1".equals(singleViewLogIds)){//\u5168\u90e8\u67e5\u770b
            rs1.executeSql("select nodeid from workflow_flownode where workflowid= " + workflowid+" and exists(select 1 from workflow_nodebase where id=workflow_flownode.nodeid and (requestid is null or requestid="+requestid+"))");
            while(rs1.next()){
                tempNodeId = rs1.getString("nodeid");
                if(!canViewIds.contains(tempNodeId)){
                    canViewIds.add(tempNodeId);
                }
            }
        }
        else if(singleViewLogIds == null || "".equals(singleViewLogIds)){//\u5168\u90e8\u4e0d\u80fd\u67e5\u770b
    
        }
        else{//\u67e5\u770b\u90e8\u5206
            String tempidstrs[] = Util.TokenizerString2(singleViewLogIds, ",");
            for(int i=0;i<tempidstrs.length;i++){
                if(!canViewIds.contains(tempidstrs[i])){
                    canViewIds.add(tempidstrs[i]);
                }
            }
        }
    }

//\u5904\u7406\u76f8\u5173\u6d41\u7a0b\u7684\u67e5\u770b\u6743\u9650


    if(desrequestid>0)
    {
        //System.out.print("select  distinct a.nodeid from  workflow_currentoperator a  where a.requestid="+requestid+" and  exists (select 1 from workflow_currentoperator b where b.isremark in ('2','4') and b.requestid="+desrequestid+"  and  a.userid=b.userid)");
        rs.executeSql("select  distinct a.nodeid from  workflow_currentoperator a  where a.requestid="+requestid+" and  exists (select 1 from workflow_currentoperator b where b.isremark in ('2','4') and b.requestid="+desrequestid+"  and  a.userid=b.userid)");
        while(rs.next()){
            viewNodeId = rs.getString("nodeid");
            rs1.executeSql("select viewnodeids from workflow_flownode where workflowid=" + workflowid + " and nodeid="+viewNodeId);
            if(rs1.next()){
                singleViewLogIds = rs1.getString("viewnodeids");
            }
        
            if("-1".equals(singleViewLogIds)){//\u5168\u90e8\u67e5\u770b
                rs1.executeSql("select nodeid from workflow_flownode where workflowid= " + workflowid+" and exists(select 1 from workflow_nodebase where id=workflow_flownode.nodeid and (requestid is null or requestid="+desrequestid+"))");
                while(rs1.next()){
                    tempNodeId = rs1.getString("nodeid");
                    if(!canViewIds.contains(tempNodeId)){
                        canViewIds.add(tempNodeId);
                    }
                }
            }
            else if(singleViewLogIds == null || "".equals(singleViewLogIds)){//\u5168\u90e8\u4e0d\u80fd\u67e5\u770b
        
            }
            else{//\u67e5\u770b\u90e8\u5206
                String tempidstrs[] = Util.TokenizerString2(singleViewLogIds, ",");
                for(int i=0;i<tempidstrs.length;i++){
                    if(!canViewIds.contains(tempidstrs[i])){
                        canViewIds.add(tempidstrs[i]);
                    }
                }
            }
        }
    }
    if(canViewIds.size()>0){
        for(int a=0;a<canViewIds.size();a++)
        {
            viewLogIds += (String)canViewIds.get(a) + ",";
        }
        viewLogIds = viewLogIds.substring(0,viewLogIds.length()-1);
    }
    else{
        viewLogIds = "-1";
    }
    StringBuffer sqlsb = new StringBuffer();
    sqlsb.append("select * ");
    sqlsb.append("    from (select a.nodeid, ");
    sqlsb.append("             b.nodename, ");
    sqlsb.append("             a.userid, ");
    sqlsb.append("             a.isremark, ");
    sqlsb.append("             a.lastisremark, ");
    sqlsb.append("             a.usertype, ");
    sqlsb.append("             a.agentorbyagentid, ");
    sqlsb.append("             a.agenttype, ");
    sqlsb.append("             a.receivedate, ");
    sqlsb.append("             a.receivetime, ");
    sqlsb.append("             a.operatedate, ");
    sqlsb.append("             a.operatetime, ");
    sqlsb.append("             a.viewtype, ");
    sqlsb.append("             a.nodetype ");
    sqlsb.append("        from (SELECT distinct requestid, ");
    sqlsb.append("                              userid, ");
    sqlsb.append("                              workflow_currentoperator.workflowid, ");
    sqlsb.append("                              workflowtype, ");
    sqlsb.append("                              isremark, ");
    sqlsb.append("                              lastisremark, ");
    sqlsb.append("                              usertype, ");
    sqlsb.append("                              workflow_currentoperator.nodeid, ");
    sqlsb.append("                              agentorbyagentid, ");
    sqlsb.append("                              agenttype, ");
    sqlsb.append("                              receivedate, ");
    sqlsb.append("                              receivetime, ");
    sqlsb.append("                              viewtype, ");
    sqlsb.append("                              iscomplete, ");
    sqlsb.append("                              operatedate, ");
    sqlsb.append("                              operatetime, ");
    sqlsb.append("                              nodetype ");
    sqlsb.append("                FROM workflow_currentoperator, workflow_flownode ");
    sqlsb.append("               where workflow_currentoperator.nodeid = ");
    sqlsb.append("                     workflow_flownode.nodeid ");
    sqlsb.append("                 and requestid = "+requestid+") a, ");
    sqlsb.append("             workflow_nodebase b ");
    sqlsb.append("       where a.nodeid = b.id ");
    sqlsb.append("         and a.requestid = "+requestid+" ");
    sqlsb.append("         and a.agenttype <> 1 ");
    sqlsb.append("         and a.nodeid in ("+viewLogIds+") ");
    sqlsb.append("      union ");
    sqlsb.append("      select a.nodeid, ");
    sqlsb.append("             b.nodename, ");
    sqlsb.append("             a.userid, ");
    sqlsb.append("             a.isremark, ");
    sqlsb.append("             a.isremark as lastisremark, ");
    sqlsb.append("             a.usertype, ");
    sqlsb.append("             0 as agentorbyagentid, ");
    sqlsb.append("             '' as agenttype, ");
    sqlsb.append("             a.receivedate, ");
    sqlsb.append("             a.receivetime, ");
    sqlsb.append("             a.operatedate, ");
    sqlsb.append("             a.operatetime, ");
    sqlsb.append("             a.viewtype, ");
    sqlsb.append("             a.nodetype ");
    sqlsb.append("        from (SELECT distinct o.requestid, ");
    sqlsb.append("                              o.userid, ");
    sqlsb.append("                              o.workflowid, ");
    //sqlsb.append("                              o.workflowtype, ");
    sqlsb.append("                              o.isremark, ");
    sqlsb.append("                              o.usertype, ");
    sqlsb.append("                              o.nodeid, ");
    sqlsb.append("                              o.receivedate, ");
    sqlsb.append("                              o.receivetime, ");
    sqlsb.append("                              o.viewtype, ");
    sqlsb.append("                              o.operatedate, ");
    sqlsb.append("                              o.operatetime, ");
    sqlsb.append("                              n.nodetype ");
    sqlsb.append("                FROM workflow_otheroperator o, workflow_flownode n ");
    sqlsb.append("               where o.nodeid = n.nodeid ");
    sqlsb.append("                 and o.requestid = "+requestid+") a, ");
    sqlsb.append("             workflow_nodebase b ");
    sqlsb.append("       where a.nodeid = b.id ");
    sqlsb.append("         and a.requestid = "+requestid+" ");
    sqlsb.append("         and a.nodeid in ("+viewLogIds+")) a ");
     //add by liaodong for qc76119 in 2013-10-09 start
    sqlsb.append(" order by a.nodetype,case when a.operatedate is null then 1 else 0 end,a.operatetime,a.receivedate, a.receivetime ");
    //end 
    rs.executeSql(sqlsb.toString());
    //rs.executeSql("select a.nodeid,b.nodename,a.userid,a.isremark,a.usertype,a.agentorbyagentid, a.agenttype,a.receivedate,a.receivetime,a.operatedate,a.operatetime,a.viewtype from (SELECT distinct t1.id,t1.requestid ,t1.userid ,t1.workflowid ,workflowtype ,isremark ,t1.usertype ,t1.nodeid ,agentorbyagentid ,agenttype  ,receivedate ,receivetime ,viewtype ,iscomplete  ,operatedate ,operatetime,nodetype FROM workflow_currentoperator t1,workflow_flownode t2,(select max(id) id,nodeid,userid,usertype from workflow_currentoperator where requestid="+requestid+" group by nodeid,userid,usertype) t3  where t1.id=t3.id and t1.nodeid=t2.nodeid and t1.requestid = "+requestid+") a,workflow_nodebase b where a.nodeid=b.id and a.requestid="+requestid+" and a.agenttype<>1 and a.nodeid in("+viewLogIds+") order by a.receivedate,a.receivetime,a.nodetype");

}



    int tmpnodeid_old=-1;
    boolean islight=false;

    ArrayList<Map<String,String>>  operators = new ArrayList<Map<String,String>>();

    Map<String,String>  operator;

    List<String>  operatorflag=new ArrayList<String>();

    while(rs.next()){
        int     tmpnodeid=rs.getInt("nodeid");
        String  tmpnodename=rs.getString("nodename");
        String  tmpuserid=rs.getString("userid");
        String  tmpagentorbyagentid=rs.getString("agentorbyagentid");
        //int     tmpisremark=rs.getInt("isremark");
        String  tmpisremark = Util.null2String(rs.getString("isremark"));
        
        if (tmpnodeid_old != tmpnodeid) {
            tmpnodeid_old = tmpnodeid;
            operatorflag = new ArrayList<String>();
        }
        
        operator=new HashMap<String,String>();
        
        if(tmpisremark.equals(""))
        {
            tmpisremark = Util.null2String(rs.getString("lastisremark"));
        }

        int     tmpusertype=rs.getInt("usertype");
        int     tmpagenttype=rs.getInt("agenttype");

        

       if(tmpusertype == 0){
           if(!operatorflag.contains(tmpuserid)) {
               operator.put("uid",tmpuserid);
               
               String username = Util.toScreen(ResourceComInfo.getResourcename(tmpuserid),user.getLanguage());
               operator.put("data", username);
               operator.put("nodeid", tmpnodeid + "");
               operator.put("nodename", tmpnodename);
               
               operator.put("datapy", Pinyin4j.spell(username));
               if(tmpisremark.equals("2"))
                  operator.put("handed","1");
                else
                    operator.put("handed","0");
                operators.add(operator);
                operatorflag.add(tmpuserid); 
            }
            if(tmpagenttype==2){
                     
                if(!operatorflag.contains(tmpuserid))
                {
                    operator=new HashMap<String,String>();
                    operator.put("uid",tmpagentorbyagentid);
                    String username = Util.toScreen(ResourceComInfo.getResourcename(tmpagentorbyagentid),user.getLanguage());
                    operator.put("data", username);
                    
                    operator.put("nodeid", tmpnodeid + "");
                    operator.put("nodename", tmpnodename);
                    operator.put("datapy", Pinyin4j.spell(username));
                    
                    if(tmpisremark.equals("2"))
                        operator.put("handed","1");
                    else
                        operator.put("handed","0");
                    operators.add(operator);    
                    operatorflag.add(tmpuserid); 
                }
                        
           }
          } 
                 
     }

     StringBuffer sb=new StringBuffer("[");
     JSONObject  jsonitem;
     for(Map<String,String>  item:operators)
     {
          jsonitem=new JSONObject(item); 
          sb.append(jsonitem.toString()).append(",");
     }
     String rsdata="";
     if(operators.size()>0)
     {
     rsdata=sb.substring(0,sb.length()-1)+"]";
     }
     else
     rsdata=sb.toString()+"]";
     //System.out.println(rsdata);
     out.println(rsdata);
     return;
     
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("workflow/request/WorkflowRequestPictureForJson.jsp"), 6316993969018185741L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string3;
  private final static char []_jsp_string0;
  private final static char []_jsp_string1;
  private final static char []_jsp_string2;
  static {
    _jsp_string3 = "\r\n\r\n\r\n".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string1 = "\r\n".toCharArray();
    _jsp_string2 = " \r\n".toCharArray();
  }
}
