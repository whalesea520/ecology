/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._wui._theme._ecology8._page;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import weaver.general.Util;
import weaver.general.StaticObj;
import java.util.*;
import weaver.hrm.HrmUserVarify;
import weaver.hrm.User;
import weaver.systeminfo.menuconfig.MenuMaint;
import weaver.systeminfo.SystemEnv;
import weaver.general.GCONST;
import weaver.filter.MultiLangFilter;
import weaver.general.IsGovProj;
import weaver.rdeploy.portal.PortalUtil;

public class _top__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;

  
  private String[] convMenuInfo(User user, Map map) {
  	String[] result = new String[3];
  	
      int level = Integer.parseInt((String) map.get("levelid"));
      String sicon = "";
      String sname = "";
  	String position = "";
  	String isDefault="1"; //\u662f\u5426\u5177\u6709\u9ed8\u8ba4\u56fe\u6807\u83dc\u5355
      switch (level) {
      //\u4efb\u52a1\u7ba1\u7406
      case -2908:            
          sname = SystemEnv.getHtmlLabelName(1332, user.getLanguage());
          position += "-0 -111";
          break;
      //\u96c6\u6210\u7cfb\u7edf
      case -2774:            
          sname = SystemEnv.getHtmlLabelName(26267, user.getLanguage());
          position += "-0 -37";
          break;
      //\u8ba1\u5212\u4efb\u52a1
      case -2741:            
          sname = SystemEnv.getHtmlLabelName(407, user.getLanguage());
          position += "-148 -74";
          break;
      //\u4e34\u65f6LICENSE
      case -2080:
          sname = SystemEnv.getHtmlLabelName(18599, user.getLanguage());
          position += "-185 -74";
          break;
      //\u6d41\u7a0b
      case 1:       
          sname = SystemEnv.getHtmlLabelName(22244, user.getLanguage());
          position += "-111 -0";
          break;
      //\u6211\u7684\u77e5\u8bc6
      case 2:
          sname = SystemEnv.getHtmlLabelName(26268,user.getLanguage());
          position += "-74 -0";
          break;
      //\u6211\u7684\u5ba2\u6237
      case 3:
          sname = SystemEnv.getHtmlLabelName(21313, user.getLanguage());
          position += "-148 -0";
          break;
      //\u6211\u7684\u9879\u76ee
      case 4:
          sname = SystemEnv.getHtmlLabelName(25106, user.getLanguage());
          position += "-185 -0";
          break;
      //\u4eba\u4e8b
      case 5:
          sname = SystemEnv.getHtmlLabelName(20694, user.getLanguage());
          position += "-222 -0";
          break;
      //\u6211\u7684\u4f1a\u8bae
      case 6:
          sname = SystemEnv.getHtmlLabelName(2103, user.getLanguage());
          position += "-74 -37";
          break;
      //\u6211\u7684\u8d44\u4ea7
      case 7:
          sname = SystemEnv.getHtmlLabelName(535, user.getLanguage());
          position += "-37 -37";
          break;
      //\u6211\u7684\u90ae\u4ef6
      case 10:
          sname = SystemEnv.getHtmlLabelName(71, user.getLanguage());
          break;
      //\u6211\u7684\u77ed\u4fe1
      case 11:
          sname = SystemEnv.getHtmlLabelName(22825, user.getLanguage());
          break;
      //\u6211\u7684\u534f\u52a9    
      case 80:
          sname = SystemEnv.getHtmlLabelName(26269, user.getLanguage());
          position += "-37 -0";
          break;
      //\u76ee\u6807\u7ee9\u6548
      case 94:
          sname = SystemEnv.getHtmlLabelName(26270, user.getLanguage());
          position += "-111 -74";
          break;
      //\u6211\u7684\u901a\u4fe1
      case 107:
          sname = SystemEnv.getHtmlLabelName(26271, user.getLanguage());
          position += "-74 -111";
          break;
      //\u6211\u7684\u62a5\u8868
      case 110:
          sname = SystemEnv.getHtmlLabelName(15101, user.getLanguage());
          position += "-37 -74";
          break;
      //\u4fe1\u606f\u4e2d\u5fc3
      case 111:
          sname = SystemEnv.getHtmlLabelName(70, user.getLanguage());
          position += "-0 -74";
          break;
      //\u7cfb\u7edf\u8bbe\u7f6e
      case 114:
          sname = SystemEnv.getHtmlLabelName(22250, user.getLanguage());
          position += "-74 -74";
          break;
      //\u6211\u7684\u65e5\u7a0b
      case 140:
          sname = SystemEnv.getHtmlLabelName(2211, user.getLanguage());
          position += "-148 -37";
          break;
       //\u8f66\u8f86\u7ba1\u7406
      case 144:
          sname = SystemEnv.getHtmlLabelName(920, user.getLanguage());
          position += "-185 -37";
          break;
      //\u6211\u7684\u76f8\u518c
      case 199:
          sname = SystemEnv.getHtmlLabelName(20003, user.getLanguage());
          position += "-222 -37";
          break;
      //\u4e34\u65f6LICENSE
      case 227:
          sname = SystemEnv.getHtmlLabelName(18599, user.getLanguage());
          position += "-185 -74";
          break;
      //\u8ba1\u5212\u4efb\u52a1
      case 263:
          sname = SystemEnv.getHtmlLabelName(407, user.getLanguage());
          position += "-148 -74";
          break;
      //\u6211\u7684\u5ba2\u670d
      case 352:
          sname = SystemEnv.getHtmlLabelName(26272, user.getLanguage());
          position += "-222 -74";
          break;
      case 392:
          sname = SystemEnv.getHtmlLabelName(26467, user.getLanguage());
          position += "-37 -111"; 
          break;  
      //\u6211\u7684\u90ae\u4ef6
      case 536:
          sname = SystemEnv.getHtmlLabelName(71, user.getLanguage());
          position += "-111 -37";
          break;
      default:
          sname = (String) map.get("name");
          String topIcon=(String)map.get("topIcon");
          if("".equals(topIcon))
      	   position += "";
          else{
             position+=topIcon;
             isDefault="0";
          }   
          break;
      }
      if (sname == null || "".equals(sname.trim())) {
      	sname = SystemEnv.getHtmlLabelName(149, user.getLanguage());
      } 
      
      if ("".equals(position)) {
          position += "-315 0";
      }
  	//\u9876\u90e8\u83dc\u5355\u7b80\u79f0
     // sname = getTopMenuName(level,sname);
     //\u4f7f\u7528config\u91cc\u9762\u7684\u9876\u90e8\u7b80\u79f0
  	if(map.get("customTopName")!=null && !"".equals((String)map.get("customTopName"))){
  		sname = (String)map.get("customTopName");
  	}
      result[0] = sname;
      result[1] = position;
      result[2] = isDefault;
      return result;
  }
  
  private String getTopMenuName(int menuId,String menuName){
  	String result = "";
  	weaver.conn.RecordSet rs = new weaver.conn.RecordSet();
  	rs.executeSql("select topmenuname,topname_e,topname_t from LeftMenuInfo where topmenuname is not null and id="+menuId);
  	if(rs.next()){
  		result = Util.null2String(rs.getString("topmenuname"));
  	}
  	result = "".equals(result)?menuName:result;
  
  	return result;
  }
  
  private String getWeekBg(User user) {
  	String strWeek = "";
      java.util.GregorianCalendar g=new java.util.GregorianCalendar();
      int week = g.get(java.util.Calendar.DAY_OF_WEEK);
      switch(week) {
      case 1:
      	strWeek = SystemEnv.getHtmlLabelName(24626,user.getLanguage());
          break;
      case 2:
      	strWeek = SystemEnv.getHtmlLabelName(392,user.getLanguage());
          break;
      case 3:
      	strWeek = SystemEnv.getHtmlLabelName(393,user.getLanguage());
          break;
      case 4:
      	strWeek = SystemEnv.getHtmlLabelName(394,user.getLanguage());
          break;
      case 5:
      	strWeek = SystemEnv.getHtmlLabelName(395,user.getLanguage());
          break;
      case 6:
      	strWeek = SystemEnv.getHtmlLabelName(396,user.getLanguage());
          break;
      case 7:
      	strWeek = SystemEnv.getHtmlLabelName(397,user.getLanguage());
          break;
      default:
      	break;
      }
      
      return strWeek;
  }
  
  private List byClickCntSort(User user, List target) {
  	int displayMenuCount = 6;
  	//result
  	List sortList = new ArrayList();
  	//\u521d\u59cb\u5316\u8fd4\u56de\u83dc\u5355\u5217\u8868
  	for(int i=0; i<displayMenuCount; i++) {
  		sortList.add(null);
  	}
  	//\u70b9\u51fb\u91cf\u6700\u9ad8\u76846\u4e2a\u83dc\u5355id\u5217\u8868
  	List menuIds = new ArrayList();
  	
  	weaver.conn.RecordSet rs = new weaver.conn.RecordSet();
  	String dbType = rs.getDBType();
  	String exeSql = "";
  	if ("sqlserver".equals((dbType))) {
  		exeSql = "SELECT menuId, clickCnt FROM HrmUserMenuStatictics WHERE userid=" + user.getUID() + " order by clickCnt desc, menuid";
  	} else {
  		//exeSql = "select t.rownumber,t.menuId, t.clickCnt  from ( SELECT rownum as rownumber,menuId, clickCnt FROM HrmUserMenuStatictics WHERE userid=" + user.getUID() + " order by clickCnt desc, menuid) t  where t.rownumber<=6";	
  		exeSql = "select t.rownumber,t.menuId, t.clickCnt  from ( SELECT rownum as rownumber,menuId, clickCnt from (SELECT menuId, clickCnt FROM HrmUserMenuStatictics WHERE userid=" + user.getUID() + " order by clickCnt desc, menuid) t ) t  where t.rownumber>=0";	
  	}
  	
  	//\u53d6\u5f97\u70b9\u51fb\u91cf\u6700\u9ad8\u76846\u4e2a\u83dc\u5355
  	rs.executeSql(exeSql);
  	int displayClickMenuCnt = 0;
  	while(rs.next()) {
  		long clickCnt = 0;
  		int menuId = 0;
  		try {
  			clickCnt = Long.parseLong(rs.getString("clickCnt"));
  		} catch(NumberFormatException e) {
  			clickCnt = 0;
  		}
  		menuId = Util.getIntValue(rs.getString("menuId"), 0);
  		
  		if (clickCnt > 0 && hasVisible(menuId, target)) {
  			if (displayClickMenuCnt > displayMenuCount - 1) {
  				continue;				
  			}
  			displayClickMenuCnt++;
  			menuIds.add(new Integer(menuId));	
  		}
  	}
  	
  	Iterator it = target.iterator();
  	while(it.hasNext()) {
  		Map map = (Map) it.next();
  		int menuId = Integer.parseInt((String)map.get("levelid"));
  		//\u662f\u5426\u663e\u793a\u8c03\u67e5\u6a21\u5757
  		if (!PortalUtil.isShowSurvey() && menuId == 635) {
  		    continue;
  		}
  		//\u662f\u5426\u663e\u793a\u90ae\u4ef6\u6a21\u5757
  		if (!PortalUtil.isShowEMail() && menuId == 536) {
  		    continue;
  		}
  		
  		//\u662f\u5426\u663e\u793a\u901a\u4fe1\u6a21\u5757
  		if (!PortalUtil.isShowMessage() && menuId == 107) {
  		    continue;
  		}
  		
  		//\u662f\u5426\u663e\u793a\u62a5\u8868\u6a21\u5757
  		if (!PortalUtil.isShowReport() && menuId == 110) {
  		    continue;
  		}
  		
  		//\u662f\u5426\u663e\u793a\u4fe1\u606f\u4e2d\u5fc3\u6a21\u5757
  		if (!PortalUtil.isShowInfoCenter() && menuId == 111) {
  		    continue;
  		}
  		
  		int index = menuIds.indexOf(new Integer(menuId));
  		
  		if (index != -1) {
  			sortList.set(index, map);
  			continue;
  		}
  		sortList.add(map);
  	}
  	
  	return sortList;
  }
  
  private boolean hasVisible(int id, List target) {
  	Iterator it = target.iterator();
  	while(it.hasNext()) {
  		Map map = (Map) it.next();
  		int menuId = Integer.parseInt((String)map.get("levelid"));
  		
  		if (id == menuId) {
  			return true;
  		}
  	}
  	return false;
  }

  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      weaver.general.BaseBean baseBean;
      baseBean = (weaver.general.BaseBean) pageContext.getAttribute("baseBean");
      if (baseBean == null) {
        baseBean = new weaver.general.BaseBean();
        pageContext.setAttribute("baseBean", baseBean);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.systeminfo.MouldStatusCominfo MouldStatusCominfo;
      MouldStatusCominfo = (weaver.systeminfo.MouldStatusCominfo) pageContext.getAttribute("MouldStatusCominfo");
      if (MouldStatusCominfo == null) {
        MouldStatusCominfo = new weaver.systeminfo.MouldStatusCominfo();
        pageContext.setAttribute("MouldStatusCominfo", MouldStatusCominfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.conn.RecordSet RecordSet;
      RecordSet = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet");
      if (RecordSet == null) {
        RecordSet = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet", RecordSet);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      
    /*\u7528\u6237\u9a8c\u8bc1*/
    User user = HrmUserVarify.getUser(request, response);
    if (user == null) {
        response.sendRedirect("/login/Login.jsp");
        return;
    }

      out.write(_jsp_string2, 0, _jsp_string2.length);
      
	//\u5224\u65ad\u662f\u5426\u6709\u5fae\u641c\u529f\u80fd
	boolean microSearch=weaver.fullsearch.util.RmiConfig.isOpenMicroSearch();
    MenuMaint mm = new MenuMaint("left", 3, user.getUID(), user.getLanguage());
    List menuArray = byClickCntSort(user, mm.getAllMenus(user, 1));
    boolean rmflg = menuArray.remove(null); 
    while(rmflg) {
    	rmflg = menuArray.remove(null);
    }
    String skin = (String)request.getAttribute("REQUEST_SKIN_FOLDER");
	 StaticObj staticobj = null;
    staticobj = StaticObj.getInstance();
    String software = (String)staticobj.getObject("software") ;
    if(software == null) software="ALL";

    int isgoveproj = Util.getIntValue(IsGovProj.getPath(),0);//0:\u975e\u653f\u52a1\u7cfb\u7edf\uff0c1\uff1a\u653f\u52a1\u7cfb\u7edf
    String Customertype = Util.null2String(""+user.getType()) ;
    String logintype = Util.null2String(user.getLogintype()) ;
	
	String signWeekBg = getWeekBg(user);

      out.write(_jsp_string3, 0, _jsp_string3.length);
      
//\u83b7\u5f97\u52a8\u6001\u7ed1\u5b9a\u7684\u641c\u7d22\u680f
RecordSet.executeSql("select * from mode_toolbar_search where isusedsearch=1 order by showorder");

      out.write(_jsp_string4, 0, _jsp_string4.length);
      out.print((SystemEnv.getHtmlLabelName(582,user.getLanguage())));
      out.write(_jsp_string5, 0, _jsp_string5.length);
      
			
			
			//String sicon = "/wui/theme/ecology8/skins/" + skin + "/page/top/menutopicons_wev8.png";
			int topLine = 1;
			//String sicon = "";
			String positoin = "";
			String sname = "";
			String isDefault="";
			String browser_isie=(String)session.getAttribute("browser_isie"); //\u5f53\u524d\u6d4f\u89c8\u5668\u662f\u5426\u4e3aIE\u6d4f\u89c8\u5668
			//baseBean.writeLog(menuArray.size());
			 MultiLangFilter f = new MultiLangFilter();
			for (int index = 0; index < menuArray.size(); index++) {
				Map map = (Map) menuArray.get(index);
				
				if (map == null) continue;
				
				//\u975eIE\u4e0b\u662f\u5426\u542f\u7528\u7cfb\u7edf\u8bbe\u7f6e\u83dc\u5355
				int level = Integer.parseInt((String) map.get("levelid"));
				if(!"true".equals(browser_isie)){
					if(level==114){
						String isOpenSysSettingMenu=GCONST.getSystemSettingMenu(); //\u662f\u5426\u5f00\u542f\u7cfb\u7edf\u8bbe\u7f6e\u83dc\u5355
						if(!isOpenSysSettingMenu.equals("1"))
							continue; //\u6ca1\u6709\u5f00\u542f\u5219\u4e0d\u663e\u793a\u7cfb\u7edf\u8bbe\u7f6e\u83dc\u5355
					}
				}
				if(level==114)continue;
			    String[] convInfo = convMenuInfo(user, map);
				try{
					sname = f.processBody(convInfo[0], ""+user.getLanguage());
				}catch(Exception e){
					sname = convInfo[0];
				}
			    //sicon = convInfo[1];
			    positoin = convInfo[1]; 
			    isDefault = convInfo[2]; 
			    String chinese = "[\u0391-\uFFE5]";
			    int length=0;
			    String tempName="";
				if(sname==null){
					sname="";
				}
			    for(int i=0;i<sname.length();i++){
			    	String temp = sname.substring(i, i + 1);
			    	if (temp.matches(chinese)) {
		                length += 2; /* \u4e2d\u6587\u5b57\u7b26\u957f\u5ea6\u4e3a2 */
		            } else {
		                length += 1; /* \u5176\u4ed6\u5b57\u7b26\u957f\u5ea6\u4e3a1 */
		            }
			    	if(length>4)
			    		break;
			    	else
			    		tempName+=temp;

			    }
			    
			
      out.write(_jsp_string6, 0, _jsp_string6.length);
      out.print((map.get("levelid")));
      out.write(_jsp_string7, 0, _jsp_string7.length);
      out.print((map.get("id")));
      out.write(_jsp_string8, 0, _jsp_string8.length);
      out.print((map.get("target")));
      out.write(_jsp_string9, 0, _jsp_string9.length);
      out.print((map.get("name")));
      out.write(_jsp_string10, 0, _jsp_string10.length);
      out.print((isDefault.equals("1")?"background-position:"+positoin:"background: url('"+positoin+"')"));
      out.write(_jsp_string11, 0, _jsp_string11.length);
      out.print((tempName ));
      out.write(_jsp_string5, 0, _jsp_string5.length);
      
				topLine++;
			}
			
      out.write(_jsp_string1, 0, _jsp_string1.length);
      
int pdHeight = 0;
if ((topLine)%5 != 0) {
	pdHeight = ((topLine )/5 + 1) *  35;
} else {
	pdHeight = ((topLine)/5) *  35;
}

      out.write(_jsp_string12, 0, _jsp_string12.length);
      out.print((SystemEnv.getHtmlLabelName(31649,user.getLanguage()) ));
      out.write(_jsp_string13, 0, _jsp_string13.length);
      out.print((microSearch?9:2));
      out.write(_jsp_string14, 0, _jsp_string14.length);
      out.print((microSearch?
      												SystemEnv.getHtmlLabelName(31953,user.getLanguage()):
      												SystemEnv.getHtmlLabelName(30042,user.getLanguage())));
      out.write(_jsp_string15, 0, _jsp_string15.length);
       if(microSearch){ 
      out.write(_jsp_string16, 0, _jsp_string16.length);
      out.print((SystemEnv.getHtmlLabelName(31953,user.getLanguage())));
      out.write(_jsp_string17, 0, _jsp_string17.length);
      }
      out.write(_jsp_string18, 0, _jsp_string18.length);
      out.print((SystemEnv.getHtmlLabelName(30042,user.getLanguage())));
      out.write(_jsp_string19, 0, _jsp_string19.length);
      out.print((SystemEnv.getHtmlLabelName(30045,user.getLanguage())));
      out.write(_jsp_string20, 0, _jsp_string20.length);
      out.print((SystemEnv.getHtmlLabelName(30041,user.getLanguage())));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      if(isgoveproj==0){
      out.write(_jsp_string22, 0, _jsp_string22.length);
      if((Customertype.equals("3") || Customertype.equals("4") || !logintype.equals("2"))&&("1".equals(MouldStatusCominfo.getStatus("crm"))||"".equals(MouldStatusCominfo.getStatus("crm")))){
      out.write(_jsp_string23, 0, _jsp_string23.length);
      out.print((SystemEnv.getHtmlLabelName(30043,user.getLanguage())));
      out.write(_jsp_string17, 0, _jsp_string17.length);
      
									}
								}
									
      out.write(_jsp_string24, 0, _jsp_string24.length);
      if("1".equals(MouldStatusCominfo.getStatus("cwork"))||"".equals(MouldStatusCominfo.getStatus("cwork"))) {
      out.write(_jsp_string25, 0, _jsp_string25.length);
      out.print((SystemEnv.getHtmlLabelName(30047,user.getLanguage())));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      } 
      out.write(_jsp_string26, 0, _jsp_string26.length);
      
								if (PortalUtil.isShowEMail()) {
								
      out.write(_jsp_string27, 0, _jsp_string27.length);
      out.print((SystemEnv.getHtmlLabelName(71,user.getLanguage())));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      
								}
								
      out.write(_jsp_string28, 0, _jsp_string28.length);
      
								if(isgoveproj==0&&("1".equals(MouldStatusCominfo.getStatus("proj"))||"".equals(MouldStatusCominfo.getStatus("proj")))){
      out.write(_jsp_string29, 0, _jsp_string29.length);
      out.print((SystemEnv.getHtmlLabelName(30046,user.getLanguage())));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      
								}
								
      out.write(_jsp_string28, 0, _jsp_string28.length);
      
								if((!logintype.equals("2")) && software.equals("ALL")&&("1".equals(MouldStatusCominfo.getStatus("cpt"))||"".equals(MouldStatusCominfo.getStatus("cpt")))){
      out.write(_jsp_string30, 0, _jsp_string30.length);
      out.print((SystemEnv.getHtmlLabelName(30044,user.getLanguage())));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      
								}
								
      out.write(_jsp_string31, 0, _jsp_string31.length);
        
								    while(RecordSet.next()){
								       String tempName = RecordSet.getString("searchname");
								       if(tempName.length() > 2){
								    	   tempName = tempName.substring(0,2);  
								       }
								    
      out.write(_jsp_string32, 0, _jsp_string32.length);
      out.print((RecordSet.getString("imageurl") ));
      out.write(_jsp_string33, 0, _jsp_string33.length);
      out.print((tempName ));
      out.write(_jsp_string34, 0, _jsp_string34.length);
      out.print((RecordSet.getInt("mainid") ));
      out.write(_jsp_string35, 0, _jsp_string35.length);
      out.print((RecordSet.getInt("serachtype") ));
      out.write(_jsp_string36, 0, _jsp_string36.length);
      out.print((RecordSet.getInt("searchField") ));
      out.write(_jsp_string37, 0, _jsp_string37.length);
       } 
      out.write(_jsp_string38, 0, _jsp_string38.length);
      out.print((SystemEnv.getHtmlLabelName(84128,user.getLanguage()) ));
      out.write(_jsp_string39, 0, _jsp_string39.length);
      out.print((skin ));
      out.write(_jsp_string40, 0, _jsp_string40.length);
      out.print((skin ));
      out.write(_jsp_string41, 0, _jsp_string41.length);
      out.print((signWeekBg ));
      out.write(_jsp_string42, 0, _jsp_string42.length);
      out.print((skin ));
      out.write(_jsp_string43, 0, _jsp_string43.length);
      out.print((pdHeight + 10));
      out.write(_jsp_string44, 0, _jsp_string44.length);
      out.print((skin ));
      out.write(_jsp_string45, 0, _jsp_string45.length);
      out.print(("-" + (342 - (pdHeight + 10)) ));
      out.write(_jsp_string46, 0, _jsp_string46.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("wui/theme/ecology8/page/top.jsp"), -6775425894594276236L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string43;
  private final static char []_jsp_string23;
  private final static char []_jsp_string29;
  private final static char []_jsp_string36;
  private final static char []_jsp_string37;
  private final static char []_jsp_string34;
  private final static char []_jsp_string28;
  private final static char []_jsp_string35;
  private final static char []_jsp_string12;
  private final static char []_jsp_string31;
  private final static char []_jsp_string22;
  private final static char []_jsp_string17;
  private final static char []_jsp_string39;
  private final static char []_jsp_string5;
  private final static char []_jsp_string21;
  private final static char []_jsp_string6;
  private final static char []_jsp_string15;
  private final static char []_jsp_string0;
  private final static char []_jsp_string10;
  private final static char []_jsp_string16;
  private final static char []_jsp_string27;
  private final static char []_jsp_string24;
  private final static char []_jsp_string18;
  private final static char []_jsp_string20;
  private final static char []_jsp_string19;
  private final static char []_jsp_string8;
  private final static char []_jsp_string3;
  private final static char []_jsp_string44;
  private final static char []_jsp_string26;
  private final static char []_jsp_string7;
  private final static char []_jsp_string40;
  private final static char []_jsp_string33;
  private final static char []_jsp_string32;
  private final static char []_jsp_string38;
  private final static char []_jsp_string30;
  private final static char []_jsp_string14;
  private final static char []_jsp_string11;
  private final static char []_jsp_string13;
  private final static char []_jsp_string1;
  private final static char []_jsp_string41;
  private final static char []_jsp_string4;
  private final static char []_jsp_string25;
  private final static char []_jsp_string45;
  private final static char []_jsp_string42;
  private final static char []_jsp_string46;
  private final static char []_jsp_string2;
  private final static char []_jsp_string9;
  static {
    _jsp_string43 = "/page/ecologyShellImg_wev8.png);background-position: -252 -75px;background-repeat: no-repeat;width:6px;height:29px;\" class=\"toolbarTopRight\">\r\n					</div>-->\r\n			</div>\r\n		</div>\r\n		\r\n	</td>\r\n	\r\n</tr>\r\n</table>\r\n\r\n<!-- For slide-->\r\n<script type=\"text/javascript\" src=\"/wui/common/jquery/plugin/jquery.cycle.all_wev8.js\"></script>\r\n<script type=\"text/javascript\" src=\"/wui/common/jquery/plugin/jquery.easing_wev8.js\"></script>\r\n<script type=\"text/javascript\" src=\"/js/ecology8/jQueryRotate_wev8.js\"></script>    \r\n<script language=\"javascript\">\r\n\r\nvar isAdd = true;\r\n\r\n//\u9876\u90e8\u83dc\u5355\u6700\u5927\u9ad8\u5ea6\r\nvar TOP_MENU_MAX_HEIGHT = \"".toCharArray();
    _jsp_string23 = " \r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/crm_wev8.png\"/><span searchType=\"3\">".toCharArray();
    _jsp_string29 = "\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/p_wev8.png\"/><span searchType=\"6\">".toCharArray();
    _jsp_string36 = "</span>\r\n                                      <span style=\"display:none;\" name=\"fieldname\">".toCharArray();
    _jsp_string37 = "</span>\r\n                                  </li>\r\n                                \r\n                                ".toCharArray();
    _jsp_string34 = "</span></a>\r\n                                      <span style=\"display:none;\" name=\"mainid\" >".toCharArray();
    _jsp_string28 = "\r\n							".toCharArray();
    _jsp_string35 = "</span>\r\n                                      <span style=\"display:none;\" name=\"stype\">".toCharArray();
    _jsp_string12 = "\r\n		</div>\r\n		<div style=\"height:50px;float:left;\">\r\n			<div id=\"topMenuContr\" class=\"slideItemText moreText leftMenuTopBtn   add\" style=\"vertical-align:middle;width:40px;top:7px;\">\r\n				<div style=\"padding-top:8px; position:absolute;width:100%\" class=\"\">\r\n				<img src='/wui/theme/ecology8/page/images/nav_wev8.png' width=\"16px\" height=\"16px\" style='vertical-align:middle;' id='closeTop'/>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div style=\"margin-left:3px;top:7px;\"  class=\"slideItemText moreText leftMenuTopBtn\">\r\n			<div id=\"freqUse\" class=\"freqUse\" style=\"height:100%;line-height:35px;\">".toCharArray();
    _jsp_string31 = "\r\n							\r\n								".toCharArray();
    _jsp_string22 = "\r\n									".toCharArray();
    _jsp_string17 = "</span></a></li>\r\n									".toCharArray();
    _jsp_string39 = "\" style=\"vertical-align :middle;\"/>\r\n						</div>\r\n						<div class=\"keywordsearchbtn\" style=\"position:absolute;left:590px;top:7px;\">\r\n							<div  onclick=\"clearVal(document.getElementById('searchvalue'));searchForm.submit()\" id=\"searchbt\" style=\"cursor:pointer;height:100%;width:100%;\">\r\n								<img style=\"vertical-align:middle;margin-top:10px;position:absolute;left:8px\" src=\"/wui/theme/ecology8/skins/".toCharArray();
    _jsp_string5 = "</DIV>\r\n			</div>\r\n			".toCharArray();
    _jsp_string21 = "</span></a></li>\r\n								".toCharArray();
    _jsp_string6 = " \r\n			<div class=\"menuItem\" style=\"\" onClick=\"clickstatictics(this);\" levelid=\"".toCharArray();
    _jsp_string15 = "\r\n									</span>\r\n									<div class=\"e8_dropdown\"></div>\r\n									<!--background: url(/wui/theme/ecology8/skins/default/page/ecologyShellImg_wev8.png);background-repeat: no-repeat; background-position: -262px  -62px;-->\r\n									<div style=\"float:right;display: block; width:8px;height:18px;*height:18px;margin-top:3px;\" class=\"searchTxt searchTxtSplit\">|</div>\r\n								</a>\r\n							</div>\r\n							<div class=\"selectContent\" style=\"margin-top:26px;*margin-top:20px;_margin-top:0px;\">\r\n								<ul id=\"searchBlockUl\">\r\n									<iframe src=\"\" style=\"filter:alpha(opacity=0);opacity:0;position:absolute; visibility:inherit; top:0px; left:0px; width:100%; height:100%; z-index:-1; filter='progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)';\" >\r\n									</iframe>\r\n									".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string10 = "\">\r\n			    <!--<DIV class=\"menuItemIcon\" style=\"".toCharArray();
    _jsp_string16 = "\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/ws_wev8.png\"/><span searchType=\"9\">".toCharArray();
    _jsp_string27 = "\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/mail_wev8.png\"/><span searchType=\"7\">".toCharArray();
    _jsp_string24 = "\r\n										".toCharArray();
    _jsp_string18 = "\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/hrs_wev8.png\"/><span searchType=\"2\">".toCharArray();
    _jsp_string20 = "</span></a></li>\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/docs_wev8.png\"/><span searchType=\"1\">".toCharArray();
    _jsp_string19 = "</span></a></li>\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/wls_wev8.png\"/><span searchType=\"5\">".toCharArray();
    _jsp_string8 = "\" target=\"".toCharArray();
    _jsp_string3 = "\r\n\r\n\r\n".toCharArray();
    _jsp_string44 = "\";   \r\njQuery(document).ready(function(){\r\n	//\u5bfc\u822a\u5757\u79fb\u52a8\r\n    jQuery(\".menuItem\").bind(\"mouseover\",function() {\r\n    	topMenuNavMove(this);\r\n    });\r\n	jQuery(\".menuItem\").bind(\"mouseout\",function(){\r\n		topMenuNavOut(this);\r\n	})\r\n    //\u83dc\u5355\u5c55\u5f00\u6216\u8005\u6536\u7f29\r\n    jQuery(\"#topMenuContr\").bind(\"click\", function() {\r\n    	hideOtherHoverDiv('top');\r\n    	if (jQuery(\".topMenuDiv_top\").height() > 70) {\r\n    		jQuery(this).removeClass(\"menuNavSpan_Contraction\").removeClass(\"leftcolor\");\r\n    		jQuery(this).addClass(\"menuNavSpan_Expand\");\r\n    		topMenuContraction();\r\n    	} else {\r\n    		jQuery(this).removeClass(\"menuNavSpan_Expand\");\r\n    		jQuery(this).addClass(\"menuNavSpan_Contraction\").addClass(\"leftcolor\");\r\n	        topMenuExpand();\r\n	    }\r\n    });\r\n    \r\n    //\u5149\u6807\u4e0d\u5728\u83dc\u5355\u533a\u57df\u65f6\uff0c\u5982\u679c\u83dc\u5355\u65f6\u5c55\u5f00\u7684\u5219\u6536\u7f29\u3002\r\n    jQuery(\".topMenuDiv\").hover(function() {}, function() {\r\n    	if (jQuery(\".topMenuDiv_top\").height() > 70) {\r\n	    	topMenuContraction();\r\n	    }else if(jQuery(\".topMenuDiv_top\").height() < 70&&jQuery(\".topMenuDiv_top\").hasClass(\"leftcolor\")){\r\n	        topMenuContraction();\r\n	    }\r\n    });\r\n    \r\n    jQuery.ajax({\r\n		url: \"/wui/theme/ecology8/page/getLeftMenu.jsp?t=\"+new Date().getTime(),\r\n	    dataType: \"text\", \r\n	    contentType : \"charset=UTF-8\", \r\n	    error:function(ajaxrequest){}, \r\n	    success:function(content){\r\n	    	eval(content);\r\n	    }\r\n	})\r\n});\r\n\r\nfunction topMenuNavMove(_this) {\r\n    $this=jQuery(_this);\r\n    /*jQuery(\"#divFloatBg\").show();\r\n    jQuery(\"#divFloatBg\").each(function(){jQuery.dequeue(this, \"fx\");}).animate({                \r\n        top: $this.position().top -3,\r\n        left: $this.position().left+4\r\n    },600, 'easeOutExpo');*/\r\n	$this.children(\".slideItemText\").addClass(\"topItemOver\");\r\n}\r\n\r\nfunction topMenuNavOut(_this){\r\n	$this=jQuery(_this);\r\n	$this.children(\".slideItemText\").removeClass(\"topItemOver\");\r\n}\r\n\r\n/**\r\n* \u83dc\u5355\u6536\u7f29\r\n*/\r\nfunction topMenuContraction() {\r\n	jQuery(\"#topMenuContr\").removeClass(\"menuNavSpan_Contraction\").removeClass(\"leftcolor\");\r\n    jQuery(\"#topMenuContr\").addClass(\"menuNavSpan_Expand\");\r\n    jQuery(\"#topMenuContr\").parent().removeClass(\"menuNavSpan_Contraction\").removeClass(\"leftcolor\");\r\n   	jQuery(\".topMenuDiv_top .slideItemText\").removeClass(\"slideItemTextExpand\");\r\n	jQuery(\".topMenuDiv_top\").each(function() {jQuery.dequeue(this, \"fx\")}).animate({\r\n		height:35\r\n	} , 0);\r\n	if (jQuery(\"#divFloatBg\").offset().top >= 67 ) {\r\n	    jQuery(\"#divFloatBg\").hide();\r\n	}\r\n	/*if(isAdd){\r\n	}else{\r\n		var angle = 0;\r\n		var timer = setInterval(function(){\r\n			angle+=5;\r\n			jQuery(\"#closeTop\").rotate(angle);\r\n			if (angle==90) clearInterval(timer);\r\n		},5);\r\n	}*/\r\n	jQuery(\".topMenuDiv_top\").removeClass(\"topMenuDivOver\").removeClass(\"leftcolor\")\r\n	//jQuery(\".topMenuDiv_top\").css(\"background\", \"\");\r\n	jQuery(\"#topMenuContr\").css(\"height\",\"35px\");\r\n	jQuery(\".topItemSelect\").removeClass(\"topItemSelectBorder\").removeClass(\"logobordercolor\");\r\n}\r\n\r\n/**\r\n* \u83dc\u5355\u5c55\u5f00\r\n*/\r\nfunction topMenuExpand() {\r\n	/*jQuery(\".topMenuDiv\").css(\"background\", \"url(/wui/theme/ecology8/skins/".toCharArray();
    _jsp_string26 = "\r\n								".toCharArray();
    _jsp_string7 = "\" id=\"".toCharArray();
    _jsp_string40 = "/page/search_wev8.png\"></img>\r\n							</div>\r\n						</div>\r\n						\r\n				 </form>\r\n			\r\n			\r\n			<!--<div style=\"float:left;\">\r\n					<div style=\"float:left\">\r\n						<div class=\"topBlockDateBlock\" style=\"float:left;cursor:pointer;font-weight:bold;color:#003366;background:url(/wui/theme/ecology8/skins/".toCharArray();
    _jsp_string33 = "\"/><span searchType=\"10\">".toCharArray();
    _jsp_string32 = "\r\n                                  <li>\r\n                                      <a href=\"#\"><img height=\"14\" width=\"14\" src=\"".toCharArray();
    _jsp_string38 = "\r\n								\r\n								</ul>\r\n							</div>\r\n						</div>\r\n						\r\n						<div style=\"float:left;vertical-align :middle;position:absolute;left:480px;top:8px;\" >\r\n							<input type=\"text\" id=\"searchvalue\" name=\"searchvalue\" onfocus=\"clearVal(this);\" onblur=\"recoverVal(this);\" class=\"searchkeywork\" value=\"".toCharArray();
    _jsp_string30 = "\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/zc_wev8.png\"/><span searchType=\"4\">".toCharArray();
    _jsp_string14 = "\">\r\n					<input type=\"hidden\" id=\"mainid\" name=\"mainid\" value=\"\">\r\n					<input type=\"hidden\" id=\"stype\" name=\"stype\" value=\"\">\r\n					<input type=\"hidden\" id=\"fieldname\" name=\"fieldname\" value=\"\">\r\n						<div id=\"sample\" class=\"dropdown\" style=\"float:left;position:absolute;left:410px;top:8px\">\r\n							<div class=\"selectTile\">\r\n								<a href=\"#\" style=\"width:57px;\">\r\n									<span style=\"height:35px;line-height:28px;float:left;width:32px;display:block;overflow:hidden;text-overflow:ellipsis;color:#fff;padding:0;\" class=\"searchTxt\">\r\n										".toCharArray();
    _jsp_string11 = ";\"></DIV>-->\r\n				<DIV class=\"slideItemText\">".toCharArray();
    _jsp_string13 = "</div>\r\n			\r\n		</div>\r\n	<form name=\"searchForm\" method=\"post\" action=\"/system/QuickSearchOperation.jsp\" target=\"mainFrame\">\r\n		<div class=\"searchBlockBgDiv slideItemText\" style=\"overflow:visible;position:absolute;left:380px;\"></div>\r\n			\r\n					<input type=\"hidden\" name=\"searchtype\" value=\"".toCharArray();
    _jsp_string1 = "\r\n".toCharArray();
    _jsp_string41 = "/page/ecologyShellImg_wev8.png);background-position: -148px -75px;background-repeat: no-repeat;width:54px;height:29px;line-height:32px;text-align:center;overflow:hidden;\" >\r\n							".toCharArray();
    _jsp_string4 = "\r\n\r\n\r\n\r\n\r\n<style>\r\n    \r\n	\r\n</style>\r\n\r\n<script type=\"text/javascript\">\r\n<!--\r\nfunction topMenuBgIframeOnload(_this) {\r\n	_this.contentWindow.document.body.style.background = 'transparent';\r\n	_this.contentWindow.document.body.style.border='none';\r\n}\r\n//-->\r\n</script>\r\n\r\n<table border=\"0\" width=\"661px\" height=\"50px\" align=\"left\" cellpadding=\"0px\" cellspacing=\"0px\" id=\"topCenterTable\">\r\n<tr>\r\n	<td align=\"left\" width=\"661px\">\r\n		<div class=\"topMenuDiv\">\r\n		\r\n		<div class=\"topMenuDiv_top\">\r\n			<div id=\"divFloatBg\"></div>\r\n			<div class=\"menuItem\" style=\"\" onClick=\"dymlftenu(this);topMenuContraction();\" >\r\n			    <!--<DIV class=\"menuItemIcon\" style=\"background-position:0 0;\"></DIV>-->\r\n				<DIV class=\"slideItemText\">".toCharArray();
    _jsp_string25 = "\r\n									<li><a href=\"#\"><img src=\"/wui/theme/ecology8/page/images/toolbar/xz_wev8.png\"/><span searchType=\"8\">".toCharArray();
    _jsp_string45 = "/page/top/menu_expand_bg_wev8.jpg)  \");*/\r\n	jQuery(\".topMenuDiv_top\").addClass(\"topMenuDivOver\").addClass(\"leftcolor\");\r\n	jQuery(\".topMenuDiv_top\").css(\"background-position\",\"0 ".toCharArray();
    _jsp_string42 = "\r\n						</div>\r\n					</div>-->\r\n					\r\n					<!--<div style=\"float:left;display:block;background:url(/wui/theme/ecology8/skins/".toCharArray();
    _jsp_string46 = "\");\r\n	jQuery(\".topMenuDiv_top\").css(\"background-repeat\",\"no-repeat\");\r\n	jQuery(\".topMenuDiv_top .slideItemText\").addClass(\"slideItemTextExpand\");\r\n	if(isIE() && document.documentMode==5){\r\n		jQuery(\"#topMenuContr\").css(\"height\",parseInt(TOP_MENU_MAX_HEIGHT));\r\n	}else{\r\n		jQuery(\"#topMenuContr\").css(\"height\",parseInt(TOP_MENU_MAX_HEIGHT)-2);\r\n	}	\r\n	jQuery(\"#topMenuContr\").parent().addClass(\"menuNavSpan_Contraction\").addClass(\"leftcolor\");\r\n	jQuery(\".topItemSelect\").addClass(\"topItemSelectBorder\").addClass(\"logobordercolor\");\r\n	/*var angle = 0;\r\n	var timer = setInterval(function(){\r\n	angle+=5;\r\n	isAdd = false;\r\n	jQuery(\"#closeTop\").rotate(angle);\r\n	if (angle==135) clearInterval(timer);\r\n	},5);*/\r\n	jQuery(\".topMenuDiv_top\").each(function() {jQuery.dequeue(this, \"fx\")}).animate({\r\n   		height: TOP_MENU_MAX_HEIGHT\r\n		//height:\"100px\"\r\n   	} , 0);\r\n}\r\n\r\n/**\r\n* \u70b9\u51fb\u83dc\u5355\u9879\u65f6\u89e6\u53d1\uff0c\u4f1a\u7edf\u8ba1\u83dc\u5355\u70b9\u51fb\u7684\u6b21\u6570\uff0c\u5e76\u6253\u5f00\u5b50\u9879\uff08\u5de6\u4fa7\uff09\r\n*/\r\nfunction clickstatictics(_this) {\r\n	\r\n	topMenuContraction();\r\n	isAdd = true;\r\n	jQuery(\"#drillcrumb\").text(jQuery(_this).text());\r\n	//jQuery(\".slideDivHidden\").hide();//animate({opacity: \"hide\", height: \"hide\"}, 0);\r\n	dymlftenu(_this);\r\n	var ajaxUrl = \"/wui/theme/ecology8/page/topMenuClickStatictics.jsp\";\r\n	ajaxUrl += \"?mid=\";\r\n	ajaxUrl += jQuery(_this).attr(\"levelid\");\r\n	ajaxUrl += \"&token=\";\r\n	ajaxUrl += new Date().getTime();\r\n	\r\n	jQuery.ajax({\r\n	    url: ajaxUrl,\r\n	    dataType: \"text\", \r\n	    contentType : \"charset=UTF-8\", \r\n	    error:function(ajaxrequest){}, \r\n	    success:function(content){\r\n	    }  \r\n    });\r\n}\r\n</script>".toCharArray();
    _jsp_string2 = "\r\n\r\n".toCharArray();
    _jsp_string9 = "\"  title=\"".toCharArray();
  }
}
